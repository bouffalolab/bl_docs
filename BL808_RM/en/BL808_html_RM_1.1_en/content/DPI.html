<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11. DPI &mdash; BL808 Reference Manual  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12. DSI" href="DSI.html" />
    <link rel="prev" title="10. DBI" href="DBI.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL808 Reference Manual
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and Clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="GPIO.html">4. GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">5. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">6. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">7. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA2D.html">8. DMA2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lz4d.html">9. LZ4D</a></li>
<li class="toctree-l1"><a class="reference internal" href="DBI.html">10. DBI</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. DPI</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">11.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#features">11.2. Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functional-description">11.3. Functional Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dpi-timing">11.3.1. DPI Timing</a></li>
<li class="toctree-l3"><a class="reference internal" href="#programmable-timing-parameters">11.3.2. Programmable timing parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#single-buffer">11.3.3. Single Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ping-pong-buffer">11.3.4. Ping-Pong Buffer</a></li>
<li class="toctree-l3"><a class="reference internal" href="#test-mode">11.3.5. Test Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#input-pixel-format">11.3.6. Input Pixel Format</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#yuv422-interleaved">11.3.6.1. YUV422 (Interleaved)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rgb888">11.3.6.2. RGB888</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rgb565">11.3.6.3. RGB565</a></li>
<li class="toctree-l4"><a class="reference internal" href="#rgba8888">11.3.6.4. RGBA8888</a></li>
<li class="toctree-l4"><a class="reference internal" href="#yuv420-planar">11.3.6.5. YUV420 (Planar)</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#programmable-interrupt">11.3.7. Programmable Interrupt</a></li>
<li class="toctree-l3"><a class="reference internal" href="#use-with-osd">11.3.8. Use with OSD</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="DSI.html">12. DSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cam.html">13. CAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">14. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">15. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">16. UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2C.html">17. I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">18. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">19. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2s.html">20. I2S</a></li>
<li class="toctree-l1"><a class="reference internal" href="PDM.html">21. PDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="AUDIO.html">22. AUDIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSRAM.html">23. PSRAM Contorller</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emac.html">24. Emac</a></li>
<li class="toctree-l1"><a class="reference internal" href="USB.html">25. USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="SDH.html">26. SDH</a></li>
<li class="toctree-l1"><a class="reference internal" href="ISO11898.html">27. ISO11898</a></li>
<li class="toctree-l1"><a class="reference internal" href="MJPEG.html">28. MJPEG</a></li>
<li class="toctree-l1"><a class="reference internal" href="JDEC.html">29. JDEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="VENC.html">30. VENC</a></li>
<li class="toctree-l1"><a class="reference internal" href="NPUtoolchain.html">31. NPU toolchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="NPU.html">32. NPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="IPC.html">33. IPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="LowPower.html">34. LowPower</a></li>
<li class="toctree-l1"><a class="reference internal" href="SEC_ENG.html">35. SEC ENG</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">36. Revision history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL808 Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">11. </span>DPI</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="dpi">
<h1><span class="section-number">11. </span>DPI<a class="headerlink" href="#dpi" title="Permalink to this headline"></a></h1>
<section id="overview">
<h2><span class="section-number">11.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>The Display Pixel Interface (DPI), also known as RGB interface, is an interface protocol defined by MIPI Alliance for communicating with display screens. This module has 16-bit parallel data lines, with the system memory acting as the display memory, and drives the display directly by continuously outputting data and synchronization signals.</p>
</section>
<section id="features">
<h2><span class="section-number">11.2. </span>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Meets MIPI® Alliance standard</p></li>
<li><p>Supports single buffer and ping-pong buffer serving as the display memory</p></li>
<li><p>Supports hardware and software control for ping-pong operation</p></li>
<li><p>Supports the Test Mode</p></li>
<li><p>Programmable timing parameters</p></li>
<li><p>Supported input pixel format (buffer data format):</p>
<ul>
<li><p>YUV422 (interleaved)</p></li>
<li><p>RGB888</p></li>
<li><p>RGB565</p></li>
<li><p>RGBA8888</p></li>
<li><p>YUV420 (planar)</p></li>
</ul>
</li>
<li><p>Supports output pixel format of RGB565</p></li>
<li><p>One programmable interrupt</p></li>
<li><p>Use with OSD</p></li>
</ul>
</section>
<section id="functional-description">
<h2><span class="section-number">11.3. </span>Functional Description<a class="headerlink" href="#functional-description" title="Permalink to this headline"></a></h2>
<p>The block diagram of DPI Module is shown as follows.</p>
<figure class="align-center" id="id1">
<img alt="../_images/DPIBlock.svg" src="../_images/DPIBlock.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.1 </span><span class="caption-text">Block Diagram of DPI</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="dpi-timing">
<h3><span class="section-number">11.3.1. </span>DPI Timing<a class="headerlink" href="#dpi-timing" title="Permalink to this headline"></a></h3>
<p>The 16-bit DPI interface timing is shown as follows:</p>
<figure class="align-center" id="id2">
<img alt="../_images/DPITiming.svg" src="../_images/DPITiming.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.2 </span><span class="caption-text">DPI Timing</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<ul class="simple">
<li><p>Vertical Sync (VSYNC): Vertically synchronized timing signal, used to indicate the beginning of each displayed image frame</p></li>
<li><p>Horizontal Sync (HSYNC): Horizontally synchronized timing signal, used to indicate the beginning of each horizontal pixel line</p></li>
<li><p>Pixel Clock (PCLK): Pixel clock, continuously generated; VSYNC, HSYNC, DE, and DB [15:0] will be sampled at the rising edge of PCLK</p></li>
<li><p>Data Enable (DE): Data enable signal, used to indicate valid pixel data</p></li>
<li><p>Data Bit (DB) [15:0]: Parallel data bits – 16 bits in total, used to transfer pixel data.</p></li>
</ul>
</section>
<section id="programmable-timing-parameters">
<h3><span class="section-number">11.3.2. </span>Programmable timing parameters<a class="headerlink" href="#programmable-timing-parameters" title="Permalink to this headline"></a></h3>
<p>The timing parameters of DPI are shown as follows:</p>
<figure class="align-center" id="id3">
<img alt="../_images/DPIParameter.svg" src="../_images/DPIParameter.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.3 </span><span class="caption-text">Timing Parameters</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The vertical period (one frame) is equal to the sum of Vsync, VBP, VACT, and VFP. The horizontal period (one line) is equal to the sum of Hsync, HBP, HACT, and HFP. The programmable ranges of the timing parameters are shown in the following table:</p>
<figure class="align-center" id="id4">
<img alt="../_images/DPITable.svg" src="../_images/DPITable.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.4 </span><span class="caption-text">Ranges of Timing Parameters</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="single-buffer">
<h3><span class="section-number">11.3.3. </span>Single Buffer<a class="headerlink" href="#single-buffer" title="Permalink to this headline"></a></h3>
<p>The DPI Module can use one memory with a size of “display resolution × number of bytes per pixel” as the display memory. When it starts working, DPI transfers the data in this memory to the Display Module repeatedly and continuously. If changes are made to the data in this memory, the changes may take effect on the current or next frame, depending on whether the changed data is located in memory after or before the location in memory of the data currently being transferred by the DPI.</p>
</section>
<section id="ping-pong-buffer">
<h3><span class="section-number">11.3.4. </span>Ping-Pong Buffer<a class="headerlink" href="#ping-pong-buffer" title="Permalink to this headline"></a></h3>
<p>The DPI Module can use two memories with each size of “display resolution × number of bytes per pixel” as the display memory. DPI transfers the data in one memory to the Display Module repeatedly and continuously. The control mode for switching the current memory for data transfer to the other memory can be set to hardware or software control. When it is set to hardware control, the data for DPI is provided by the Cam Module (see Cam Module section); DPI switches the current memory in use to another memory after the Cam Module has written a complete frame of data to the memory not involved in transfer, and the data in the current memory is completely transferred. When it is set to software control, the memory currently used by DPI for transfer is set by &lt;SWAP_IDX_SWV&gt;, with “0” and “1” corresponding to two memory blocks respectively.</p>
</section>
<section id="test-mode">
<h3><span class="section-number">11.3.5. </span>Test Mode<a class="headerlink" href="#test-mode" title="Permalink to this headline"></a></h3>
<p>In Test Mode, DPI can output images with the same pixel color in the same row and a gradient color between different rows. The Test Mode requires three parameters, namely the minimum value of pixel data VAL_MIN (16 bit), the maximum value of pixel data VAL_MAX (16 bit), and the step size STEP (8 bit). DPI uses VAL_MIN as the value of each pixel in the 1st row, (VAL_MIN+STEP) as the one in the 2nd row, and (VAL_MIN+STEP*2) as the one in the 3rd row…and so on, and returns to VAL_MIN when the pixel value of the Nth row (VAL_MIN+STEP*(N1)) is greater than VAL_MAX. This cycle repeats until the number of output rows reaches the set value. Taking VAL_MIN=0x00E0, VAL_MAX=0x012F, and STEP=0x10 as an example, the display in the Test Mode is shown as follows:</p>
<figure class="align-center" id="id5">
<img alt="../_images/DPITest.svg" src="../_images/DPITest.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.5 </span><span class="caption-text">Test Mode</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="input-pixel-format">
<h3><span class="section-number">11.3.6. </span>Input Pixel Format<a class="headerlink" href="#input-pixel-format" title="Permalink to this headline"></a></h3>
<p>DPI supports input in multiple pixel formats. Internally, it will convert these formats to RGB888 uniformly and then convert RGB888 to RGB565 for sending out.</p>
<section id="yuv422-interleaved">
<h4><span class="section-number">11.3.6.1. </span>YUV422 (Interleaved)<a class="headerlink" href="#yuv422-interleaved" title="Permalink to this headline"></a></h4>
<p>The processing of input data in YUV422 (interleaved) format is shown as follows:</p>
<figure class="align-center" id="id6">
<img alt="../_images/DPIYUV422.svg" src="../_images/DPIYUV422.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.6 </span><span class="caption-text">YUV422 Processing Process</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rgb888">
<h4><span class="section-number">11.3.6.2. </span>RGB888<a class="headerlink" href="#rgb888" title="Permalink to this headline"></a></h4>
<p>The processing of input data in RGB888 format is shown as follows:</p>
<figure class="align-center" id="id7">
<img alt="../_images/DPIRGB888.svg" src="../_images/DPIRGB888.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.7 </span><span class="caption-text">RGB888 Processing Process</span><a class="headerlink" href="#id7" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rgb565">
<h4><span class="section-number">11.3.6.3. </span>RGB565<a class="headerlink" href="#rgb565" title="Permalink to this headline"></a></h4>
<p>The processing of input data in RGB565 format is shown as follows:</p>
<figure class="align-center" id="id8">
<img alt="../_images/DPIRGB565.svg" src="../_images/DPIRGB565.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.8 </span><span class="caption-text">RGB565 Processing Process</span><a class="headerlink" href="#id8" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="rgba8888">
<h4><span class="section-number">11.3.6.4. </span>RGBA8888<a class="headerlink" href="#rgba8888" title="Permalink to this headline"></a></h4>
<p>The processing of input data in RGBA8888 format is shown as follows:</p>
<figure class="align-center" id="id9">
<img alt="../_images/DPIRGBA8888.svg" src="../_images/DPIRGBA8888.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.9 </span><span class="caption-text">RGBA8888 Processing Process</span><a class="headerlink" href="#id9" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="yuv420-planar">
<h4><span class="section-number">11.3.6.5. </span>YUV420 (Planar)<a class="headerlink" href="#yuv420-planar" title="Permalink to this headline"></a></h4>
<p>The processing of input data in YUV420 (planar) format is shown as follows:</p>
<figure class="align-center" id="id10">
<img alt="../_images/DPIYUV420.svg" src="../_images/DPIYUV420.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.10 </span><span class="caption-text">YUV420 Processing Process</span><a class="headerlink" href="#id10" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="programmable-interrupt">
<h3><span class="section-number">11.3.7. </span>Programmable Interrupt<a class="headerlink" href="#programmable-interrupt" title="Permalink to this headline"></a></h3>
<p>The DPI has a programmable interrupt. In configuration, the trigger source of the interrupt can be set to the input Vsync or output Vsync of the DPI, and the hopping edge can be the rising or falling edge. For example, if the interrupt is configured to be triggered on the rising edge of the input Vsync, DPI will generate an interrupt request on each Vsync rising edge of its input module. If that is configured to be triggered on the falling edge of the output Vsync, DPI generates an interrupt request on each Vsync falling edge of its output module.</p>
</section>
<section id="use-with-osd">
<h3><span class="section-number">11.3.8. </span>Use with OSD<a class="headerlink" href="#use-with-osd" title="Permalink to this headline"></a></h3>
<p>The input data of DSI can be configured to be processed by the OSD first. See the OSD Module section for functional description.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="DBI.html" class="btn btn-neutral float-left" title="10. DBI" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="DSI.html" class="btn btn-neutral float-right" title="12. DSI" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>