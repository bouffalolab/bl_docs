==================
系统和存储器概述
==================

系统架构
=========
BL808 系列芯片主要包含无线和多媒体两个子系统。

无线子系统包含一颗 RISC-V 32-bit 高性能CPU,集成 Wi-Fi BT/Zigbee 无线子系统，
可以实现多种无线连接和数据传输，提供多样化的连接与传输体验。

多媒体子系统包含一颗 RISC-V 64-bit 超高性能CPU，集成DVP/CSI/
H264/NPU等视频处理模块，
可以广泛应用于视频监控/智能音箱等多种AI领域。


BL808 系统架构如下图所示：

.. figure:: ../../picture/SystemArch.svg
   :align: center
   :scale: 80%

   系统框图

无线子系统有以下部分组成：

- 处理器
  
  * 集成了一颗 RISC-V 高性能 CPU(M0)和一颗 RISC-V 低功耗 CPU(LP)
  * 支持多种无线连接和数据传输，提供多样化的连接与传输体验

- 总线接口：AXI 总线和 AHB 总线
  
  * CPU主要通过AXI总线访问存储器
  * CPU主要通过AHB总线访问外设
  * 具备低功耗，高性能等特性

- 外设

  * 包含 UART/SPI/I2C/PWM/SDH/EMAC/USB 等常见外设，支持与周边设备进行连接、控制和存储
  * 集成 Audio 模块，支持音频数据、模拟麦克风和数字麦克风的输入，方便用户开发音频相关应用
  * 适用于低功耗应用场景，例如：在智能音箱的低功耗应用场景时，关掉其它 CPU 和外设，LP 用于 VAD 的唤醒检测

多媒体子系统有以下部分组成：

- 处理器
  
  * 集成了一颗 RISC-V 超高性能 CPU(D0)
  * 适用于视频监控，智能门铃，智能猫眼，智能音箱等多种应用领域
  * NPU 模块用于神经网络算子的加速，适用于多种AI场景
  
- 外设
  
  * 包含 UART/SPI/I2C 等常规外设，方便系统功能开发
  * CSI 和 DVP 接口连接CMOS Sensor，用于图像和视频的获取，内置 Codec 模块完成视频编码，
    配合OSD，Scaler，2DDMA等模块可以将视频数据流导入到Display模块显示


处理器
=================

BL808 芯片内部包含 3 个 RISC-V 处理器，分别命名为M0，D0，LP。
M0主要处理网络数据流和外设访问等功能，
D0主要功能是多媒体数据的计算和处理，配合多媒体相关外设，实现音视频数据的获取，存储和计算，
LP主要是负责低功耗模式下相关功能，实现系统低功耗。

M0处理器介绍
-----------------

主要功能特点
*****************
M0 是一颗 32-bit RISC-V CPU，它采用5级流水线结构：取指、译码、执行、内存访问、写回。是一款高性能嵌入式微处理处理器。其主要特征如下：

- 32 位 RISC 处理器；
- 支持 RISC-V RV32IMAFCP 指令集；
- 支持 RISC-V 32/16 位混编指令集；
- 支持 RISC-V 机器模式和用户模式；
- 32 个 32 位整型通用寄存器， 32 个 32 位/64 位浮点通用寄存器；
- 整型 5 级/浮点 7 级，单发射，顺序执行流水线；
- 支持 AXI4.0 主设备接口以及 AHB5.0 外设接口；
- 32K 指令 cache，两路组相连结构；
- 16K 数据 cache，两路组相连结构；
- 支持非对齐内存访问；
- 双周期硬件乘法器，基4硬件除法器；
- 支持 BHT(8K) 和 BTB；
- 支持扩展增强指令集；
- 支持MCU 特性扩展技术，包括中断处理加速技术、 MCU 扩展特性；
- 兼容 RISC-V CLIC 中断标准，支持中断嵌套，外部中断源数量 96 个，有 4 个 bits 可以用于配置中断优先级；
- 兼容 RISC-V PMP 内存保护标准， 8 个区域可配置；
- 支持性能监测单元(HPM)；
- 支持 RISC-V Debug 协议标准；

扩展功能
*****************
- 扩展实现了位操作指令，算术运算指令，内存访问增强指令
- 扩展实现了 CACHE 操作指令，同步指令等方便软件人员编程
- 扩展实现了中断投机压栈技术和矢量中断咬尾技术，加速中断响应，中断响应延时为 20 个处理器时钟周期
- 扩展实现了如 NMI，深浅睡眠低功耗模式，低功耗唤醒事件，锁定等 MCU 领域常见的应用需求
- 支持非对齐内存访问，并可软件开关，方便软件人员编程和调试

实现标准
*****************
M0 兼容RISC-V 标准，具体版本为：

- The RISC-V Instruction Set Manual, Volume I: RISC-V User-Level ISA, Version 2.2
- The RISC-V Instruction Set Manual, Volume II: RISC-V Privileged Architecture, Version1.10
- RISC-V Core-Local Interrupt Controller (CLIC) Version 0.8
- RISC-V External Debug Support Version 0.13.2
- RISC-V “P” Extension Proposal Version 0.9

D0处理器介绍
-----------------

主要功能特点
*****************

D0 是一颗 64-bit RISC-V CPU，它采用 5 级流水线结构。是一款超高性能嵌入式微处理处理器。可用于安防监控，智能语音处理，智能视频处理等领域。其主要特征如下：

- 64 位 RISC 处理器；
- 支持 RISC-V RV64IMAFCV 指令架构；
- 5 级单发按序执行流水线；
- 一级哈佛结构的指令和数据缓存，大小均为32KB，缓存行为 64B；
- Sv39 内存管理单元，实现虚实地址转换与内存管理；
- jTLB 支持 128 个 entry；
- 支持 AXI4.0 128 比特 Master 接口；
- 支持核内中断 CLINT 和中断控制器 PLIC；
- 外部中断源数量 80 个，有 3 个 Bits 可以用于配置中断优先级；
- 支持 BHT（8K) 和 BTB；
- 兼容 RISC-V PMP 内存保护标准， 8个区域可配置；
- 支持性能监测单元(HPM)；


矢量计算单元的主要特征点如下：

- 遵循 RISC-V V 矢量扩展标准（revision 0.7.1）；
- 支持配置矢量执行单元(128bits)；
- 支持 INT8/INT16/INT32/FP16/FP32 矢量运算；
- 支持 segment load、 store 指令；

扩展功能
*****************
- 扩展实现了位操作指令，算术运算指令，内存访问增强指令
- 扩展实现了 CACHE 操作指令，同步指令等方便软件人员编程
- 支持非对齐内存访问，并可软件开关，方便软件人员编程和调试

实现标准
*****************
D0 兼容 RISC-V 标准，具体版本为：

- The RISC-V Instruction Set Manual, Volume I: RISC-V User-Level ISA, Version 2.2
- The RISC-V Instruction Set Manual, Volume II: RISC-V Privileged Architecture, Version1.10
- RISC-V “V” Vector Extension, Version 0.7.1-20190610-Workshop-Release.
- RISC-V External Debug Support Version 0.13.2


LP处理器介绍
-----------------

主要功能特点
*****************

LP 是一颗 32-bit RISC-V CPU，它采用2级流水线结构，即指令提取级，指令译码、执行与回写级。它具有极低功耗、极低成本、高代码密度等特点，其主要特征如下：

- 32 位 RISC 处理器；
- 支持 RISC-V RV32EMC 指令集；
- 支持 RISC-V 32/16 位混编指令集；
- 16 个 32 位整型通用寄存器;
- 两级顺序执行流水线；
- 支持 RISC-V 机器模式和用户模式；
- 兼容 RISC-V CLIC 中断标准，支持中断嵌套，外部中断源32个。
- 支持 AHB-Lite 总线协议，支持指令总线，系统总线；
- 无内部 cache
- 无 PMP
- 支持 2 线调试接口

实现标准
*****************
LP 兼容RISC-V 标准，具体版本为：

- The RISC-V Instruction Set Manual, Volume I: RISC-V User-Level ISA, Version 2.2
- The RISC-V Instruction Set Manual, Volume II: RISC-V Privileged Architecture, Version1.10
- RISC-V Core-Local Interrupt Controller (CLIC) Version 0.8


启动
=================
系统支持从Flash/UART/USB启动，各个启动模式说明如下：

.. table:: 启动模式 has_header

    +---------------+---------------+-------------------------------------------------------------------------------+
    |  启动引脚     |  电平         |   描述                                                                        |
    +---------------+---------------+-------------------------------------------------------------------------------+
    | GPIO39        | 1             |  从 UART(GPIO20/21)/USB启动，该模式主要用于 Flash 下载或者下载镜像到 RAM 执行 |
    +               +---------------+-------------------------------------------------------------------------------+
    |               | 0             |  从 Flash 启动应用镜像                                                        |
    +---------------+---------------+-------------------------------------------------------------------------------+

.. raw:: latex

   \vspace{-45pt}

内存
========
BL808 存储器包括：片上零延迟SRAM存储器，只读存储器，一次写入存储器，
嵌入式闪存（可选），嵌入式pSRAM（可选）。

地址映射
================
.. table:: 内存地址映射 

    +-----------------+-------+-------------+----------------+-------------+----------------+
    |  模块           | 大小  |  开始地址（M0）              |  开始地址（D0）              |
    +                 +       +-------------+----------------+-------------+----------------+
    |                 |       | Cache       | Non-cache      | Cache       | Non-cache      |
    +=================+=======+=============+================+=============+================+
    | OCRAM(MCU)      | 64KB  | 0x62020000  | 0x22020000     | \-          | 0x22020000     |
    +-----------------+-------+-------------+----------------+-------------+----------------+
    | WRAM(MCU)       | 160KB | 0x62030000  | 0x22030000     | \-          | 0x22030000     |
    +-----------------+-------+-------------+----------------+-------------+----------------+
    | DRAM(MM)        | 512KB | \-          | 0x3EF80000     | 0x3EF80000  | \-             |
    +-----------------+-------+-------------+----------------+-------------+----------------+
    | VRAM(MM)        | 32KB  | \-          | 0x3F000000     | 0x3F000000  | \-             |
    +-----------------+-------+-------------+----------------+-------------+----------------+

.. raw:: latex

   \vspace{-15pt}

OCRAM 和 WRAM 既可以通过 AHB 总线访问，也可以通过 AXI 访问，当 CPU 使用 0x62020000 地址访问 OCRAM 时，会经过内部 Cache 并通过 AXI 转 AHB 实现对 OCRAM 的访问，
当 CPU 使用 0x22020000 地址访问 OCRAM 时，不会经过内部 Cache 并且直接通过 AHB 总线访问 OCRAM 。


.. table:: 地址映射 

    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |  模块         |  目标         |  开始地址             | 大小  |         描述                                                                                              |
    +===============+===============+=======================+=======+===========================================================================================================+
    |   pSRAM       | pSRAM         |0x50000000             | 64MB  | pSRAM 存储器地址空间，实际大小取决于芯片型号                                                              |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |   XRAM        | XRAM          |0x40000000             | 16KB  | XRAM 存储器地址空间                                                                                       |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | FLASH         | FlashA        | 0x58000000            | 64MB  | 应用程序地址空间，实际大小取决于芯片型号                                                                  |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | MMPERI        | TIMER1        | 0x30009000            | 4KB   | TIMER1 控制寄存器                                                                                         |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | SPI1          | 0x30008000            | 4KB   | SPI1 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | MM_GLB        | 0x30007000            | 4KB   | Multimedia 侧全局寄存器                                                                                   |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | DMA2D         | 0x30006000            | 4KB   | DMA2D 控制寄存器                                                                                          |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | I2C3          | 0x30004000            | 4KB   | I2C3 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | I2C2          | 0x30003000            | 4KB   | I2C2 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | UART3         | 0x30002000            | 4KB   | UART3 控制寄存器                                                                                          |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | DMA2          | 0x30001000            | 4KB   | DMA2 控制寄存器                                                                                           |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | MCUPERI       | DMA1          | 0x20071000            | 4KB   | DMA1 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | EMAC          | 0x20070000            | 4KB   | EMAC 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | AUDIO         | 0x20055000            | 4KB   | Audio 控制寄存器                                                                                          |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | USB           | 0x20072000            | 4KB   | USB 控制寄存器                                                                                            |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | HBN           | 0x2000F000            | 4KB   | 深度睡眠控制（休眠）寄存器                                                                                |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | PDS           | 0x2000E000            | 4KB   | 睡眠控制（掉电睡眠）寄存器                                                                                |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | DMA0          | 0x2000C000            | 4KB   | DMA0 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | I2S           | 0x2000AB00            | 256B  | I2S 控制寄存器                                                                                            |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | UART2         | 0x2000AA00            | 256B  | UART2 控制寄存器                                                                                          |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | newpage       |               |                       |       |                                                                                                           |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | MCUPERI       | I2C1          | 0x2000A900            | 256B  | I2C1 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | IR            | 0x2000A600            | 256B  | IR 控制寄存器                                                                                             |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | TIMER0        | 0x2000A500            | 256B  | TIMER0 控制寄存器                                                                                         |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | PWM           | 0x2000A400            | 256B  | PWM 控制寄存器                                                                                            |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | I2C0          | 0x2000A300            | 256B  | I2C0 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | SPI0          | 0x2000A200            | 256B  | SPI0 控制寄存器                                                                                           |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | UART1         | 0x2000A100            | 256B  | UART1 控制寄存器                                                                                          |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | UART0         | 0x2000A000            | 256B  | UART0 控制寄存器                                                                                          |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | eFuse         | 0x20056000            | 4KB   | eFuse 存储器控制寄存器                                                                                    |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | TZ            | 0x20005000            | 4KB   | 安全 Zone 分区                                                                                            |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | SEC_ENG       | 0x20004000            | 4KB   | 安全引擎控制寄存器                                                                                        |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | GPIP          | 0x20002000            | 1KB   | 通用DAC / ADC / ACOMP接口控制寄存器                                                                       |
    +               +---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    |               | GLB           | 0x20000000            | 4KB   | 全局控制寄存器                                                                                            |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+
    | ROM           | ROM           | 0x90000000            | 128KB | Bootrom区域地址空间                                                                                       |
    +---------------+---------------+-----------------------+-------+-----------------------------------------------------------------------------------------------------------+

.. table:: DRAM/VRAM 地址空间

    +---------------+------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |  DRAM/VRAM                                   |  Configure(reg_h2pf_sram_rel，reg_vram_sram_sel，reg_ispl_sram_rel，reg_blai_sram_rel)                             |
    +                                              +---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |                                              | 0，0，0，0    | 0，0，0，1     | 1，0，0，0  | 3，0，0，0  | 0，0，1，0  | 0，1，0，0  | 2，0，0，1  | 3，1，1，1  |
    +===============+==============================+===============+================+=============+=============+=============+=============+=============+=============+
    |   DRAM        | 0x3EF80000 - 0x3EF8FFFF      | \-            | \-             | \-          | \-          | \-          | \-          | \-          | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EF90000 - 0x3EF9FFFF      | \-            | \-             | \-          | \-          | \-          | \-          | \-          | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFA0000 - 0x3EFAFFFF      | \-            | \-             | \-          | \-          | \-          | \-          | \-          | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFB0000 - 0x3EFBFFFF      | \-            | \-             | \-          | \-          | \-          | \-          | 64K         | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFC0000 - 0x3EFCFFFF      | \-            | \-             | \-          | 64K         | \-          | \-          | 64K         | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFD0000 - 0x3EFDFFFF      | \-            | 64K            | \-          | 64K         | \-          | \-          | 64K         | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFE0000 - 0x3EFEFFFF      | \-            | 64K            | 64K         | 64K         | 64K         | 64K         | 64K         | 64K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3EFF0000 - 0x3EFFFFFF      | 64K           | 64K            | 64K         | 64K         | 64K         | 64K         | 64K         | 64K         |
    +---------------+------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    | VRAM          | 0x3F000000 - 0x3F007FFF      | 32K           | 32K            | 32K         | 32K         | 32K         | 32K         | 32K         | 32K         |
    +               +------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+
    |               | 0x3F008000 - 0x3F017FFF      | 64K           | 64K            | 64K         | 64K         | 64K         | \-          | 64K         | \-          |
    +---------------+------------------------------+---------------+----------------+-------------+-------------+-------------+-------------+-------------+-------------+

中断源
============
CPU_M0和CPU_LP一共包含23个中断源，中断源与对应的中断号如下表所示：

.. table:: 中断分配 has_header

    +-------+------------------+------------------+---------------------------------+
    | 中断源                   |   中断号         | 描述                            |
    +-------+------------------+------------------+---------------------------------+
    | DMA   | DMA0_ALL         | IRQ_NUM_BASE+15  | DMA0 ALL Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA1_ALL         | IRQ_NUM_BASE+16  | DMA1 ALL Interrupt              |
    +-------+------------------+------------------+---------------------------------+
    | IR    | IRTX             | IRQ_NUM_BASE+19  | IR TX Interrupt                 |
    +       +------------------+------------------+---------------------------------+
    |       | IRRX             | IRQ_NUM_BASE+20  | IR RX Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | USB   | USB              | IRQ_NUM_BASE+21  | USB  Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | EMAC  | EMAC             | IRQ_NUM_BASE+24  | EMAC  Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | ADC   | GPADC_DMA        | IRQ_NUM_BASE+25  | GPADC_DMA Interrupt             |
    +-------+------------------+------------------+---------------------------------+
    | SPI   | SPI0             | IRQ_NUM_BASE+27  | SPI Interrupt                   |
    +-------+------------------+------------------+---------------------------------+
    | UART  | UART0            | IRQ_NUM_BASE+28  | UART0 Interrupt                 |
    +       +------------------+------------------+---------------------------------+
    |       | UART1            | IRQ_NUM_BASE+29  | UART1 Interrupt                 |
    +       +------------------+------------------+---------------------------------+
    |       | UART2            | IRQ_NUM_BASE+30  | UART2 Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | GPIO  | GPIO_DMA         | IRQ_NUM_BASE+31  | GPIO DMA Interrupt              |
    +-------+------------------+------------------+---------------------------------+
    | I2C   | I2C0             | IRQ_NUM_BASE+32  | I2C0 Interrupt                  |
    +       +------------------+------------------+---------------------------------+
    |       | I2C1             | IRQ_NUM_BASE+39  | I2C1 Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | PWM   | PWM              | IRQ_NUM_BASE+33  | PWM Interrupt                   |
    +-------+------------------+------------------+---------------------------------+
    | TIMER0| TIMER0_CH0       | IRQ_NUM_BASE+36  | Timer0 Channel 0 Interrupt      |
    +       +------------------+------------------+---------------------------------+
    |       | TIMER0_CH1       | IRQ_NUM_BASE+37  | Timer0 Channel 1 Interrupt      |
    +       +------------------+------------------+---------------------------------+
    |       | TIMER0_WDT       | IRQ_NUM_BASE+38  | Timer0 Watch Dog Interrupt      |
    +-------+------------------+------------------+---------------------------------+
    | I2S   | I2S              | IRQ_NUM_BASE+40  | I2S Interrupt                   |
    +-------+------------------+------------------+---------------------------------+
    | GPIO  | GPIO_INT0        | IRQ_NUM_BASE+44  | GPIO Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | PDS   | PDS_WAKEUP       | IRQ_NUM_BASE+50  | PDS Wakeup Interrupt            |
    +-------+------------------+------------------+---------------------------------+
    | HBN   | HBN_OUT0         | IRQ_NUM_BASE+51  | Hibernate out 0 Interrupt       |
    +       +------------------+------------------+---------------------------------+
    |       | HBN_OUT1         | IRQ_NUM_BASE+52  | Hibernate out 1 Interrupt       |
    +-------+------------------+------------------+---------------------------------+
CPU_D0一共包含21个中断源，
中断源与对应的中断号如下表所示：

.. table:: 中断分配 has_header

    +-------+------------------+------------------+---------------------------------+
    | 中断源                   |   中断号         | 描述                            |
    +-------+------------------+------------------+---------------------------------+
    | UART  | UART3            | IRQ_NUM_BASE+4   | UART3 Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | I2C   | I2C2             | IRQ_NUM_BASE+5   | I2C2 Interrupt                  |
    +       +------------------+------------------+---------------------------------+
    |       | I2C3             | IRQ_NUM_BASE+6   | I2C3 Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | SPI   |  SPI1            | IRQ_NUM_BASE+7   | SPI1 Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | DMA2  | DMA2_INT0        | IRQ_NUM_BASE+24  | DMA INT0 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT1        | IRQ_NUM_BASE+25  | DMA INT1 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT2        | IRQ_NUM_BASE+26  | DMA INT2 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT3        | IRQ_NUM_BASE+27  | DMA INT3 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT4        | IRQ_NUM_BASE+28  | DMA INT4 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT5        | IRQ_NUM_BASE+29  | DMA INT5 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT6        | IRQ_NUM_BASE+30  | DMA INT6 Interrupt              |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2_INT7        | IRQ_NUM_BASE+31  | DMA INT7 Interrupt              |
    +-------+------------------+------------------+---------------------------------+
    | EMAC  | EMAC2            | IRQ_NUM_BASE+36  | EMAC2 Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | DMA2D | DMA2D_INT0       | IRQ_NUM_BASE+45  | DMA2D INT0 Interrupt            |
    +       +------------------+------------------+---------------------------------+
    |       | DMA2D_INT1       | IRQ_NUM_BASE+46  | DMA2D INT1 Interrupt            |
    +-------+------------------+------------------+---------------------------------+
    | PWM   | PWM              | IRQ_NUM_BASE+48  | PWM1 Interrupt                  |
    +-------+------------------+------------------+---------------------------------+
    | TIMER1| TIMER0_CH0       | IRQ_NUM_BASE+61  | Timer1 Channel 0 Interrupt      |
    +       +------------------+------------------+---------------------------------+
    |       | TIMER0_CH1       | IRQ_NUM_BASE+62  | Timer1 Channel 1 Interrupt      |
    +       +------------------+------------------+---------------------------------+
    |       | TIMER0_WDT       | IRQ_NUM_BASE+63  | Timer1 Watch Dog Interrupt      |
    +-------+------------------+------------------+---------------------------------+
    | AUDIO | AUDIO            | IRQ_NUM_BASE+64  | Audio Interrupt                 |
    +-------+------------------+------------------+---------------------------------+
    | PDS   | PDS              | IRQ_NUM_BASE+66  | PDS Interrupt                   |
    +-------+------------------+------------------+---------------------------------+

.. note::
    其中IRQ_NUM_BASE为16，中断号0-15为RISC-V 保留中断。
