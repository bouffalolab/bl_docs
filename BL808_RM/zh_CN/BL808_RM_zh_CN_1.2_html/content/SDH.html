<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>26. SDH &mdash; BL808 参考手册  文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="27. ISO11898" href="ISO11898.html" />
    <link rel="prev" title="25. USB" href="USB.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL808 参考手册
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. 系统和存储器概述</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. 复位和时钟</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="GPIO.html">4. GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">5. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">6. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">7. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA2D.html">8. DMA2D</a></li>
<li class="toctree-l1"><a class="reference internal" href="Lz4d.html">9. LZ4D</a></li>
<li class="toctree-l1"><a class="reference internal" href="DBI.html">10. DBI</a></li>
<li class="toctree-l1"><a class="reference internal" href="DPI.html">11. DPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="DSI.html">12. DSI</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cam.html">13. CAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">14. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">15. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">16. UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2C.html">17. I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">18. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">19. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2s.html">20. I2S</a></li>
<li class="toctree-l1"><a class="reference internal" href="PDM.html">21. PDM</a></li>
<li class="toctree-l1"><a class="reference internal" href="AUDIO.html">22. AUDIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="PSRAM.html">23. PSRAM Contorller</a></li>
<li class="toctree-l1"><a class="reference internal" href="Emac.html">24. Emac</a></li>
<li class="toctree-l1"><a class="reference internal" href="USB.html">25. USB</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">26. SDH</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#id1">26.1. 简介</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">26.2. 主要特征</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">26.3. 功能描述</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id4">26.3.1. SDH总体结构</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id5">26.3.2. 寄存器映射</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id6">26.3.3. 多卡槽支持</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dma">26.3.4. 支持DMA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sd">26.3.5. SD命令生成</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id7">26.3.6. 挂起和恢复机制</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id8">26.3.7. 缓冲区控制</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id9">26.3.7.1. 缓冲区指针的控制</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id10">26.3.7.2. 确定缓冲块长度</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id11">26.3.7.3. 分割大数据传输</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id12">26.3.8. 中断控制寄存器之间的关系</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id13">26.3.9. 硬件框图和定时部分</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cmd12">26.3.10. 自动CMD12</a></li>
<li class="toctree-l3"><a class="reference internal" href="#sdclk">26.3.11. 控制SDCLK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id14">26.3.12. 高级DMA</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#adma2">26.3.12.1. ADMA2的框图</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id15">26.3.12.2. 数据地址和数据长度要求</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id16">26.3.12.3. 描述符表</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id17">26.3.12.4. ADMA2状态</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#id18">26.3.13. 测试寄存器</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id19">26.3.14. 块计数</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id20">26.3.15. 采样时钟调谐</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id21">26.3.16. SD主机标准寄存器</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#id22">26.3.16.1. SD主机控制寄存器映射</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id23">26.3.16.2. 配置寄存器类型</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id24">26.3.16.3. 寄存器初始值</a></li>
<li class="toctree-l4"><a class="reference internal" href="#id25">26.3.16.4. 寄存器的保留位</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#id26">26.4. 寄存器描述</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#sdma-system-address-argument-2">26.4.1. SDMA_System_Address_Argument_2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#block-size">26.4.2. Block_Size</a></li>
<li class="toctree-l3"><a class="reference internal" href="#block-count">26.4.3. Block_Count</a></li>
<li class="toctree-l3"><a class="reference internal" href="#argument-1">26.4.4. Argument_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#transfer-mode">26.4.5. Transfer_Mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#command">26.4.6. Command</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response-1">26.4.7. Response_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response-2">26.4.8. Response_2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response-3">26.4.9. Response_3</a></li>
<li class="toctree-l3"><a class="reference internal" href="#response-4">26.4.10. Response_4</a></li>
<li class="toctree-l3"><a class="reference internal" href="#buffer-data-port">26.4.11. Buffer_Data_Port</a></li>
<li class="toctree-l3"><a class="reference internal" href="#present-state">26.4.12. Present_State</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-control-1">26.4.13. Host_Control_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#power-control">26.4.14. Power_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#block-gap-control">26.4.15. Block_Gap_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#wakeup-control">26.4.16. Wakeup_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clock-control">26.4.17. Clock_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timeout-control">26.4.18. Timeout_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#software-reset">26.4.19. Software_Reset</a></li>
<li class="toctree-l3"><a class="reference internal" href="#normal-interrupt-status">26.4.20. Normal_Interrupt_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-interrupt-status">26.4.21. Error_Interrupt_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#normal-interrupt-status-enable">26.4.22. Normal_Interrupt_Status_Enable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-interrupt-status-enable">26.4.23. Error_Interrupt_Status_Enable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#normal-interrupt-signal-enable">26.4.24. Normal_Interrupt_Signal_Enable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#error-interrupt-signal-enable">26.4.25. Error_Interrupt_Signal_Enable</a></li>
<li class="toctree-l3"><a class="reference internal" href="#auto-cmd-error-status">26.4.26. Auto_CMD_Error_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-control-2">26.4.27. Host_Control_2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capabilities-1">26.4.28. Capabilities_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#capabilities-2">26.4.29. Capabilities_2</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maximum-current-capabilities">26.4.30. Maximum_Current_Capabilities</a></li>
<li class="toctree-l3"><a class="reference internal" href="#force-event-register-for-auto-cmd-error-status">26.4.31. Force_Event_Register_for_Auto_CMD_Error_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#force-event-register-for-error-interrupt-status">26.4.32. Force_Event_Register_for_Error_Interrupt_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#adma-error-status">26.4.33. ADMA_Error_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#shared-bus-control">26.4.34. Shared_Bus_Control</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slot-interrupt-status">26.4.35. Slot_Interrupt_Status</a></li>
<li class="toctree-l3"><a class="reference internal" href="#host-controller-version">26.4.36. Host_Controller_Version</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ISO11898.html">27. ISO11898</a></li>
<li class="toctree-l1"><a class="reference internal" href="MJPEG.html">28. MJPEG</a></li>
<li class="toctree-l1"><a class="reference internal" href="JDEC.html">29. JDEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="VENC.html">30. VENC</a></li>
<li class="toctree-l1"><a class="reference internal" href="NPUtoolchain.html">31. NPU toolchain</a></li>
<li class="toctree-l1"><a class="reference internal" href="NPU.html">32. NPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="IPC.html">33. IPC</a></li>
<li class="toctree-l1"><a class="reference internal" href="LowPower.html">34. LowPower</a></li>
<li class="toctree-l1"><a class="reference internal" href="SEC_ENG.html">35. SEC ENG</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">36. 版本信息</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL808 参考手册</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">26. </span>SDH</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="sdh">
<h1><span class="section-number">26. </span>SDH<a class="headerlink" href="#sdh" title="永久链接至标题"></a></h1>
<section id="id1">
<h2><span class="section-number">26.1. </span>简介<a class="headerlink" href="#id1" title="永久链接至标题"></a></h2>
<p>SD主机控制器（SD Host Controller，即SDH）用于控制与SDIO或SD卡的通信，所有访问都通过标准的控制寄存器进行设置。</p>
</section>
<section id="id2">
<h2><span class="section-number">26.2. </span>主要特征<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<blockquote>
<div><ul class="simple">
<li><p>符合SD协会定义的SD主机控制器规范</p></li>
<li><p>适用于SDIO/SD存储卡</p></li>
<li><p>支持SD主机控制器标准寄存器设置</p></li>
<li><p>支持针对高速数据传输的DMA操作</p></li>
<li><p>支持中断</p></li>
<li><p>支持数据块传输</p></li>
</ul>
</div></blockquote>
</section>
<section id="id3">
<h2><span class="section-number">26.3. </span>功能描述<a class="headerlink" href="#id3" title="永久链接至标题"></a></h2>
<section id="id4">
<h3><span class="section-number">26.3.1. </span>SDH总体结构<a class="headerlink" href="#id4" title="永久链接至标题"></a></h3>
<figure class="align-center" id="id27">
<img alt="../_images/SDHArch.svg" src="../_images/SDHArch.svg" /><figcaption>
<p><span class="caption-number">图 26.1 </span><span class="caption-text">SDH硬件和驱动结构图</span><a class="headerlink" href="#id27" title="永久链接至图片"></a></p>
</figcaption>
</figure>
</section>
<section id="id5">
<h3><span class="section-number">26.3.2. </span>寄存器映射<a class="headerlink" href="#id5" title="永久链接至标题"></a></h3>
<figure class="align-center" id="id28">
<img alt="../_images/SDHMap.svg" src="../_images/SDHMap.svg" /><figcaption>
<p><span class="caption-number">图 26.2 </span><span class="caption-text">标准寄存器映射分类图</span><a class="headerlink" href="#id28" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>其中：</p>
<blockquote>
<div><ul class="simple">
<li><p>SD Command Generation：用于生成SD命令的参数；</p></li>
<li><p>Response：来自卡的响应值；</p></li>
<li><p>Buffer Data Port：内部缓冲区的数据访问端口；</p></li>
<li><p>Host Control 1 and Others：当前状态、SD总线控制、主机复位等；</p></li>
<li><p>Interrupt Controls：中断状态和启用；</p></li>
<li><p>Host Control 2：供应商特定的主机控制器支持信息；</p></li>
<li><p>Capabilities：主机控制寄存器的扩展；</p></li>
<li><p>Force Event：通过软件生成事件的测试寄存器；</p></li>
<li><p>ADMA：高级DMA寄存器；</p></li>
<li><p>Preset Value：时钟频率选择和驱动强度选择预设；</p></li>
<li><p>Shared Bus：共享总线系统的设备控制；</p></li>
<li><p>Common Area：公共信息区。</p></li>
</ul>
</div></blockquote>
</section>
<section id="id6">
<h3><span class="section-number">26.3.3. </span>多卡槽支持<a class="headerlink" href="#id6" title="永久链接至标题"></a></h3>
<p>为每个卡槽定义一个标准寄存器集，如果主机控制器有两个卡槽，则需要两个寄存器集。每个卡槽都是独立控制的。
这使得支持总线接口电压、总线定时和SD时钟频率的组合成为可能。</p>
<figure class="align-center" id="id29">
<img alt="../_images/SDHSlot.svg" src="../_images/SDHSlot.svg" /><figcaption>
<p><span class="caption-number">图 26.3 </span><span class="caption-text">多卡槽控制器的寄存器映射</span><a class="headerlink" href="#id29" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>上图显示了多卡槽主机控制器的寄存器映射。主机驱动程序应使用PCI配置寄存器或供应商特定方法确定卡槽数量和指向每个卡槽标准寄存器集的基指针。
从0F0h到0FFh的偏移量保留给公共寄存器区域，该区域定义卡槽控制和公共状态的信息。公共寄存器区域可从任何卡槽的寄存器集访问。
这允许软件独立控制每个卡槽，因为它可以从每个寄存器集中访问卡槽中断状态寄存器和主机控制器版本寄存器。</p>
</section>
<section id="dma">
<h3><span class="section-number">26.3.4. </span>支持DMA<a class="headerlink" href="#dma" title="永久链接至标题"></a></h3>
<p>主机控制器为主机驱动程序提供“编程I/O”方法，以便使用缓冲区数据端口寄存器传输数据。可选地，主机控制器实现者可以支持使用DMA的数据传输。
在使用DMA之前，主机驱动程序应确认主机控制器和系统总线均支持DMA（PCI总线可支持DMA）。DMA应支持单块和多块传输。
在DMA传输执行期间，主机控制器寄存器应保持可访问性，以发出非DAT行命令。无论采用何种系统总线数据传输方法，DMA传输的结果应相同。
主机驱动程序可以通过块间隙控制寄存器中的控制位停止和重新启动DMA操作。通过设置在块间隙请求时停止，DMA操作可以在块间隙处停止。
通过设置继续请求，可以重新启动DMA操作。如果发生错误，DMA操作应停止。要中止DMA传输，主机驱动程序应通过软件重置寄存器中DAT行的软件重置来重置主机控制器，并在执行多块读/写命令时发出CMD12。</p>
</section>
<section id="sd">
<h3><span class="section-number">26.3.5. </span>SD命令生成<a class="headerlink" href="#sd" title="永久链接至标题"></a></h3>
<figure class="align-center" id="id30">
<img alt="../_images/SDHCMDGeneration.svg" src="../_images/SDHCMDGeneration.svg" /><figcaption>
<p><span class="caption-number">图 26.4 </span><span class="caption-text">用于生成SD命令的寄存器</span><a class="headerlink" href="#id30" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>上表显示了三种类型的事务所需的寄存器设置（寄存器集中从000h到00Fh的偏移量）：DMA生成的传输（SDMA或ADMA）、CPU数据传输（使用“编程I/O”）和非DAT传输。
启动事务时，主机驱动程序应按从000h到00Fh的顺序对这些寄存器进行编程。起始寄存器偏移量可根据事务类型计算。最后写入的偏移量应始终为00Fh，因为写入命令寄存器的高位字节将触发SD命令的发出。
在一个数据事务期间，主机驱动程序不应读取SDMA系统地址、块大小和块计数寄存器，除非由于值正在更改且不稳定而停止或挂起传输。
为了防止在发出命令时使用数据传输破坏寄存器，块大小、块计数和传输模式寄存器应由主机控制器进行写保护，同时在当前状态寄存器中将命令禁止（DAT）设置为1（此信号无法保护SDMA系统地址）。
当命令禁止（CMD）设置为1时，主机驱动程序不得写入参数1和命令寄存器。</p>
</section>
<section id="id7">
<h3><span class="section-number">26.3.6. </span>挂起和恢复机制<a class="headerlink" href="#id7" title="永久链接至标题"></a></h3>
<p>通过检查功能寄存器中的挂起/恢复支持，可以确定对挂起/恢复的支持。当SD卡接受挂起请求时，主机驱动程序在发出其他SD命令之前将信息保存在前14字节寄存器（即偏移量000h-00dh）中。
恢复时，主机驱动程序将恢复这些寄存器，然后发出Resume命令以继续挂起的操作。
SDIO卡在响应恢复命令时设置DF（恢复数据标志）。（由于挂起和恢复命令是CMD52操作，因此响应数据实际上是CCCR中的功能选择寄存器。）
如果DF设置为0，则表示SDIO卡在挂起时无法继续数据传输。该位可用于控制数据传输和中断周期。如果Resume Data（恢复数据）标志设置为0，则如果正在恢复的事务处于4位模式，则不再传输更多数据，并启动中断周期。
如果DF设置为1，则数据传输将继续。需要注意的是，要使用挂起和恢复功能，SDIO卡必须支持挂起和恢复命令以及读取等待控制。</p>
<figure class="align-center" id="id31">
<img alt="../_images/SDHSuspend.svg" src="../_images/SDHSuspend.svg" /><figcaption>
<p><span class="caption-number">图 26.5 </span><span class="caption-text">挂起和恢复机制</span><a class="headerlink" href="#id31" title="永久链接至图片"></a></p>
</figcaption>
</figure>
</section>
<section id="id8">
<h3><span class="section-number">26.3.7. </span>缓冲区控制<a class="headerlink" href="#id8" title="永久链接至标题"></a></h3>
<p>主机控制器具有用于数据传输的数据缓冲区。主机驱动程序通过32位缓冲区数据端口寄存器访问内部缓冲区。下面是一些访问缓冲区的规则。</p>
<section id="id9">
<h4><span class="section-number">26.3.7.1. </span>缓冲区指针的控制<a class="headerlink" href="#id9" title="永久链接至标题"></a></h4>
<p>在内部，主机控制器维护一个指针来控制数据缓冲区。主机驱动程序无法直接访问指针，每次访问缓冲区数据端口寄存器时，指针都会根据写入缓冲区的数据量递增。
为了适应各种系统总线，无论系统总线宽度如何，都应实现该指针（可支持8位、16位、32位或64位系统总线宽度）。</p>
</section>
<section id="id10">
<h4><span class="section-number">26.3.7.2. </span>确定缓冲块长度<a class="headerlink" href="#id10" title="永久链接至标题"></a></h4>
<p>为了能够在突发时传输数据块，主机控制器和SD卡缓冲区大小之间的关系非常重要。主机驱动器应为主机控制器和卡使用相同的数据块长度。
如果控制器和卡缓冲区大小不同，主机驱动程序应使用较小的值。最大主机控制器缓冲区大小由功能寄存器中的最大块长度字段定义。</p>
</section>
<section id="id11">
<h4><span class="section-number">26.3.7.3. </span>分割大数据传输<a class="headerlink" href="#id11" title="永久链接至标题"></a></h4>
<p>SDIO命令CMD53定义根据以下公式限制数据传输的最大数据大小：
最大数据大小 = 块大小 x 块计数
例如，块大小由缓冲区大小指定，块计数的最大值为512（9位计数），如CMD53的命令参数中所指定。
在最坏的情况下，如果卡只有一个1字节的缓冲区，则最多可以使用CMD53传输512字节的数据（块大小=1，块计数=512）。
如果卡不支持多块模式，在这种情况下只能传输一个字节。如果应用程序或卡驱动程序希望传输更大尺寸的数据，主机驱动程序应将大数据划分为多个CMD53块。</p>
</section>
</section>
<section id="id12">
<h3><span class="section-number">26.3.8. </span>中断控制寄存器之间的关系<a class="headerlink" href="#id12" title="永久链接至标题"></a></h3>
<p>主机控制器实现许多中断源。中断源可以作为中断或系统唤醒信号启用。如果正常中断状态启用或错误中断状态启用寄存器中的中断源对应位为1，且中断变为激活状态，则其激活状态被锁定，并可供正常中断状态寄存器或错误中断状态寄存器中的主机驱动程序使用。
当中断状态启用被清除时，中断状态应被清除。如果在正常中断信号启用寄存器或错误中断信号启用寄存器中也设置了相应位，则在中断状态寄存器中设置位的中断源应断言系统中断信号。
一旦发出信号，大多数中断将通过向中断状态寄存器中的相关位写入1来清除。但是，卡中断应由卡驱动程序清除。如果生成卡中断，主机驱动程序可以清除卡中断状态启用，以在卡驱动程序处理卡中断时禁用卡中断。
清除所有中断源后，主机驱动程序再次将其设置为启用另一个卡中断。禁用卡中断状态启用可避免在处理中断服务期间产生多个中断。
唤醒控制寄存器允许对卡中断、卡插入或卡移除状态更改进行配置，以生成系统唤醒信号。这些中断的启用或屏蔽独立于正常中断信号启用寄存器。可从正常中断状态寄存器读取唤醒事件的类型。
中断信号和唤醒信号为逻辑或，应从插槽中断状态寄存器中读取。</p>
</section>
<section id="id13">
<h3><span class="section-number">26.3.9. </span>硬件框图和定时部分<a class="headerlink" href="#id13" title="永久链接至标题"></a></h3>
<figure class="align-center" id="id32">
<img alt="../_images/SDHDiagram.svg" src="../_images/SDHDiagram.svg" /><figcaption>
<p><span class="caption-number">图 26.6 </span><span class="caption-text">主机控制器框图</span><a class="headerlink" href="#id32" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>主机控制器有两个总线接口，系统总线接口和SD总线接口。主机控制器假定这些接口是异步的（即，在不同的时钟频率下工作）。主机驱动程序处于系统总线时间（因为它是由主机控制器CPU在其系统时钟上执行的软件）。
SD卡在SD总线时间上（也就是说，其操作由SDCLK同步）。主机控制器应同步信号，以便在这些接口之间进行通信。数据块应在缓冲模块上同步。所有状态寄存器应通过系统时钟同步，并在输出至系统接口期间保持同步。
触发SD总线事务的控制寄存器应由SDCLK同步。因此，在两个接口之间传播信号时将存在定时延迟。这意味着主机驱动程序无法实时控制SD总线，需要依靠主机控制器根据寄存器设置控制SD总线。
缓冲区接口启用内部读写缓冲区。传输完成中断状态指示DMA和非DMA传输的读/写传输完成。但是，读和写之间的计时是不同的。读取传输应在所有有效数据传输到主机系统并准备好供主机驱动程序访问后完成。
写入传输应在所有有效数据传输到SD卡且忙碌状态结束后完成。</p>
</section>
<section id="cmd12">
<h3><span class="section-number">26.3.10. </span>自动CMD12<a class="headerlink" href="#cmd12" title="永久链接至标题"></a></h3>
<p>SD内存的多个块传输需要CMD12停止事务。最后一次数据块传输完成时，主机控制器自动发出CMD12。主机控制器的此功能称为自动CMD12。发出多块传输命令时，主机驱动程序应在传输模式寄存器中设置Auto CMD12 Enable（自动CMD12启用）。
应通过主机控制器中的硬件完成与最后一个数据块的自动CMD12定时同步。在多次块传输期间，可以发出不使用DAT行的命令。这些命令使用CMD_wo_DAT符号表示。为了防止DAT线路命令和CMD_wo_DAT命令发生冲突，主机控制器应仲裁在SD总线上发出每个命令的时间。
因此，在主机驱动程序写入命令寄存器后，可能不会立即发出命令。该命令可以在自动CMD12之前或之后发出，具体取决于时间。为了能够区分DAT line和CMD_wo_DAT命令的响应，可以从响应寄存器的前四个字节（在标准寄存器集中的偏移量01Ch处）确定自动CMD12响应。
如果检测到与自动CMD12相关的错误，主机控制器应发出自动CMD错误中断。主机驱动程序可以通过读取自动CMD错误状态寄存器来检查自动CMD12错误状态（命令索引/结束位/CRC/超时错误）。如果未执行自动CMD12，则主机驱动程序需要从CMD_wo_DAT错误中恢复，并发出CMD12以停止多块传输。
如果未执行CMD_wo_DAT，则主机驱动程序可以在从自动CMD12错误恢复后再次发出该命令。
在UHS模式SDR104中，主机驱动程序应使用自动CMD23停止多块读/写操作，而不是使用自动CMD12。在其他总线速度模式下，如果卡支持CMD23，则主机驱动程序应使用自动CMD23，而不是使用CMD12。</p>
</section>
<section id="sdclk">
<h3><span class="section-number">26.3.11. </span>控制SDCLK<a class="headerlink" href="#sdclk" title="永久链接至标题"></a></h3>
<p>下表显示了SDCLK如何由电源控制寄存器中的SD总线电源和时钟控制寄存器中的SD时钟启用控制：</p>
<figure class="align-center" id="id33">
<img alt="../_images/SDHSDCLK.svg" src="../_images/SDHSDCLK.svg" /><figcaption>
<p><span class="caption-number">图 26.7 </span><span class="caption-text">通过SD总线电源和SD时钟启用控制SDCLK</span><a class="headerlink" href="#id33" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>SDCLK的时钟周期由时钟控制寄存器中的SDCLK频率选择和功能寄存器中的SD时钟的基本时钟频率指定。由于SD卡可以同时使用两个时钟边缘，因此SD时钟的占空比应为平均50%（分散在45-55%范围内），高电平周期应为时钟周期的一半。
SDCLK的振荡从驱动规定的高电压周期开始。当SDCLK被SD时钟启用停止时，主机控制器应在高驱动周期后停止SDCLK，以维持时钟占空比。当SDCLK被SD总线电源停止时，主机控制器应立即停止SDCLK（驱动器低），并且应清除SD时钟启用。</p>
</section>
<section id="id14">
<h3><span class="section-number">26.3.12. </span>高级DMA<a class="headerlink" href="#id14" title="永久链接至标题"></a></h3>
<p>SD主机控制器标准规范2.00版定义了ADMA（高级DMA）传输算法。SD主机控制器标准规范1.00版中定义的DMA算法称为SDMA（单操作DMA）。SDMA的缺点是，在每个页面边界产生的DMA中断会干扰CPU重新编程新的系统地址。这种SDMA算法通过在每个页面边界处中断而形成性能瓶颈。
ADMA采用分散-聚集DMA算法，因此具有更高的数据传输速度。在执行ADMA之前，主机驱动程序可以将系统内存和SD卡之间的数据传输列表编程到描述符表中。它使ADMA能够在不中断主机驱动程序的情况下运行。
此外，ADMA不仅可以支持32位系统内存寻址，还可以支持64位系统内存寻址。32位系统内存寻址使用64位地址寄存器的低32位字段。
ADMA有两种类型；ADMA1和ADMA2。ADMA1仅支持系统内存中4KB对齐数据的数据传输。ADMA2改进了该限制，使任何位置和大小的数据都可以在系统内存中传输。描述符表的格式在它们之间是不同的。本文档中使用术语“ADMA”时，指ADMA2。</p>
<section id="adma2">
<h4><span class="section-number">26.3.12.1. </span>ADMA2的框图<a class="headerlink" href="#adma2" title="永久链接至标题"></a></h4>
<figure class="align-center" id="id34">
<img alt="../_images/SDHADMADiagram.svg" src="../_images/SDHADMADiagram.svg" /><figcaption>
<p><span class="caption-number">图 26.8 </span><span class="caption-text">ADMA2的框图</span><a class="headerlink" href="#id34" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>描述符表由主机驱动程序在系统内存中创建。32位地址描述符表用于32位寻址的系统，64位地址描述符表用于64位寻址的系统。每个描述符行（一个可执行单元）由地址、长度和属性字段组成。该属性指定描述符行的操作。
ADMA2包括SDMA、状态机和寄存器电路。ADMA2不使用32位SDMA系统地址寄存器（偏移量0），但使用64位高级DMA系统地址寄存器（偏移量058h）作为描述符指针。写入命令寄存器会触发关闭ADMA2传输。ADMA2获取一个描述符行并执行它。重复此过程，直到找到描述符的末尾（属性中的end=1）。</p>
</section>
<section id="id15">
<h4><span class="section-number">26.3.12.2. </span>数据地址和数据长度要求<a class="headerlink" href="#id15" title="永久链接至标题"></a></h4>
<p>对描述符进行编程有3个要求:</p>
<blockquote>
<div><ul class="simple">
<li><p>地址的最小单位为4字节;</p></li>
<li><p>每个描述符行的最大数据长度小于64KB;</p></li>
<li><p>总长度 = 长度1 + 长度2 + 长度3 + … + 长度n = 块大小的倍数。</p></li>
</ul>
</div></blockquote>
<p>若描述符的总长度不是块大小的倍数，则可能不会终止ADMA2传输。在这种情况下，应通过数据超时中止传输。
块计数寄存器限制最大65535块传输。如果ADMA2操作小于或等于65535块传输，则可以使用块计数寄存器。在这种情况下，描述符表的总长度应等于乘以块大小和块计数。
如果ADMA2操作超过65535块传输，则应通过在传输模式寄存器中将0设置为块计数启用来禁用块计数寄存器。在这种情况下，数据传输的长度不是由块计数指定的，而是由描述符表指定的。
因此，检测SD总线上最后一个块的定时可能不同，并且它影响当前状态寄存器中的读传输活动、写传输活动和DAT线活动的控制。在读取操作的情况下，可能会读取多个块。如果读取操作是针对最后一块内存区域，则主机驱动程序应忽略超出范围的错误。</p>
</section>
<section id="id16">
<h4><span class="section-number">26.3.12.3. </span>描述符表<a class="headerlink" href="#id16" title="永久链接至标题"></a></h4>
<figure class="align-center" id="id35">
<img alt="../_images/SDHADMADescriptor.svg" src="../_images/SDHADMADescriptor.svg" /><figcaption>
<p><span class="caption-number">图 26.9 </span><span class="caption-text">32位地址描述符表</span><a class="headerlink" href="#id35" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>上图显示了32位地址描述符表的定义。一个描述符行消耗64位（8字节）内存空间。属性用于控制描述符。指定了3个动作符号：“Nop”操作跳过当前描述符行并获取下一行；“Tran”操作传输由地址和长度字段指定的数据；“Link”操作用于连接分开的两个描述符。链接的地址字段指向下一个描述符表。
Act2=0和Act1=1的组合被保留并定义为与Nop相同的操作。控制器的未来版本可能会使用此字段并重新定义新操作。32位地址存储在64位地址寄存器的低32位中。对于32位地址描述符表，地址字段应设置在32位边界上（低2位始终设置为0）。</p>
</section>
<section id="id17">
<h4><span class="section-number">26.3.12.4. </span>ADMA2状态<a class="headerlink" href="#id17" title="永久链接至标题"></a></h4>
<p>下图是ADMA2的状态图，定义了4个状态，获取描述符状态、更改地址状态、传输数据状态和停止ADMA状态：</p>
<figure class="align-center" id="id36">
<img alt="../_images/SDHADMAState.svg" src="../_images/SDHADMAState.svg" /><figcaption>
<p><span class="caption-number">图 26.10 </span><span class="caption-text">ADMA2的状态图</span><a class="headerlink" href="#id36" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>其中：</p>
<blockquote>
<div><ul class="simple">
<li><p>ST_FDS（获取描述符）：ADMA2获取描述符行并在内部寄存器中设置参数，接下来转到ST_CADR状态；</p></li>
<li><p>ST_CADR（更改地址）：链接操作将另一个描述符地址加载到ADMA系统地址寄存器。在其他操作中，ADMA系统地址寄存器递增到下一个描述符行。如果End=0，则转到ST_TFR状态。即使出现一些错误，ADMA2也不得在此状态下停止；</p></li>
<li><p>ST_TFR（传输数据）：在系统内存和SD卡之间执行一条描述符行的数据传输。如果数据传输继续（End=0），则转到ST_FDS状态。如果数据传输完成，则转到ST_STOP状态；</p></li>
<li><p>ST_STOP（停止DMA）：在以下情况下，ADMA2将保持此状态，一是上电复位或软件复位后，一是所有描述符数据传输都已完成。如果通过写入命令寄存器启动新的ADMA2操作，转至ST_FDS状态。</p></li>
</ul>
</div></blockquote>
<p>ADMA2不支持挂起/恢复功能，但可以使用停止和继续。当在ADMA2操作期间设置块间隙控制寄存器中的块间隙停止请求时，当ADMA2在块间隙停止时，将生成块间隙事件中断。主机控制器应使用读取等待或停止SD时钟停止ADMA2读取操作。
停止ADMA2时，无法发出任何SD命令。ADMA2传输期间发生错误可能会停止ADMA2操作并生成ADMA错误中断。ADMA错误状态寄存器中的ADMA错误状态字段保存ADMA2已停止的状态。
主机驱动程序可以通过以下方法识别错误描述符位置：如果ADMA在ST_FDS状态下停止，则ADMA系统地址寄存器将指向错误描述符行。如果ADMA在ST_TFR或ST_STOP状态下停止，ADMA系统地址寄存器将指向错误描述符行的下一个位置。因此，ADMA2不得在ST_CADR状态停止。</p>
</section>
</section>
<section id="id18">
<h3><span class="section-number">26.3.13. </span>测试寄存器<a class="headerlink" href="#id18" title="永久链接至标题"></a></h3>
<p>测试寄存器是为测试目的而定义的。当很难有意生成某些中断时，可以使用此功能手动生成这些中断以进行驱动程序调试。为此，定义了用于控制错误中断状态和自动CMD错误状态的强制事件寄存器。
有意控制插卡和拔卡也很困难，主机控制1寄存器中的卡检测信号选择和卡检测测试级别使能够人为控制当前状态寄存器所插入的卡，并在正常中断状态寄存器中生成卡插入和卡移除中断。</p>
</section>
<section id="id19">
<h3><span class="section-number">26.3.14. </span>块计数<a class="headerlink" href="#id19" title="永久链接至标题"></a></h3>
<p>块计数命令（CMD23）提供了停止多块操作的无计时方法。在CMD23的参数中设置块计数，以指定其后的CMD18或CMD25的传输长度。自动CMD23是在发送CMD18或CMD25之前自动发出CMD23的功能。此功能的目的是通过删除CMD23的中断服务，避免在内存访问期间性能下降。
偏移量008h参数1寄存器用于CMD18或CMD25。然后为CMD23的参数2寄存器分配偏移量000h。主机控制器不使用参数2寄存器计算数据传输长度。主机端数据传输操作的数据长度有两种情况；非ADMA和ADMA。
AMDA描述符的总长度是指ADMA描述符每行的16位数据长度之和。应为ADMA禁用块计数启用。需要注意的是，主机控制器的总数据传输长度应等于卡的传输长度。</p>
</section>
<section id="id20">
<h3><span class="section-number">26.3.15. </span>采样时钟调谐<a class="headerlink" href="#id20" title="永久链接至标题"></a></h3>
<p>在UHS-I模式下，SD总线可以在高时钟频率模式下运行，然后CMD和DAT[3:0]线路上的卡的数据窗口变小。数据窗口的位置将根据卡和主机系统的实施情况而变化。因此，当通过执行调谐程序并调整采样时钟来支持SDR104或SDR50（如果在能力寄存器中将SDR50的使用调谐设置为1）时，主机控制器应支持调谐电路。
主机控制2寄存器中的执行调谐和采样时钟选择用于控制调谐电路。</p>
</section>
<section id="id21">
<h3><span class="section-number">26.3.16. </span>SD主机标准寄存器<a class="headerlink" href="#id21" title="永久链接至标题"></a></h3>
<section id="id22">
<h4><span class="section-number">26.3.16.1. </span>SD主机控制寄存器映射<a class="headerlink" href="#id22" title="永久链接至标题"></a></h4>
<p>下表总结了标准SD主机控制器寄存器集。主机驱动程序需要确定由主机系统特定方法设置的寄存器的基址。寄存器集的大小为256字节。对于多个卡槽控制器，每个卡槽分配一个寄存器集，但偏移量0F0h-0FFh处的寄存器分配为公共区域，这些寄存器包含每个卡槽寄存器集的相同值。</p>
<figure class="align-center" id="id37">
<img alt="../_images/SDHRegisterMap.svg" src="../_images/SDHRegisterMap.svg" /><figcaption>
<p><span class="caption-number">图 26.11 </span><span class="caption-text">SD主机控制寄存器映射</span><a class="headerlink" href="#id37" title="永久链接至图片"></a></p>
</figcaption>
</figure>
</section>
<section id="id23">
<h4><span class="section-number">26.3.16.2. </span>配置寄存器类型<a class="headerlink" href="#id23" title="永久链接至标题"></a></h4>
<p>配置寄存器字段被分配下表描述的一个属性：</p>
<figure class="align-center" id="id38">
<img alt="../_images/SDHRegisterType.svg" src="../_images/SDHRegisterType.svg" /><figcaption>
<p><span class="caption-number">图 26.12 </span><span class="caption-text">寄存器（和寄存器位字段）类型</span><a class="headerlink" href="#id38" title="永久链接至图片"></a></p>
</figcaption>
</figure>
</section>
<section id="id24">
<h4><span class="section-number">26.3.16.3. </span>寄存器初始值<a class="headerlink" href="#id24" title="永久链接至标题"></a></h4>
<p>主机控制器在上电复位时将所有寄存器设置为其初始值，所有其他寄存器的默认值应为设置为零的所有位。能力寄存器和最大当前能力寄存器的值取决于主机控制器，主机控制器版本寄存器的值也取决于主机控制器。</p>
</section>
<section id="id25">
<h4><span class="section-number">26.3.16.4. </span>寄存器的保留位<a class="headerlink" href="#id25" title="永久链接至标题"></a></h4>
<p>“保留”表示该位可定义供将来使用，当前设置为0。这些位应写为0。</p>
</section>
</section>
</section>
<section id="id26">
<h2><span class="section-number">26.4. </span>寄存器描述<a class="headerlink" href="#id26" title="永久链接至标题"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 90%" />
<col style="width: 10%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>名称</p></td>
<td><p>描述</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#sdma-system-address-argument-2">SDMA_System_Address_Argument_2</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#block-size">Block_Size</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#block-count">Block_Count</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#argument-1">Argument_1</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#transfer-mode">Transfer_Mode</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#command">Command</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#response-1">Response_1</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#response-2">Response_2</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#response-3">Response_3</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#response-4">Response_4</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#buffer-data-port">Buffer_Data_Port</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#present-state">Present_State</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#host-control-1">Host_Control_1</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#power-control">Power_Control</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#block-gap-control">Block_Gap_Control</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#wakeup-control">Wakeup_Control</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#clock-control">Clock_Control</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#timeout-control">Timeout_Control</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#software-reset">Software_Reset</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#normal-interrupt-status">Normal_Interrupt_Status</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#error-interrupt-status">Error_Interrupt_Status</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#normal-interrupt-status-enable">Normal_Interrupt_Status_Enable</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#error-interrupt-status-enable">Error_Interrupt_Status_Enable</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#normal-interrupt-signal-enable">Normal_Interrupt_Signal_Enable</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#error-interrupt-signal-enable">Error_Interrupt_Signal_Enable</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#auto-cmd-error-status">Auto_CMD_Error_Status</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#host-control-2">Host_Control_2</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#capabilities-1">Capabilities_1</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#capabilities-2">Capabilities_2</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#maximum-current-capabilities">Maximum_Current_Capabilities</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#force-event-register-for-auto-cmd-error-status">Force_Event_Register_for_Auto_CMD_Error_Status</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#force-event-register-for-error-interrupt-status">Force_Event_Register_for_Error_Interrupt_Status</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#adma-error-status">ADMA_Error_Status</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#shared-bus-control">Shared_Bus_Control</a></p></td>
<td></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#slot-interrupt-status">Slot_Interrupt_Status</a></p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#host-controller-version">Host_Controller_Version</a></p></td>
<td></td>
</tr>
</tbody>
</table>
<section id="sdma-system-address-argument-2">
<h3><span class="section-number">26.4.1. </span>SDMA_System_Address_Argument_2<a class="headerlink" href="#sdma-system-address-argument-2" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060000</p>
<figure class="align-center">
<img alt="../_images/SDH_SDMA_System_Address_Argument_2.svg" src="../_images/SDH_SDMA_System_Address_Argument_2.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="12"><p>31:0</p></td>
<td rowspan="12"><p>SDMASystem</p></td>
<td rowspan="12"><p>r/w</p></td>
<td rowspan="12"><p>32'd0</p></td>
<td rowspan="12"><p>SDMA System Address / Argument 2</p>
<p>This register contains the physical system memory address used for DMA transfers</p>
<p>or the second argument for the Auto CMD23.</p>
<ol class="arabic simple">
<li><p>SDMA System Address</p></li>
</ol>
<p>This register contains the system memory address for a SDMA transfer. When</p>
<p>the Host Controller stops a SDMA transfer, this register shall point to the system</p>
<p>address of the next contiguous data position. It can be accessed only if no</p>
<p>transaction is executing (i.e., after a transaction has stopped). Read operations</p>
<p>during transfers may return an invalid value.</p>
<ol class="arabic simple" start="2">
<li><p>Argument 2</p></li>
</ol>
<p>This register is used with the Auto CMD23 to set a 32-bit block count value to</p>
<p>the argument of the CMD23 while executing Auto CMD23.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="block-size">
<h3><span class="section-number">26.4.2. </span>Block_Size<a class="headerlink" href="#block-size" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060004</p>
<figure class="align-center">
<img alt="../_images/SDH_Block_Size.svg" src="../_images/SDH_Block_Size.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:15</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="17"><p>14:12</p></td>
<td rowspan="17"><p>HostSDMA</p></td>
<td rowspan="17"><p>r/w</p></td>
<td rowspan="17"><p>3'd0</p></td>
<td rowspan="17"><p>Host SDMA Buffer Boundary</p>
<p>The large contiguous memory space may not be available in the virtual memory</p>
<p>system. To perform long SDMA transfer, SDMA System Address register shall be</p>
<p>updated at every system memory boundary during SDMA transfer.</p>
<p>These bits specify the size of contiguous buffer in the system memory. The</p>
<p>SDMA transfer shall wait at the every boundary specified by these fields and the</p>
<p>Host Controller generates the DMA Interrupt to request the Host Driver to</p>
<p>update the SDMA System Address register. At the end of transfer, the Host</p>
<p>Controller may issue or may not issue DMA Interrupt. In particular, DMA</p>
<p>Interrupt shall not be issued after Transfer Complete Interrupt is issued.</p>
<p>In case of this register is set to 0 (buffer size = 4K bytes), lower 12-bit of byte</p>
<p>address points data in the contiguous buffer and the upper 20-bit points the</p>
<p>location of the buffer in the system memory. The SDMA transfer stops when the</p>
<p>Host Controller detects carry out of the address from bit 11 to 12.</p>
<p>These bits shall be supported when the SDMA Support in the Capabilities</p>
<p>register is set to 1 and this function is active when the DMA Enable in the</p>
<p>Transfer Mode register is set to 1. ADMA does not use this register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="7"><p>11:0</p></td>
<td rowspan="7"><p>TransferBlock</p></td>
<td rowspan="7"><p>r/w</p></td>
<td rowspan="7"><p>12'b0</p></td>
<td rowspan="7"><p>Transfer Block Size</p>
<p>This register specifies the block size of data transfers for CMD17, CMD18,</p>
<p>CMD24, CMD25, and CMD53. Values ranging from 1 up to the maximum buffer</p>
<p>size can be set. In case of memory, it shall be set up to 512 bytes (Refer to</p>
<p>Implementation Note in Section 1.7.2). It can be accessed only if no transaction</p>
<p>is executing (i.e., after a transaction has stopped). Read operations during</p>
<p>transfers may return an invalid value, and write operations shall be ignored.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="block-count">
<h3><span class="section-number">26.4.3. </span>Block_Count<a class="headerlink" href="#block-count" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060006</p>
<figure class="align-center">
<img alt="../_images/SDH_Block_Count.svg" src="../_images/SDH_Block_Count.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="12"><p>15:0</p></td>
<td rowspan="12"><p>BlocksCount</p></td>
<td rowspan="12"><p>r/w</p></td>
<td rowspan="12"><p>16'd0</p></td>
<td rowspan="12"><p>Blocks Count For Current Transfer</p>
<p>This register is enabled when Block Count Enable in the Transfer Mode register is</p>
<p>set to 1 and is valid only for multiple block transfers. The Host Driver shall set this</p>
<p>register to a value between 1 and the maximum block count. The Host Controller</p>
<p>decrements the block count after each block transfer and stops when the count</p>
<p>reaches zero. Setting the block count to 0 results in no data blocks is transferred.</p>
<p>This register should be accessed only when no transaction is executing (i.e., after</p>
<p>transactions are stopped). During data transfer, read operations on this register may</p>
<p>return an invalid value and write operations are ignored.</p>
<p>When a suspend command is completed, the number of blocks yet to be transferred</p>
<p>can be determined by reading this register. Before issuing a resume command, the</p>
<p>Host Driver shall restore the previously saved block count.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="argument-1">
<h3><span class="section-number">26.4.4. </span>Argument_1<a class="headerlink" href="#argument-1" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060008</p>
<figure class="align-center">
<img alt="../_images/SDH_Argument_1.svg" src="../_images/SDH_Argument_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="3"><p>31:0</p></td>
<td rowspan="3"><p>CommandArgument</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>32'h0</p></td>
<td rowspan="3"><p>Command Argument 1</p>
<p>The SD command argument is specified as bit39-8 of Command-Format in the</p>
<p>Physical Layer Specification.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="transfer-mode">
<h3><span class="section-number">26.4.5. </span>Transfer_Mode<a class="headerlink" href="#transfer-mode" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006000c</p>
<figure class="align-center">
<img alt="../_images/SDH_Transfer_Mode.svg" src="../_images/SDH_Transfer_Mode.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:6</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>5</p></td>
<td rowspan="4"><p>Multi/</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Multi / Single Block Select</p>
<p>This bit is set when issuing multiple-block transfer commands using DAT line. For</p>
<p>any other commands, this bit shall be set to 0. If this bit is 0, it is not necessary to</p>
<p>set the Block Count register. (Refer to Table 2-8)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>4</p></td>
<td rowspan="4"><p>DataTransfer</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Data Transfer Direction Select</p>
<p>This bit defines the direction of DAT line data transfers. The bit is set to 1 by the</p>
<p>Host Driver to transfer data from the SD card to the SD Host Controller and it is</p>
<p>set to 0 for all other commands.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>3:2</p></td>
<td rowspan="4"><p>AutoCMD</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>2'd0</p></td>
<td rowspan="4"><p>Auto CMD Enable</p>
<p>This field determines use of auto command functions.</p>
<ol class="arabic simple">
<li><p>Auto CMD12 Enable</p></li>
<li><p>Auto CMD23 Enable</p></li>
</ol>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="5"><p>1</p></td>
<td rowspan="5"><p>BlockCount</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>This bit is used to enable the Block Count register, which is only relevant for</p>
<p>multiple block transfers. When this bit is 0, the Block Count register is disabled,</p>
<p>which is useful in executing an infinite transfer.</p>
<p>If ADMA2 data transfer is more than 65535 blocks, this bit shall be set to 0. In this</p>
<p>case, data transfer length is designated by Descriptor Table.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>0</p></td>
<td rowspan="6"><p>DMAEnable</p></td>
<td rowspan="6"><p>r/w</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>This bit enables DMA functionality as described in section 1.4. DMA can be</p>
<p>enabled only if it is supported as indicated in the Capabilities register. One of the</p>
<p>DMA modes can be selected by DMA Select in the Host Control 1 register. If</p>
<p>DMA is not supported, this bit is meaningless and shall always read 0. If this bit is</p>
<p>set to 1, a DMA operation shall begin when the Host Driver writes to the upper</p>
<p>byte of Command register (00Fh).</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="command">
<h3><span class="section-number">26.4.6. </span>Command<a class="headerlink" href="#command" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006000e</p>
<figure class="align-center">
<img alt="../_images/SDH_Command.svg" src="../_images/SDH_Command.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:14</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>13:8</p></td>
<td rowspan="3"><p>CommandIndex</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>6'd0</p></td>
<td rowspan="3"><p>These bits shall be set to the command number (CMD0-63, ACMD0-63) that is</p>
<p>specified in bits 45-40 of the Command-Format in the Physical Layer</p>
<p>Specification and SDIO Card Specification.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>7:6</p></td>
<td rowspan="5"><p>CommandType</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>2'd0</p></td>
<td rowspan="5"><p>There are three types of special commands: Suspend, Resume and Abort.</p>
<p>These bits shall be set to 00b for all other commands.</p>
<ol class="arabic simple">
<li><p>Suspend Command</p></li>
<li><p>Resume Command</p></li>
<li><p>Abort Command</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="6"><p>5</p></td>
<td rowspan="6"><p>DataPresent</p></td>
<td rowspan="6"><p>r/w</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>This bit is set to 1 to indicate that data is present and shall be transferred using</p>
<p>the DAT line. It is set to 0 for the following:</p>
<ol class="arabic simple">
<li><p>Commands using only CMD line (ex. CMD52).</p></li>
<li><p>Commands with no data transfer but using busy signal on DAT[0] line</p></li>
</ol>
<p>(R1b or R5b ex. CMD38)</p>
<ol class="arabic simple" start="3">
<li><p>Resume command</p></li>
</ol>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>4</p></td>
<td rowspan="4"><p>CommandIndex</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>If this bit is set to 1, the Host Controller shall check the Index field in the</p>
<p>response to see if it has the same value as the command index. If it is not, it is</p>
<p>reported as a Command Index Error. If this bit is set to 0, the Index field is not</p>
<p>checked.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="5"><p>3</p></td>
<td rowspan="5"><p>CommandCRC</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>If this bit is set to 1, the Host Controller shall check the CRC field in the</p>
<p>response. If an error is detected, it is reported as a Command CRC Error. If this</p>
<p>bit is set to 0, the CRC field is not checked. The position of CRC field is</p>
<p>determined according to the length of the response. (Refer to definition in</p>
<p>D01-00 and Table 2-10 below.)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>1:0</p></td>
<td rowspan="4"><p>ResponseType</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>2'd0</p></td>
<td rowspan="4"><p>00: No Response</p>
<p>01: Response Length 136</p>
<p>10: Response Length 48</p>
<p>11: Response Length 48 check Busy after response</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="response-1">
<h3><span class="section-number">26.4.7. </span>Response_1<a class="headerlink" href="#response-1" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060010</p>
<figure class="align-center">
<img alt="../_images/SDH_Response_1.svg" src="../_images/SDH_Response_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>CommandResponse</p></td>
<td><p>r/w</p></td>
<td><p>32'h0</p></td>
<td><p>Command Response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="response-2">
<h3><span class="section-number">26.4.8. </span>Response_2<a class="headerlink" href="#response-2" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060014</p>
<figure class="align-center">
<img alt="../_images/SDH_Response_2.svg" src="../_images/SDH_Response_2.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>CommandResponse</p></td>
<td><p>r/w</p></td>
<td><p>32'h0</p></td>
<td><p>Command Response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="response-3">
<h3><span class="section-number">26.4.9. </span>Response_3<a class="headerlink" href="#response-3" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060018</p>
<figure class="align-center">
<img alt="../_images/SDH_Response_3.svg" src="../_images/SDH_Response_3.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>CommandResponse</p></td>
<td><p>r/w</p></td>
<td><p>32'h0</p></td>
<td><p>Command Response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="response-4">
<h3><span class="section-number">26.4.10. </span>Response_4<a class="headerlink" href="#response-4" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006001c</p>
<figure class="align-center">
<img alt="../_images/SDH_Response_4.svg" src="../_images/SDH_Response_4.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>CommandResponse</p></td>
<td><p>r/w</p></td>
<td><p>32'h0</p></td>
<td><p>Command Response</p></td>
</tr>
</tbody>
</table>
</section>
<section id="buffer-data-port">
<h3><span class="section-number">26.4.11. </span>Buffer_Data_Port<a class="headerlink" href="#buffer-data-port" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060020</p>
<figure class="align-center">
<img alt="../_images/SDH_Buffer_Data_Port.svg" src="../_images/SDH_Buffer_Data_Port.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="2"><p>31:0</p></td>
<td rowspan="2"><p>BufferData</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>32'h0</p></td>
<td rowspan="2"><p>Buffer Data</p>
<p>The Host Controller buffer can be accessed through this 32-bit Data Port register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="present-state">
<h3><span class="section-number">26.4.12. </span>Present_State<a class="headerlink" href="#present-state" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060024</p>
<figure class="align-center">
<img alt="../_images/SDH_Present_State.svg" src="../_images/SDH_Present_State.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:25</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>24</p></td>
<td rowspan="3"><p>CMDLine</p></td>
<td rowspan="3"><p>r</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>CMD Line Signal Level</p>
<p>This status is used to check the CMD line level to recover from errors, and</p>
<p>for debugging.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>23:20</p></td>
<td rowspan="4"><p>DAT[3:0]Line</p></td>
<td rowspan="4"><p>r</p></td>
<td rowspan="4"><p>4'd0</p></td>
<td rowspan="4"><p>DAT[3:0] Line Signal Level</p>
<p>This status is used to check the DAT line level to recover from errors, and for</p>
<p>debugging. This is especially useful in detecting the busy signal level from</p>
<p>DAT[0].</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>19</p></td>
<td rowspan="2"><p>WriteProtect</p></td>
<td rowspan="2"><p>r</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>The Write Protect Switch is supported for memory and combo cards.</p>
<p>This bit reflects the SDWP# pin.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>18</p></td>
<td rowspan="4"><p>CardDetect</p></td>
<td rowspan="4"><p>r</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>This bit reflects the inverse value of the SDCD# pin. Debouncing is not</p>
<p>performed on this bit. This bit may be valid when Card State Stable is set to</p>
<p>1, but it is not guaranteed because of propagation delay. Use of this bit is</p>
<p>limited to testing since it must be debounced by software.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>17</p></td>
<td rowspan="5"><p>CardState</p></td>
<td rowspan="5"><p>r</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>This bit is used for testing. If it is 0, the Card Detect Pin Level is not stable.</p>
<p>If this bit is set to 1, it means the Card Detect Pin Level is stable. No Card</p>
<p>state can be detected by this bit is set to 1 and Card Inserted is set to 0. The</p>
<p>Software Reset For All in the Software Reset register shall not affect this</p>
<p>bit.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="13"><p>16</p></td>
<td rowspan="13"><p>CardInserted</p></td>
<td rowspan="13"><p>r</p></td>
<td rowspan="13"><p>1'b0</p></td>
<td rowspan="13"><p>This bit indicates whether a card has been inserted. The Host Controller</p>
<p>shall debounce this signal so that the Host Driver will not need to wait for it to</p>
<p>stabilize. Changing from 0 to 1 generates a Card Insertion interrupt in the</p>
<p>Normal Interrupt Status register and changing from 1 to 0 generates a Card</p>
<p>Removal interrupt in the Normal Interrupt Status register. The Software</p>
<p>Reset For All in the Software Reset register shall not affect this bit.</p>
<p>If a card is removed while its power is on and its clock is oscillating, the Host</p>
<p>Controller shall clear SD Bus Power in the Power Control register and SD Clock Enable in the Clock Control register</p>
<p>When this bit is changed from 1 to 0, the Host Controller shall immediately</p>
<p>stop driving CMD and DAT[3:0] (tri-state).</p>
<p>In addition, the Host Driver should clear the Host Controller by the Software</p>
<p>Reset For All in Software Reset register. The card detect is active</p>
<p>regardless of the SD Bus Power.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>15:12</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="7"><p>11</p></td>
<td rowspan="7"><p>BufferRead</p></td>
<td rowspan="7"><p>roc</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Buffer Read Enable</p>
<p>This status is used for non-DMA read transfers.</p>
<p>The Host Controller may implement multiple buffers to transfer data efficiently. This</p>
<p>read only flag indicates that valid data exists in the host side buffer. If this bit is 1,</p>
<p>readable data exists in the buffer. A change of this bit from 1 to 0 occurs when all</p>
<p>the block data is read from the buffer. A change of this bit from 0 to 1 occurs when</p>
<p>block data is ready in the buffer and generates the Buffer Read Ready interrupt.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="9"><p>10</p></td>
<td rowspan="9"><p>BufferWrite</p></td>
<td rowspan="9"><p>roc</p></td>
<td rowspan="9"><p>1'b0</p></td>
<td rowspan="9"><p>Buffer Write Enable</p>
<p>This status is used for non-DMA write transfers.</p>
<p>The Host Controller can implement multiple buffers to transfer data efficiently. This</p>
<p>read only flag indicates if space is available for write data. If this bit is 1, data can be</p>
<p>written to the buffer. A change of this bit from 1 to 0 occurs when all the block data is</p>
<p>written to the buffer. A change of this bit from 0 to 1 occurs when top of block data</p>
<p>can be written to the buffer and generates the Buffer Write Ready interrupt. The</p>
<p>Host Controller should neither set Buffer Write Enable nor generate Buffer Write</p>
<p>Ready Interrupt after the last block data is written to the Buffer Data Port Register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="14"><p>9</p></td>
<td rowspan="14"><p>ReadTransfer</p></td>
<td rowspan="14"><p>roc</p></td>
<td rowspan="14"><p>1'b0</p></td>
<td rowspan="14"><p>Read Transfer Active</p>
<p>This status is used for detecting completion of a read transfer.</p>
<p>This bit is set to 1 for either of the following conditions:</p>
<ol class="arabic simple">
<li><p>After the end bit of the read command.</p></li>
<li><p>When read operation is restarted by writing a 1 to Continue Request in the</p></li>
</ol>
<p>Block Gap Control register.</p>
<p>This bit is cleared to 0 for either of the following conditions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="n">When</span> <span class="n">the</span> <span class="n">last</span> <span class="n">data</span> <span class="n">block</span> <span class="k">as</span> <span class="n">specified</span> <span class="n">by</span> <span class="n">block</span> <span class="n">length</span> <span class="ow">is</span> <span class="n">transferred</span> <span class="n">to</span> <span class="n">the</span>
</pre></div>
</div>
<p>System.</p>
<ol class="arabic simple" start="2">
<li><p>In case of ADMA2, end of read operation is designated by Descriptor Table.</p></li>
<li><p>When all valid data blocks in the Host Controller have been transferred to the</p></li>
</ol>
<p>System and no current block transfers are being sent as a result of the Stop</p>
<p>At Block Gap Request being set to 1.</p>
<p>A Transfer Complete interrupt is generated when this bit changes to 0.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="18"><p>8</p></td>
<td rowspan="18"><p>WriteTransfer</p></td>
<td rowspan="18"><p>roc</p></td>
<td rowspan="18"><p>1'b0</p></td>
<td rowspan="18"><p>Write Transfer Active</p>
<p>This status indicates a write transfer is active. If this bit is 0, it means no valid write</p>
<p>data exists in the Host Controller. Refer to Section 3.12.4 for more details on the</p>
<p>sequence of events.</p>
<p>This bit is set in either of the following cases:</p>
<ol class="arabic simple">
<li><p>After the end bit of the write command.</p></li>
<li><p>When write operation is restarted by writing a 1 to Continue Request in the</p></li>
</ol>
<p>Block Gap Control register.</p>
<p>This bit is cleared in either of the following cases:</p>
<ol class="arabic simple">
<li><p>After getting the CRC status of the last data block as specified by the transfer</p></li>
</ol>
<p>count (Single and Multiple) In case of ADMA2, transfer count is designated by</p>
<p>Descriptor Table.</p>
<ol class="arabic simple" start="2">
<li><p>After getting the CRC status of any block where data transmission is about to</p></li>
</ol>
<p>be stopped by a Stop At Block Gap Request.</p>
<p>During a write transaction, a Block Gap Event interrupt is generated when this bit</p>
<p>is changed to 0, as the result of the Stop At Block Gap Request being set. This</p>
<p>status is useful for the Host Driver in determining non DAT line commands can be</p>
<p>issued during write busy.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>7:4</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="11"><p>3</p></td>
<td rowspan="11"><p>Re-TuningRequest</p></td>
<td rowspan="11"><p>roc</p></td>
<td rowspan="11"><p>1'b0</p></td>
<td rowspan="11"><p>Re-Tuning Request</p>
<p>Host Controller may request Host Driver to execute re-tuning sequence by setting</p>
<p>this bit when the data window is shifted by temperature drift and a tuned sampling</p>
<p>point does not have a good margin to receive correct data.</p>
<p>This bit is cleared when a command is issued with setting Execute Tuning in the</p>
<p>Host Control 2 register.</p>
<p>Changing of this bit from 0 to 1 generates Re-Tuning Event. Refer to Normal</p>
<p>Interrupt Status registers for more detail.</p>
<p>This bit isn't set to 1 if Sampling Clock Select in the Host Control 2 register is set</p>
<p>to 0 (using fixed sampling clock). Refer to Re-Tuning Modes in the Capabilities</p>
<p>register for more detail.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>2</p></td>
<td rowspan="3"><p>DATLine</p></td>
<td rowspan="3"><p>roc</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>DAT Line Active</p>
<p>This bit indicates whether one of the DAT line on SD Bus is in use.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="7"><p>1</p></td>
<td rowspan="7"><p>CommandInhibit</p></td>
<td rowspan="7"><p>roc</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>This status bit is generated if either the DAT Line Active or the Read Transfer</p>
<p>Active is set to 1. If this bit is 0, it indicates the Host Controller can issue the next</p>
<p>SD Command. Commands with busy signal belong to Command Inhibit (DAT)</p>
<p>(ex. R1b, R5b type). Changing from 1 to 0 generates a Transfer Complete</p>
<p>interrupt in the Normal Interrupt Status register.</p>
<p>Note: The SD Host Driver can save registers in the range of 000-00Dh for a</p>
<p>suspend transaction after this bit has changed from 1 to 0.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="16"><p>0</p></td>
<td rowspan="16"><p>CommandInhibit</p></td>
<td rowspan="16"><p>roc</p></td>
<td rowspan="16"><p>1'b0</p></td>
<td rowspan="16"><p>If this bit is 0, it indicates the CMD line is not in use and the Host Controller can</p>
<p>issue a SD Command using the CMD line.</p>
<p>This bit is set immediately after the Command register (00Fh) is written. This bit is</p>
<p>cleared when the command response is received. Auto CMD12 and Auto CMD23</p>
<p>consist of two responses. In this case, this bit is not cleared by the response of</p>
<p>CMD12 or CMD23 but cleared by the response of a read/write command.</p>
<p>Status issuing Auto CMD12 is not read from this bit. So if a command is issued</p>
<p>during Auto CMD12 operation, Host Controller shall manage to issue two</p>
<p>commands: CMD12 and a command set by Command register.</p>
<p>Even if the Command Inhibit (DAT) is set to 1, commands using only the CMD line</p>
<p>can be issued if this bit is 0. Changing from 1 to 0 generates a Command</p>
<p>Complete Interrupt in the Normal Interrupt Status register.</p>
<p>If the Host Controller cannot issue the command because of a command conflict</p>
<p>error or because of Command</p>
<p>Not Issued By Auto CMD12 Error, this bit shall remain 1</p>
<p>and the Command Complete is not set.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="host-control-1">
<h3><span class="section-number">26.4.13. </span>Host_Control_1<a class="headerlink" href="#host-control-1" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060028</p>
<figure class="align-center">
<img alt="../_images/SDH_Host_Control_1.svg" src="../_images/SDH_Host_Control_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="10"><p>7</p></td>
<td rowspan="10"><p>CardDetect</p></td>
<td rowspan="10"><p>r/w</p></td>
<td rowspan="10"><p>1'b0</p></td>
<td rowspan="10"><p>This bit selects source for the card detection.</p>
<p>1: The Card Detect Test Level is selected (for test purpose)</p>
<p>0: SDCD# is selected (for normal use)</p>
<p>When the source for the card detection is switched, the interrupt should be disabled</p>
<p>during the switching period by clearing the Interrupt Status/Signal Enable register</p>
<p>in order to mask unexpected interrupt being caused by the glitch.</p>
<p>The Interrupt Status/Signal Enable should be disabled during over the period of</p>
<p>debouncing.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>6</p></td>
<td rowspan="4"><p>CardDetect</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>This bit is enabled while the Card Detect Signal Selection is set to 1 and it indicates</p>
<p>card inserted or not.</p>
<p>1 Card Inserted</p>
<p>0 No Card</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="9"><p>5</p></td>
<td rowspan="9"><p>ExtendedData</p></td>
<td rowspan="9"><p>r/w</p></td>
<td rowspan="9"><p>1'b0</p></td>
<td rowspan="9"><p>This bit controls 8-bit bus width mode for embedded device. Support of this function</p>
<p>is indicated in 8-bit Support for Embedded Device in the Capabilities register. If a</p>
<p>device supports 8-bit bus mode, this bit may be set to 1. If this bit is 0, bus width is</p>
<p>controlled by Data Transfer Width in the Host Control 1 register.</p>
<p>This bit is not effective when multiple devices are installed on a bus slot (Slot Type</p>
<p>is set to 10b in the Capabilities register). In this case, each device bus width is</p>
<p>controlled by Bus Width Preset field in the Shared Bus Control register.</p>
<p>1: 8-bit Bus Width</p>
<p>0 :Bus Width is Selected by Data Transfer Width</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="7"><p>4:3</p></td>
<td rowspan="7"><p>DMASelect</p></td>
<td rowspan="7"><p>r/w</p></td>
<td rowspan="7"><p>2'd0</p></td>
<td rowspan="7"><p>One of supported DMA modes can be selected. The host driver shall check support</p>
<p>of DMA modes by referring the Capabilities register. Use of selected DMA is</p>
<p>determined by DMA Enable of the Transfer Mode register.</p>
<p>00 SDMA is selected</p>
<p>01 Reserved (New assignment is not allowed)</p>
<p>10 32-bit Address ADMA2 is selected</p>
<p>11 Reserved (will be modified by Version 4.00)</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="12"><p>2</p></td>
<td rowspan="12"><p>HighSpeed</p></td>
<td rowspan="12"><p>r/w</p></td>
<td rowspan="12"><p>1'b0</p></td>
<td rowspan="12"><p>This bit is optional. Before setting this bit, the Host Driver shall check the High</p>
<p>Speed Support in the Capabilities register. If this bit is set to 0 (default), the Host</p>
<p>Controller outputs CMD line and DAT lines at the falling edge of the SD Clock (up to</p>
<p>25MHz). If this bit is set to 1, the Host Controller outputs CMD line and DAT lines at</p>
<p>the rising edge of the SD Clock (up to 50MHz).</p>
<p>If Preset Value Enable in the Host Control 2 register is set to 1, Host Driver needs</p>
<p>to reset SD Clock Enable before changing this field to avoid generating clock</p>
<p>glitches. After setting this field, the Host Driver sets SD Clock Enable again.</p>
<p>1 :High Speed mode</p>
<p>0 :Normal Speed mode</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>1</p></td>
<td rowspan="4"><p>DataTransfer</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>This bit selects the data width of the Host Controller. The Host Driver shall set it to</p>
<p>match the data width of the SD card.</p>
<p>1: 4-bit mode</p>
<p>0 :1-bit mode</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="6"><p>0</p></td>
<td rowspan="6"><p>LEDControl</p></td>
<td rowspan="6"><p>r/w</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>This bit is used to caution the user not to remove the card while the SD card is</p>
<p>being accessed. If the software is going to issue multiple SD commands, this bit</p>
<p>can be set during all these transactions. It is not necessary to change for each</p>
<p>transaction.</p>
<p>1 :LED on</p>
<p>0 :LED off</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="power-control">
<h3><span class="section-number">26.4.14. </span>Power_Control<a class="headerlink" href="#power-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060029</p>
<figure class="align-center">
<img alt="../_images/SDH_Power_Control.svg" src="../_images/SDH_Power_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:4</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="9"><p>3:1</p></td>
<td rowspan="9"><p>SDBus</p></td>
<td rowspan="9"><p>r/w</p></td>
<td rowspan="9"><p>2'd0</p></td>
<td rowspan="9"><p>SD Bus Voltage Select</p>
<p>By setting these bits, the Host Driver selects the voltage level for the SD card.</p>
<p>Before setting this register, the Host Driver shall check the Voltage Support bits in</p>
<p>the Capabilities register. If an unsupported voltage is selected, the Host System</p>
<p>shall not supply SD Bus voltage.</p>
<p>111b 3.3V (Typ.)</p>
<p>110b 3.0V (Typ.)</p>
<p>101b 1.8V (Typ.)</p>
<p>100b – 000b Reserved</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>0</p></td>
<td rowspan="5"><p>SDBus</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>SD Bus Power</p>
<p>Before setting this bit, the SD Host Driver shall set SD Bus Voltage Select. If the</p>
<p>Host Controller detects the No Card state, this bit shall be cleared.</p>
<p>If this bit is cleared, the Host Controller shall immediately stop driving CMD and</p>
<p>DAT[3:0] (tri-state) and drive SDCLK to low level .</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="block-gap-control">
<h3><span class="section-number">26.4.15. </span>Block_Gap_Control<a class="headerlink" href="#block-gap-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006002a</p>
<figure class="align-center">
<img alt="../_images/SDH_Block_Gap_Control.svg" src="../_images/SDH_Block_Gap_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:4</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="7"><p>3</p></td>
<td rowspan="7"><p>InterruptAt</p></td>
<td rowspan="7"><p>r/w</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Interrupt At Block Gap</p>
<p>This bit is valid only in 4-bit mode of the SDIO card and selects a sample point in</p>
<p>the interrupt cycle. Setting to 1 enables interrupt detection at the block gap for a</p>
<p>multiple block transfer. Setting to 0 disables interrupt detection during a multiple</p>
<p>block transfer. If the SD card cannot signal an interrupt during a multiple block</p>
<p>transfer, this bit should be set to 0. When the Host Driver detects an SD card</p>
<p>insertion, it shall set this bit according to the CCCR of the SDIO card.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="8"><p>2</p></td>
<td rowspan="8"><p>ReadWait</p></td>
<td rowspan="8"><p>r/w</p></td>
<td rowspan="8"><p>1'b0</p></td>
<td rowspan="8"><p>Read Wait Control</p>
<p>The read wait function is optional for SDIO cards. If the card supports read wait,</p>
<p>set this bit to enable use of the read wait protocol to stop read data using the</p>
<p>DAT[2] line. Otherwise, the Host Controller has to stop the SD Clock to hold read</p>
<p>data, which restricts commands generation. When the Host Driver detects an SD</p>
<p>card insertion, it shall set this bit according to the CCCR of the SDIO card. If the</p>
<p>card does not support read wait, this bit shall never be set to 1 otherwise DAT line</p>
<p>conflict may occur. If this bit is set to 0, Suspend/Resume cannot be supported.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="10"><p>1</p></td>
<td rowspan="10"><p>ContinueRequest</p></td>
<td rowspan="10"><p>r/w</p></td>
<td rowspan="10"><p>1'b0</p></td>
<td rowspan="10"><p>This bit is used to restart a transaction, which was stopped using the Stop At</p>
<p>Block Gap Request. To cancel stop at the block gap, set Stop At Block Gap</p>
<p>Request to 0 and set this bit 1 to restart the transfer.</p>
<p>The Host Controller automatically clears this bit in either of the following cases:</p>
<ol class="arabic simple">
<li><p>In the case of a read transaction, the DAT Line Active changes from 0 to 1</p></li>
</ol>
<p>as a read transaction restarts.</p>
<ol class="arabic simple" start="2">
<li><p>In the case of a write transaction, the Write Transfer Active changes from 0</p></li>
</ol>
<p>to 1 as the write transaction restarts.</p>
<p>Therefore, it is not necessary for Host Driver to set this bit to 0. If Stop At Block</p>
<p>Gap Request is set to 1, any write to this bit is ignored.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="14"><p>0</p></td>
<td rowspan="14"><p>StopAt</p></td>
<td rowspan="14"><p>r/w</p></td>
<td rowspan="14"><p>1'b0</p></td>
<td rowspan="14"><p>This bit is used to stop executing read and write transaction at the next block gap</p>
<p>for non-DMA, SDMA and ADMA transfers. The Host Driver shall leave this bit set</p>
<p>to 1 until the Transfer Complete is set to 1. Clearing both Stop At Block Gap</p>
<p>Request and Continue Request shall not cause the transaction to restart. When</p>
<p>Host Controller version is 1.00, the Host Driver can set this bit if the card supports</p>
<p>Read Wait Control. When Host Controller version is 2.00 or later, the Host Driver</p>
<p>can set this bit regardless of the card supports Read Wait Control. The Host</p>
<p>Controller shall stop read transfer by using Read Wait or stopping SD clock. In</p>
<p>case of write transfers in which the Host Driver writes data to the Buffer Data Port</p>
<p>register, the Host Driver shall set this bit after all block data is written. If this bit is</p>
<p>set to 1, the Host Driver shall not write data to Buffer Data Port register.</p>
<p>This bit affects Read Transfer Active, Write Transfer Active, DAT Line Active</p>
<p>and Command Inhibit (DAT) in the Present State register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="wakeup-control">
<h3><span class="section-number">26.4.16. </span>Wakeup_Control<a class="headerlink" href="#wakeup-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006002b</p>
<figure class="align-center">
<img alt="../_images/SDH_Wakeup_Control.svg" src="../_images/SDH_Wakeup_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>2</p></td>
<td rowspan="3"><p>WakeupEvent</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Wakeup Event Enable On SD Card Removal</p>
<p>This bit enables wakeup event via Card Removal assertion in the Normal Interrupt</p>
<p>Status register. FN_WUS (Wake Up Support) in CIS does not affect this bit.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>1</p></td>
<td rowspan="3"><p>WakeupEvent</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Wakeup Event Enable On SD Card Insertion</p>
<p>This bit enables wakeup event via Card Insertion assertion in the Normal Interrupt</p>
<p>Status register. FN_WUS (Wake Up Support) in CIS does not affect this bit.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>0</p></td>
<td rowspan="4"><p>WakeupEvent</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Wakeup Event Enable On Card Interrupt</p>
<p>This bit enables wakeup event via Card Interrupt assertion in the Normal Interrupt</p>
<p>Status register. This bit can be set to 1 if FN_WUS (Wake Up Support) in CIS is set</p>
<p>to 1.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="clock-control">
<h3><span class="section-number">26.4.17. </span>Clock_Control<a class="headerlink" href="#clock-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006002c</p>
<figure class="align-center">
<img alt="../_images/SDH_Clock_Control.svg" src="../_images/SDH_Clock_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>15:8</p></td>
<td rowspan="3"><p>SDCLKFrequency</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>8'd0</p></td>
<td rowspan="3"><p>SDCLK Frequency Select</p>
<p>This register is used to select the frequency of SDCLK pin. The definition of this</p>
<p>field is dependent on the Host Controller Version.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>7:6</p></td>
<td rowspan="6"><p>UpperBits</p></td>
<td rowspan="6"><p>roc/rw</p></td>
<td rowspan="6"><p>2'd0</p></td>
<td rowspan="6"><p>Upper Bits of SDCLK Frequency Select</p>
<p>Host Controller Version 1.00 and 2.00 do not support these bits and they are</p>
<p>treated as 00b fixed value (ROC).</p>
<p>Host Controller Version 3.00 shall support these bits to expand SDCLK</p>
<p>Frequency Select to 10-bit. Bit 07-06 is assigned to bit 09-08 of clock divider in</p>
<p>SDCLK Frequency Select.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="13"><p>5</p></td>
<td rowspan="13"><p>ClockGenerator</p></td>
<td rowspan="13"><p>roc/rw</p></td>
<td rowspan="13"><p>1'b0</p></td>
<td rowspan="13"><p>Clock Generator Select</p>
<p>Host Controller Version 3.00 supports this bit. This bit is used to select the clock</p>
<p>generator mode in SDCLK Frequency Select.</p>
<p>If the Programmable Clock Mode is supported (non-zero value is set to Clock</p>
<p>Multiplier in the Capabilities register), this bit attribute is RW, and if not</p>
<p>supported, this bit attribute is RO and zero is read.</p>
<p>This bit depends on the setting of Preset Value Enable in the Host Control 2</p>
<p>register.</p>
<p>If the Preset Value Enable = 0, this bit is set by Host Driver.</p>
<p>If the Preset Value Enable = 1, this bit is automatically set to a value specified</p>
<p>in one of Preset Value registers.</p>
<p>1 Programmable Clock Mode</p>
<p>0 Divided Clock Mode</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>4:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="6"><p>2</p></td>
<td rowspan="6"><p>SDClock</p></td>
<td rowspan="6"><p>rw</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>SD Clock Enable</p>
<p>The Host Controller shall stop SDCLK when writing this bit to 0. SDCLK</p>
<p>Frequency Select can be changed when this bit is 0. Then, the Host Controller</p>
<p>shall maintain the same clock frequency until SDCLK is stopped (Stop at</p>
<p>SDCLK=0). If the Card Inserted in the Present State register is cleared, this bit</p>
<p>shall be cleared.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>1</p></td>
<td rowspan="6"><p>InternalClock</p></td>
<td rowspan="6"><p>roc</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>Internal Clock Stable</p>
<p>This bit is set to 1 when SD Clock is stable after writing to Internal Clock</p>
<p>Enable in this register to 1. The SD Host Driver shall wait to set SD Clock</p>
<p>Enable until this bit is set to 1.</p>
<p>Note: This is useful when using PLL for a clock oscillator that requires setup</p>
<p>time.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="7"><p>0</p></td>
<td rowspan="7"><p>InternalClock</p></td>
<td rowspan="7"><p>r/w</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Internal Clock Enable</p>
<p>This bit is set to 0 when the Host Driver is not using the Host Controller or the</p>
<p>Host Controller awaits a wakeup interrupt. The Host Controller should stop its</p>
<p>internal clock to go very low power state. Still, registers shall be able to be read</p>
<p>and written. Clock starts to oscillate when this bit is set to 1. When clock</p>
<p>oscillation is stable, the Host Controller shall set Internal Clock Stable in this</p>
<p>register to 1. This bit shall not affect card detection.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="timeout-control">
<h3><span class="section-number">26.4.18. </span>Timeout_Control<a class="headerlink" href="#timeout-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006002e</p>
<figure class="align-center">
<img alt="../_images/SDH_Timeout_Control.svg" src="../_images/SDH_Timeout_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:4</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="8"><p>3:0</p></td>
<td rowspan="8"><p>DataTimeout</p></td>
<td rowspan="8"><p>r/w</p></td>
<td rowspan="8"><p>4'd0</p></td>
<td rowspan="8"><p>Data Timeout Counter Value</p>
<p>This value determines the interval by which DAT line timeouts are detected. For</p>
<p>more information about timeout generation, refer to the Data Timeout Error in the</p>
<p>Error Interrupt Status register. Timeout clock frequency will be generated by</p>
<p>dividing the base clock TMCLK value by this value. When setting this register,</p>
<p>prevent inadvertent timeout events by clearing the Data Timeout Error Status</p>
<p>Enable (in the Error Interrupt Status Enable register)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="software-reset">
<h3><span class="section-number">26.4.19. </span>Software_Reset<a class="headerlink" href="#software-reset" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006002f</p>
<figure class="align-center">
<img alt="../_images/SDH_Software_Reset.svg" src="../_images/SDH_Software_Reset.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>2</p></td>
<td rowspan="2"><p>SoftwareReset</p></td>
<td rowspan="2"><p>rwac</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Software Reset For DAT Line</p>
<p>Only part of data circuit is reset. DMA circuit is also reset.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="7"><p>1</p></td>
<td rowspan="7"><p>SoftwareReset</p></td>
<td rowspan="7"><p>rwac</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Software Reset For CMD Line</p>
<p>Only part of command circuit is reset.</p>
<p>The following registers and bits are cleared by this bit:</p>
<p>Present State register</p>
<p>Command Inhibit (CMD)</p>
<p>Normal Interrupt Status register</p>
<p>Command Complete</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="8"><p>0</p></td>
<td rowspan="8"><p>SoftwareReset</p></td>
<td rowspan="8"><p>rwac</p></td>
<td rowspan="8"><p>1'b0</p></td>
<td rowspan="8"><p>Software Reset For All</p>
<p>This reset affects the entire Host Controller except for the card detection circuit.</p>
<p>Register bits of type ROC, RW, RW1C, RWAC are cleared to 0. During its</p>
<p>initialization, the Host Driver shall set this bit to 1 to reset the Host Controller. The</p>
<p>Host Controller shall reset this bit to 0 when Capabilities registers are valid and</p>
<p>the Host Driver can read them. Additional use of Software Reset For All may not</p>
<p>affect the value of the Capabilities registers. If this bit is set to 1, the host driver</p>
<p>should issue reset command and reinitialize the SD card.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="normal-interrupt-status">
<h3><span class="section-number">26.4.20. </span>Normal_Interrupt_Status<a class="headerlink" href="#normal-interrupt-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060030</p>
<figure class="align-center">
<img alt="../_images/SDH_Normal_Interrupt_Status.svg" src="../_images/SDH_Normal_Interrupt_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>15</p></td>
<td rowspan="4"><p>ErrorInterrupt</p></td>
<td rowspan="4"><p>roc</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Error Interrupt</p>
<p>If any of the bits in the Error Interrupt Status register are set, then this bit is</p>
<p>set. Therefore the Host Driver can efficiently test for an error by checking</p>
<p>this bit first. This bit is read only.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>14:13</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="6"><p>12</p></td>
<td rowspan="6"><p>Re-TuningEvent</p></td>
<td rowspan="6"><p>roc</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>Re-Tuning Event</p>
<p>This status is set if Re-Tuning Request in the Present State register</p>
<p>changes from 0 to 1.</p>
<p>Host Controller requests Host Driver to perform re-tuning for next data</p>
<p>transfer. Current data transfer (not large block count) can be completed</p>
<p>without re-tuning.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>11</p></td>
<td rowspan="4"><p>INT_C</p></td>
<td rowspan="4"><p>roc</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>INT_C</p>
<p>This status is set if INT_C is enabled and INT_C# pin is in low level. Writing</p>
<p>this bit to 1 does not clear this bit. It is cleared by resetting the INT_C</p>
<p>interrupt factor. Refer to the Shared Bus Control register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>10</p></td>
<td rowspan="4"><p>INT_B</p></td>
<td rowspan="4"><p>roc</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>INT_B</p>
<p>This status is set if INT_B is enabled and INT_B# pin is in low level. Writing</p>
<p>this bit to 1 does not clear this bit. It is cleared by resetting the INT_B</p>
<p>interrupt factor. Refer to the Shared Bus Control register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>9</p></td>
<td rowspan="4"><p>INT_A</p></td>
<td rowspan="4"><p>roc</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>INT_A</p>
<p>This status is set if INT_A is enabled and INT_A# pin is in low level. Writing</p>
<p>this bit to 1 does not clear this bit. It is cleared by resetting the INT_A</p>
<p>interrupt factor. Refer to the Shared Bus Control register.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="20"><p>8</p></td>
<td rowspan="20"><p>CardInterrupt</p></td>
<td rowspan="20"><p>roc</p></td>
<td rowspan="20"><p>1'b0</p></td>
<td rowspan="20"><p>Card Interrupt</p>
<p>Writing this bit to 1 does not clear this bit. It is cleared by resetting the SD</p>
<p>card interrupt factor. In 1-bit mode, the Host Controller shall detect the Card</p>
<p>Interrupt without SD Clock to support wakeup. In 4-bit mode, the card</p>
<p>interrupt signal is sampled during the interrupt cycle, so there are some</p>
<p>sample delays between the interrupt signal from the SD card and the</p>
<p>interrupt to the Host System.</p>
<p>When this status has been set and the Host Driver needs to start this</p>
<p>interrupt service, Card Interrupt Status Enable in the Normal Interrupt</p>
<p>Status Enable register may be set to 0 in order to clear the card interrupt</p>
<p>statuses latched in the Host Controller and to stop driving the interrupt</p>
<p>signal to the Host System. After completion of the card interrupt service (It</p>
<p>should reset interrupt factors in the SD card and the interrupt signal may</p>
<p>not be asserted), set Card Interrupt Status Enable to 1 and start sampling</p>
<p>the interrupt signal again.</p>
<p>Interrupt detected by DAT[1] is supported when there is a card per slot. In</p>
<p>case of shared bus, interrupt pins are used to detect interrupts. If 000b is</p>
<p>set to Interrupt Pin Select in the Shared Bus Control register, this status is</p>
<p>effective. Non-zero value is set to Interrupt Pin Select, INT_A, INT_B or</p>
<p>INT_C is then used to device interrupts.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="7"><p>7</p></td>
<td rowspan="7"><p>CardRemoval</p></td>
<td rowspan="7"><p>rw1c</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Card Removal</p>
<p>This status is set if the Card Inserted in the Present State register changes</p>
<p>from 1 to 0.</p>
<p>When the Host Driver writes this bit to 1 to clear this status, the status of the</p>
<p>Card Inserted in the Present State register should be confirmed. Because</p>
<p>the card detect state may possibly be changed when the Host Driver clear</p>
<p>this bit and interrupt event may not be generated.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="7"><p>6</p></td>
<td rowspan="7"><p>CardInsertion</p></td>
<td rowspan="7"><p>rw1c</p></td>
<td rowspan="7"><p>1'b0</p></td>
<td rowspan="7"><p>Card Insertion</p>
<p>This status is set if the Card Inserted in the Present State register changes</p>
<p>from 0 to 1.</p>
<p>When the Host Driver writes this bit to 1 to clear this status, the status of the</p>
<p>Card Inserted in the Present State register should be confirmed. Because</p>
<p>the card detect state may possibly be changed when the Host Driver clear</p>
<p>this bit and interrupt event may not be generated.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>5</p></td>
<td rowspan="5"><p>BufferRead</p></td>
<td rowspan="5"><p>rw1c</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>Buffer Read Ready</p>
<p>This status is set if the Buffer Read Enable changes from 0 to 1. Refer to</p>
<p>the Buffer Read Enable in the Present State register.</p>
<p>While performing tuning procedure (Execute Tuning is set to 1), Buffer</p>
<p>Read Ready is set to 1 for every CMD19 execution.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>4</p></td>
<td rowspan="3"><p>BufferWrite</p></td>
<td rowspan="3"><p>rw1c</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Buffer Write Ready</p>
<p>This status is set if the Buffer Write Enable changes from 0 to 1. Refer to</p>
<p>the Buffer Write Enable in the Present State register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="8"><p>3</p></td>
<td rowspan="8"><p>DMAInterrupt</p></td>
<td rowspan="8"><p>rw1c</p></td>
<td rowspan="8"><p>1'b0</p></td>
<td rowspan="8"><p>DMA Interrupt</p>
<p>This status is set if the Host Controller detects the Host SDMA Buffer</p>
<p>boundary during transfer. Refer to the Host SDMA Buffer Boundary in the</p>
<p>Block Size register.</p>
<p>Other DMA interrupt factors may be added in the future.</p>
<p>In case of ADMA, by setting Int field in the descriptor table, Host Controller</p>
<p>generates this interrupt. Suppose that it is used for debugging.</p>
<p>This interrupt shall not be generated after the Transfer Complete.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="13"><p>2</p></td>
<td rowspan="13"><p>BlockGap</p></td>
<td rowspan="13"><p>rw1c</p></td>
<td rowspan="13"><p>1'b0</p></td>
<td rowspan="13"><p>Block Gap Event</p>
<p>If the Stop At Block Gap Request in the Block Gap Control register is set,</p>
<p>this bit is set when both a read / write transaction is stopped at a block gap.</p>
<p>If Stop At Block Gap Request is not set to 1, this bit is not set to 1.</p>
<ol class="arabic simple">
<li><p>In the case of a Read Transaction</p></li>
</ol>
<p>This bit is set at the falling edge of the DAT Line Active Status (When</p>
<p>the transaction is stopped at SD Bus timing. The Read Wait shall be</p>
<p>supported in order to use this function. Refer to Section 3.12.3 about</p>
<p>the detail timing.</p>
<ol class="arabic simple" start="2">
<li><p>Case of Write Transaction</p></li>
</ol>
<p>This bit is set at the falling edge of Write Transfer Active Status (After</p>
<p>getting CRC status at SD Bus timing). Refer to Section 3.12.4 for more</p>
<p>details on the sequence of events.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="22"><p>1</p></td>
<td rowspan="22"><p>TransferComplete</p></td>
<td rowspan="22"><p>rw1c</p></td>
<td rowspan="22"><p>1'b0</p></td>
<td rowspan="22"><p>Transfer Complete</p>
<p>This bit is set when a read / write transfer and a command with busy is</p>
<p>completed.</p>
<ol class="arabic simple">
<li><p>In the case of a Read Transaction</p></li>
</ol>
<p>This bit is set at the falling edge of Read Transfer Active Status.</p>
<p>This interrupt is generated in two cases. The first is when a data</p>
<p>transfer is completed as specified by data length (After the last data</p>
<p>has been read to the Host System). The second is when data has</p>
<p>stopped at the block gap and completed the data transfer by setting</p>
<p>the Stop At Block Gap Request in the Block Gap Control register</p>
<p>(After valid data has been read to the Host System).</p>
<ol class="arabic simple" start="2">
<li><p>In the case of a Write Transaction</p></li>
</ol>
<p>This bit is set at the falling edge of the DAT Line Active Status. This</p>
<p>interrupt is generated in two cases. The first is when the last data is</p>
<p>written to the SD card as specified by data length and the busy signal</p>
<p>released. The second is when data transfers are stopped at the block</p>
<p>gap by setting Stop At Block Gap Request in the Block Gap Control</p>
<p>register and data transfers completed. (After valid data is written to</p>
<p>the SD card and the busy signal released).</p>
<ol class="arabic simple" start="3">
<li><p>In the case of a command with busy</p></li>
</ol>
<p>This bit is set when busy is de-asserted. Refer to DAT Line Active</p>
<p>and Command Inhibit (DAT) in the Present State register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="10"><p>0</p></td>
<td rowspan="10"><p>CommandComplete</p></td>
<td rowspan="10"><p>rw1c</p></td>
<td rowspan="10"><p>1'b0</p></td>
<td rowspan="10"><p>Command Complete</p>
<p>This bit is set when get the end bit of the command response. Auto CMD12</p>
<p>and Auto CMD23 consist of two responses. Command Complete is not</p>
<p>generated by the response of CMD12 or CMD23 but generated by the</p>
<p>response of a read/write command.</p>
<p>Refer to Command Inhibit (CMD) in the Present State register for how to</p>
<p>control this bit.</p>
<p>The table below shows that Command Timeout Error has higher priority</p>
<p>than Command Complete. If both bits are set to 1, it can be considered</p>
<p>that the response was not received correctly.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="error-interrupt-status">
<h3><span class="section-number">26.4.21. </span>Error_Interrupt_Status<a class="headerlink" href="#error-interrupt-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060032</p>
<figure class="align-center">
<img alt="../_images/SDH_Error_Interrupt_Status.svg" src="../_images/SDH_Error_Interrupt_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>15:12</p></td>
<td rowspan="2"><p>VendorSpecific</p></td>
<td rowspan="2"><p>rw1c</p></td>
<td rowspan="2"><p>4'd0</p></td>
<td rowspan="2"><p>Vendor Specific Error Status</p>
<p>Additional status bits can be defined in this register by the vendor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="11"><p>10</p></td>
<td rowspan="11"><p>TuningError</p></td>
<td rowspan="11"><p>rw1c</p></td>
<td rowspan="11"><p>1'b0</p></td>
<td rowspan="11"><p>Tuning Error</p>
<p>This bit is set when an unrecoverable error is detected in a tuning circuit</p>
<p>except during tuning procedure (Occurrence of an error during tuning</p>
<p>procedure is indicated by Sampling Select). By detecting Tuning Error, Host</p>
<p>Driver needs to abort a command executing and perform tuning. To reset</p>
<p>tuning circuit, Sampling Clock shall be set to 0 before executing tuning</p>
<p>procedure . The Tuning Error is higher priority than the</p>
<p>other error interrupts generated during data transfer. By detecting Tuning</p>
<p>Error, the Host Driver should discard data transferred by a current read/write</p>
<p>command and retry data transfer after the Host Controller retrieved from</p>
<p>tuning circuit error.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="8"><p>9</p></td>
<td rowspan="8"><p>ADMAError</p></td>
<td rowspan="8"><p>rw1c</p></td>
<td rowspan="8"><p>1'b0</p></td>
<td rowspan="8"><p>ADMA Error</p>
<p>This bit is set when the Host Controller detects errors during ADMA based data</p>
<p>transfer. The state of the ADMA at an error occurrence is saved in the ADMA</p>
<p>Error Status Register,</p>
<p>In addition, the Host Controller generates this Interrupt when it detects invalid</p>
<p>descriptor data (Valid=0) at the ST_FDS state. ADMA Error State in the</p>
<p>ADMA Error Status indicates that an error occurs in ST_FDS state. The Host</p>
<p>Driver may find that Valid bit is not set at the error descriptor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="6"><p>8</p></td>
<td rowspan="6"><p>AutoCMD</p></td>
<td rowspan="6"><p>rw1c</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>Auto CMD Error</p>
<p>Auto CMD12 and Auto CMD23 use this error status. This bit is set when</p>
<p>detecting that one of the bits D00-D04 in Auto CMD Error Status register has</p>
<p>changed from 0 to 1. In case of Auto CMD12, this bit is set to 1, not only when</p>
<p>the errors in Auto CMD12 occur but also when Auto CMD12 is not executed</p>
<p>due to the previous command error.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="10"><p>7</p></td>
<td rowspan="10"><p>CurrentLimit</p></td>
<td rowspan="10"><p>rw1c</p></td>
<td rowspan="10"><p>1'b0</p></td>
<td rowspan="10"><p>Current Limit Error</p>
<p>By setting the SD Bus Power bit in the Power Control register, the Host</p>
<p>Controller is requested to supply power for the SD Bus. If the Host Controller</p>
<p>supports the Current Limit function, it can be protected from an illegal card by</p>
<p>stopping power supply to the card in which case this bit indicates a failure</p>
<p>status. Reading 1 means the Host Controller is not supplying power to SD card</p>
<p>due to some failure. Reading 0 means that the Host Controller is supplying</p>
<p>power and no error has occurred. The Host Controller may require some</p>
<p>sampling time to detect the current limit. If the Host Controller does not support</p>
<p>this function, this bit shall always be set to 0.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>6</p></td>
<td rowspan="3"><p>DataEnd</p></td>
<td rowspan="3"><p>rw1c</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Data End Bit Error</p>
<p>Occurs either when detecting 0 at the end bit position of read data which uses</p>
<p>the DAT line or at the end bit position of the CRC Status.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>5</p></td>
<td rowspan="4"><p>DataCRC</p></td>
<td rowspan="4"><p>rw1c</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Data CRC Error</p>
<p>Occurs when detecting CRC error when transferring read data which uses the</p>
<p>DAT line or when detecting the Write CRC status having a value of other than</p>
<p>&quot;010&quot;.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="6"><p>4</p></td>
<td rowspan="6"><p>DataTimeout</p></td>
<td rowspan="6"><p>rw1c</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>Data Timeout Error</p>
<p>This bit is set when detecting one of following timeout conditions.</p>
<ol class="arabic simple">
<li><p>Busy timeout for R1b,R5b type</p></li>
<li><p>Busy timeout after Write CRC status</p></li>
<li><p>Write CRC Status timeout</p></li>
<li><p>Read Data timeout.</p></li>
</ol>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>3</p></td>
<td rowspan="2"><p>CommandIndex</p></td>
<td rowspan="2"><p>rw1c</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Command Index Error</p>
<p>This bit is set if a Command Index error occurs in the command response.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>2</p></td>
<td rowspan="2"><p>CommandEnd</p></td>
<td rowspan="2"><p>rw1c</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Command End Bit Error</p>
<p>This bit is set when detecting that the end bit of a command response is 0.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="11"><p>1</p></td>
<td rowspan="11"><p>CommandEnd</p></td>
<td rowspan="11"><p>rw1c</p></td>
<td rowspan="11"><p>1'b0</p></td>
<td rowspan="11"><p>Command CRC Error</p>
<p>Command CRC Error is generated in two cases.</p>
<p>If a response is returned and the Command Timeout Error is set to 0</p>
<p>(indicating no timeout), this bit is set to 1 when detecting a CRC error in the</p>
<p>command response.</p>
<p>The Host Controller detects a CMD line conflict by monitoring the CMD line</p>
<p>when a command is issued. If the Host Controller drives the CMD line to 1</p>
<p>level, but detects 0 level on the CMD line at the next SD clock edge, then the</p>
<p>Host Controller shall abort the command (Stop driving CMD line) and set this</p>
<p>bit to 1. The Command Timeout Error shall also be set to 1 to distinguish CMD</p>
<p>line conflict .</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>0</p></td>
<td rowspan="3"><p>CommandTimeout</p></td>
<td rowspan="3"><p>rw1c</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Command Timeout Error</p>
<p>This bit is set only if no response is returned within 64 SD clock cycles from the</p>
<p>end bit of the command.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="normal-interrupt-status-enable">
<h3><span class="section-number">26.4.22. </span>Normal_Interrupt_Status_Enable<a class="headerlink" href="#normal-interrupt-status-enable" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060034</p>
<figure class="align-center">
<img alt="../_images/SDH_Normal_Interrupt_Status_Enable.svg" src="../_images/SDH_Normal_Interrupt_Status_Enable.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>15</p></td>
<td rowspan="3"><p>Fixedto</p></td>
<td rowspan="3"><p>r</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Fixed to 0</p>
<p>The Host Driver shall control error interrupts using the Error Interrupt Status</p>
<p>Enable register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>14:13</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>12</p></td>
<td rowspan="3"><p>Re-TuningEvent</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Re-Tuning Event Status Enable</p>
<p>1 Enabled</p>
<p>0 Masked</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>11</p></td>
<td rowspan="5"><p>INT_CStatus</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>INT_C Status Enable</p>
<p>If this bit is set to 0, the Host Controller shall clear the interrupt request to the</p>
<p>System. The Host Driver may clear this bit before servicing the INT_C and</p>
<p>may set this bit again after all interrupt requests to INT_C pin are cleared to</p>
<p>prevent inadvertent interrupts.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="5"><p>10</p></td>
<td rowspan="5"><p>INT_BStatus</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>INT_B Status Enable</p>
<p>If this bit is set to 0, the Host Controller shall clear the interrupt request to the</p>
<p>System. The Host Driver may clear this bit before servicing the INT_B and</p>
<p>may set this bit again after all interrupt requests to INT_B pin are cleared to</p>
<p>prevent inadvertent interrupts.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>9</p></td>
<td rowspan="5"><p>INT_AStatus</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>INT_A Status Enable</p>
<p>If this bit is set to 0, the Host Controller shall clear the interrupt request to the</p>
<p>System. The Host Driver may clear this bit before servicing the INT_A and</p>
<p>may set this bit again after all interrupt requests to INT_A pin are cleared to</p>
<p>prevent inadvertent interrupts.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="6"><p>8</p></td>
<td rowspan="6"><p>CardInterrupt</p></td>
<td rowspan="6"><p>r/w</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>If this bit is set to 0, the Host Controller shall clear interrupt request to the</p>
<p>System. The Card Interrupt detection is stopped when this bit is cleared</p>
<p>and restarted when this bit is set to 1. The Host Driver may clear the Card</p>
<p>Interrupt Status Enable before servicing the Card Interrupt and may set</p>
<p>this bit again after all interrupt requests from the card are cleared to prevent</p>
<p>inadvertent interrupts.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>CardRemoval</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Card Removal Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>CardInsertion</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Card Insertion Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>BufferRead</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Buffer Read Ready Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>BufferWrite</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Buffer Write Ready Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>DMAInterrupt</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>DMA Interrupt Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>BlockGap</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Block Gap Event Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>TransferComplete</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Transfer Complete Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>CommandComplete</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Complete Status Enable</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-interrupt-status-enable">
<h3><span class="section-number">26.4.23. </span>Error_Interrupt_Status_Enable<a class="headerlink" href="#error-interrupt-status-enable" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060036</p>
<figure class="align-center">
<img alt="../_images/SDH_Error_Interrupt_Status_Enable.svg" src="../_images/SDH_Error_Interrupt_Status_Enable.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15:12</p></td>
<td><p>VendorSpecific</p></td>
<td><p>r/w</p></td>
<td><p>4'd0</p></td>
<td><p>Vendor Specific Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>TuningError</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Tuning Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>ADMAError</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>ADMA Error Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>AutoCMD</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Auto CMD Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>CurrentLimit</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Current Limit Error Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>DataEnd</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data End Bit Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>DataCRC</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data CRC Error Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>DataTimeout</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data Timeout Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>CommandIndex</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Index Error Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>CommandEnd</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command End Bit Error Status Enable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>CommandCRC</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command CRC Error Status Enable</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>CommandTimeout</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Timeout Error Status Enable</p></td>
</tr>
</tbody>
</table>
</section>
<section id="normal-interrupt-signal-enable">
<h3><span class="section-number">26.4.24. </span>Normal_Interrupt_Signal_Enable<a class="headerlink" href="#normal-interrupt-signal-enable" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060038</p>
<figure class="align-center">
<img alt="../_images/SDH_Normal_Interrupt_Signal_Enable.svg" src="../_images/SDH_Normal_Interrupt_Signal_Enable.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>15</p></td>
<td rowspan="3"><p>Fixedto</p></td>
<td rowspan="3"><p>r</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Fixed to 0</p>
<p>The Host Driver shall control error interrupts using the Error Interrupt Signal</p>
<p>Enable register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>14:13</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>12</p></td>
<td><p>Re-TuningEvent</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Re-Tuning Event Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>INT_CSignal</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>INT_C Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>INT_BSignal</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>INT_B Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>INT_ASignal</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>INT_A Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>CardInterrupt</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Card Interrupt Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>CardRemoval</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Card Removal Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>CardInsertion</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Card Insertion Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>BufferRead</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Buffer Read Ready Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>BufferWrite</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Buffer Write Ready Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>DMAInterrupt</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>DMA Interrupt Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>BlockGap</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Block Gap Event Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>TransferComplete</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Transfer Complete Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>CommandComplete</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Complete Signal Enable</p></td>
</tr>
</tbody>
</table>
</section>
<section id="error-interrupt-signal-enable">
<h3><span class="section-number">26.4.25. </span>Error_Interrupt_Signal_Enable<a class="headerlink" href="#error-interrupt-signal-enable" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006003a</p>
<figure class="align-center">
<img alt="../_images/SDH_Error_Interrupt_Signal_Enable.svg" src="../_images/SDH_Error_Interrupt_Signal_Enable.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15:12</p></td>
<td><p>VendorSpecific</p></td>
<td><p>r/w</p></td>
<td><p>4'd0</p></td>
<td><p>Vendor Specific Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>TuningError</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Tuning Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>ADMAError</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>ADMA Error Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>AutoCMD</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Auto CMD Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>CurrentLimit</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Current Limit Error Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>DataEnd</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data End Bit Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>DataCRC</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data CRC Error Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>DataTimeout</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Data Timeout Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>CommandIndex</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Index Error Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>CommandEnd</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command End Bit Error Signal Enable</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>CommandCRC</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command CRC Error Signal Enable</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>CommandTimeout</p></td>
<td><p>r/w</p></td>
<td><p>1'b0</p></td>
<td><p>Command Timeout Error Signal Enable</p></td>
</tr>
</tbody>
</table>
</section>
<section id="auto-cmd-error-status">
<h3><span class="section-number">26.4.26. </span>Auto_CMD_Error_Status<a class="headerlink" href="#auto-cmd-error-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006003c</p>
<figure class="align-center">
<img alt="../_images/SDH_Auto_CMD_Error_Status.svg" src="../_images/SDH_Auto_CMD_Error_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>7</p></td>
<td rowspan="4"><p>CommandNot</p></td>
<td rowspan="4"><p>roc</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Command Not Issued By Auto CMD12 Error</p>
<p>Setting this bit to 1 means CMD_wo_DAT is not executed due to an Auto</p>
<p>CMD12 Error (D04-D01) in this register.</p>
<p>This bit is set to 0 when Auto CMD Error is generated by Auto CMD23.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>6:5</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>4</p></td>
<td rowspan="2"><p>AutoCMD</p></td>
<td rowspan="2"><p>roc</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Auto CMD Index Error</p>
<p>This bit is set if the Command Index error occurs in response to a command.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>3</p></td>
<td rowspan="2"><p>AutoCMD</p></td>
<td rowspan="2"><p>roc</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Auto CMD End Bit Error</p>
<p>This bit is set when detecting that the end bit of command response is 0.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>AutoCMD</p></td>
<td><p>roc</p></td>
<td><p>1'b0</p></td>
<td><p>Auto CMD CRC Error</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>AutoCMD</p></td>
<td><p>roc</p></td>
<td><p>1'b0</p></td>
<td><p>Auto CMD Timeout Error</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>AutoCMD12</p></td>
<td><p>roc</p></td>
<td><p>1'b0</p></td>
<td><p>Auto CMD12 Not Executed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="host-control-2">
<h3><span class="section-number">26.4.27. </span>Host_Control_2<a class="headerlink" href="#host-control-2" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x2006003e</p>
<figure class="align-center">
<img alt="../_images/SDH_Host_Control_2.svg" src="../_images/SDH_Host_Control_2.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="8"><p>15</p></td>
<td rowspan="8"><p>PresetValue</p></td>
<td rowspan="8"><p>r/w</p></td>
<td rowspan="8"><p>1'b0</p></td>
<td rowspan="8"><p>Preset Value Enable</p>
<p>Host Controller Version 3.00 supports this bit.</p>
<p>As the operating SDCLK frequency and I/O driver strength depend on the</p>
<p>Host System implementation, it is difficult to determine these parameters in</p>
<p>the Standard Host Driver. When Preset Value Enable is set, automatic</p>
<p>SDCLK frequency generation and driver strength selection is performed</p>
<p>without considering system specific conditions. This bit enables the</p>
<p>functions defined in the Preset Value registers.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="9"><p>14</p></td>
<td rowspan="9"><p>AsynchronousInterrupt</p></td>
<td rowspan="9"><p>r/w</p></td>
<td rowspan="9"><p>1'b0</p></td>
<td rowspan="9"><p>Asynchronous Interrupt Enable</p>
<p>This bit can be set to 1 if a card supports asynchronous interrupts and</p>
<p>Asynchronous Interrupt Support is set to 1 in the Capabilities register.</p>
<p>Asynchronous interrupt is effective when DAT[1] interrupt is used in 4-bit SD</p>
<p>mode (and zero is set to Interrupt Pin Select in the Shared Bus Control</p>
<p>register). If this bit is set to 1, the Host Driver can stop the SDCLK during</p>
<p>asynchronous interrupt period to save power. During this period, the Host</p>
<p>Controller continues to deliver the Card Interrupt to the host when it is</p>
<p>asserted by the Card.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>13:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="11"><p>7</p></td>
<td rowspan="11"><p>SamplingClock</p></td>
<td rowspan="11"><p>r/w</p></td>
<td rowspan="11"><p>1'b0</p></td>
<td rowspan="11"><p>Sampling Clock Select</p>
<p>Host Controller uses this bit to select sampling clock to receive CMD and</p>
<p>DAT. This bit is set by tuning procedure and valid after the completion of</p>
<p>tuning (when Execute Tuning is cleared). Setting 1 means that tuning is</p>
<p>completed successfully and setting 0 means that tuning is failed. Writing 1 to</p>
<p>this bit is meaningless and ignored. A tuning circuit is reset by writing to 0.</p>
<p>This bit can be cleared with setting Execute Tuning. Once the tuning circuit</p>
<p>is reset, it will take time to complete tuning sequence. Therefore, Host Driver</p>
<p>should keep this bit to 1 to perform re-tuning sequence to compete re-tuning</p>
<p>sequence in a short time. Change of this bit is not allowed while the Host</p>
<p>Controller is receiving response or a read data block.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="5"><p>6</p></td>
<td rowspan="5"><p>ExecuteTuning</p></td>
<td rowspan="5"><p>rwac</p></td>
<td rowspan="5"><p>1'b0</p></td>
<td rowspan="5"><p>Execute Tuning</p>
<p>This bit is set to 1 to start tuning procedure and automatically cleared when</p>
<p>tuning procedure is completed. The result of tuning is indicated to Sampling</p>
<p>Clock Select. Tuning procedure is aborted by writing 0. Refer to Figure 2-29</p>
<p>for more detail about tuning procedure.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="8"><p>5:4</p></td>
<td rowspan="8"><p>DriverStrength</p></td>
<td rowspan="8"><p>r/w</p></td>
<td rowspan="8"><p>2'd0</p></td>
<td rowspan="8"><p>Driver Strength Select</p>
<p>Host Controller output driver in 1.8V signaling is selected by this bit. In 3.3V</p>
<p>signaling, this field is not effective. This field can be set depends on Driver</p>
<p>Type A, C and D support bits in the Capabilities register.</p>
<p>This bit depends on setting of Preset Value Enable.</p>
<p>If Preset Value Enable = 0, this field is set by Host Driver.</p>
<p>If Preset Value Enable = 1, this field is automatically set by a value</p>
<p>specified in the one of Preset Value registers.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="13"><p>3</p></td>
<td rowspan="13"><p>1.8VSignaling</p></td>
<td rowspan="13"><p>r/w</p></td>
<td rowspan="13"><p>1'b0</p></td>
<td rowspan="13"><p>1.8V Signaling Enable</p>
<p>This bit controls voltage regulator for I/O cell. 3.3V is supplied to the card</p>
<p>regardless of signaling voltage.</p>
<p>Setting this bit from 0 to 1 starts changing signal voltage from 3.3V to 1.8V.</p>
<p>1.8V regulator output shall be stable within 5ms. Host Controller clears this</p>
<p>bit if switching to 1.8V signaling fails.</p>
<p>Clearing this bit from 1 to 0 starts changing signal voltage from 1.8V to 3.3V.</p>
<p>3.3V regulator output shall be stable within 5ms.</p>
<p>Host Driver can set this bit to 1 when Host Controller supports 1.8V signaling</p>
<p>(One of support bits is set to 1: SDR50, SDR104 or DDR50 in the</p>
<p>Capabilities register) and the card or device supports UHS-I (S18A=1. Refer</p>
<p>to Bus Signal Voltage Switch Sequence in the Physical Layer Specification</p>
<p>Version 3.0x).</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>2:0</p></td>
<td rowspan="3"><p>UHSMode</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>3'd0</p></td>
<td rowspan="3"><p>UHS Mode Select</p>
<p>This field is used to select one of UHS-I modes and effective when 1.8V</p>
<p>Signaling Enable is set to 1.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="capabilities-1">
<h3><span class="section-number">26.4.28. </span>Capabilities_1<a class="headerlink" href="#capabilities-1" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060040</p>
<figure class="align-center">
<img alt="../_images/SDH_Capabilities_1.svg" src="../_images/SDH_Capabilities_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="15"><p>31:30</p></td>
<td rowspan="15"><p>SlotType</p></td>
<td rowspan="15"><p>HwInit</p></td>
<td rowspan="15"><p>2'd0</p></td>
<td rowspan="15"><p>Slot Type</p>
<p>This field indicates usage of a slot by a specific Host System. (A host</p>
<p>controller register set is defined per slot.) Embedded Slot for One Device</p>
<p>(01b) means that only one non-removable device is connected to a SD bus</p>
<p>slot. Shared Bus Slot (10b) can be set if Host Controller supports Shared</p>
<p>Bus Control register.</p>
<p>The Standard Host Driver controls only a removable card or one embedded</p>
<p>device connected to a SD bus slot. If a slot is configured for shared bus</p>
<p>(10b), the Standard Host Driver does not control embedded devices</p>
<p>connected to a shared bus. Shared bus slot is controlled by a specific host</p>
<p>driver developed by a Host System.</p>
<p>00b Removable Card Slot</p>
<p>01b Embedded Slot for One Device</p>
<p>10b Shared Bus Slot</p>
<p>11b Reserved</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>29</p></td>
<td rowspan="2"><p>AsynchronousInterrupt</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Asynchronous Interrupt Support</p>
<p>Refer to SDIO Specification Version 3.00 about asynchronous interrupt.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>28</p></td>
<td rowspan="3"><p>64-bitSystem</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>64-bit System Bus Support</p>
<p>Setting 1 to this bit indicates that the Host Controller supports 64-bit</p>
<p>address descriptor mode and is connected to 64-bit address system bus.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>27</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>26</p></td>
<td rowspan="2"><p>VoltageSupport</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Voltage Support 1.8V</p>
<p>Embedded system can use 1.8V power supply.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>25</p></td>
<td rowspan="3"><p>VoltageSupport</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Voltage Support 3.0V</p>
<p>1 :3.0V Supported</p>
<p>0 :3.0V Not Supported</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>24</p></td>
<td><p>VoltageSupport</p></td>
<td><p>HwInit</p></td>
<td><p>1'b0</p></td>
<td><p>Voltage Support 3.3V</p></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>23</p></td>
<td rowspan="4"><p>Suspend/ResumeSupport</p></td>
<td rowspan="4"><p>HwInit</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>Suspend/Resume Support</p>
<p>This bit indicates whether the Host Controller supports Suspend / Resume</p>
<p>functionality. If this bit is 0, the Host Driver shall not issue either Suspend or</p>
<p>Resume commands because the Suspend and Resume mechanism is not supported.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>22</p></td>
<td rowspan="3"><p>SDMASupport</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>SDMA Support</p>
<p>This bit indicates whether the Host Controller is capable of using SDMA to</p>
<p>transfer data between system memory and the Host Controller directly.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>21</p></td>
<td rowspan="4"><p>HighSpeed</p></td>
<td rowspan="4"><p>HwInit</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>High Speed Support</p>
<p>This bit indicates whether the Host Controller and the Host System support</p>
<p>High Speed mode and they can supply SD Clock frequency from 25MHz to</p>
<p>50MHz.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>20</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>19</p></td>
<td rowspan="2"><p>ADMA2Support</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>ADMA2 Support</p>
<p>This bit indicates whether the Host Controller is capable of using ADMA2.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>18</p></td>
<td rowspan="4"><p>8-bitSupport</p></td>
<td rowspan="4"><p>HwInit</p></td>
<td rowspan="4"><p>1'b0</p></td>
<td rowspan="4"><p>8-bit Support for Embedded Device</p>
<p>This bit indicates whether the Host Controller is capable of using 8-bit bus</p>
<p>width mode. This bit is not effective when Slot Type is set to 10b. In this</p>
<p>case, refer to Bus Width Preset in the Shared Bus resister.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="6"><p>17:16</p></td>
<td rowspan="6"><p>MaxBlock</p></td>
<td rowspan="6"><p>HwInit</p></td>
<td rowspan="6"><p>2'd0</p></td>
<td rowspan="6"><p>Max Block Length</p>
<p>This value indicates the maximum block size that the Host Driver can read</p>
<p>and write to the buffer in the Host Controller. The buffer shall transfer this</p>
<p>block size without wait cycles. Three sizes can be defined as indicated</p>
<p>below. It is noted that transfer block length shall be always 512 bytes for SD</p>
<p>Memory Cards regardless this field.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>15:8</p></td>
<td rowspan="3"><p>BaseClock</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>8'd0</p></td>
<td rowspan="3"><p>Base Clock Frequency For SD Clock</p>
<p>This value indicates the base (maximum) clock frequency for the SD Clock.</p>
<p>Definition of this field depends on Host Controller Version.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>7</p></td>
<td rowspan="3"><p>TimeoutClock</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Timeout Clock Unit</p>
<p>This bit shows the unit of base clock frequency used to detect Data Timeout</p>
<p>Error.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>5:0</p></td>
<td rowspan="3"><p>TimeoutClock</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>6'd0</p></td>
<td rowspan="3"><p>Timeout Clock Frequency</p>
<p>This bit shows the base clock frequency used to detect Data Timeout Error.</p>
<p>The Timeout Clock Unit defines the unit of this field's value.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="capabilities-2">
<h3><span class="section-number">26.4.29. </span>Capabilities_2<a class="headerlink" href="#capabilities-2" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060044</p>
<figure class="align-center">
<img alt="../_images/SDH_Capabilities_2.svg" src="../_images/SDH_Capabilities_2.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>23:16</p></td>
<td rowspan="4"><p>ClockMultiplier</p></td>
<td rowspan="4"><p>HwInit</p></td>
<td rowspan="4"><p>8'd0</p></td>
<td rowspan="4"><p>Clock Multiplier</p>
<p>This field indicates clock multiplier value of programmable clock generator.</p>
<p>Refer to Clock Control register. Setting 00h means that Host Controller</p>
<p>does not support programmable clock generator.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>15:14</p></td>
<td rowspan="2"><p>Re-TuningModes</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>2'd0</p></td>
<td rowspan="2"><p>Re-Tuning Modes</p>
<p>This field selects re-tuning method and limits the maximum data length.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>13</p></td>
<td rowspan="3"><p>UseTuning</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>Use Tuning for SDR50</p>
<p>If this bit is set to 1, this Host Controller requires tuning to operate SDR50.</p>
<p>(Tuning is always required to operate SDR104.)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>11:8</p></td>
<td rowspan="3"><p>TimerCount</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>4'd0</p></td>
<td rowspan="3"><p>Timer Count for Re-Tuning</p>
<p>This field indicates an initial value of the Re-Tuning Timer for Re-Tuning</p>
<p>Mode 1 to 3. Setting to 0 disables Re-Tuning Timer.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>6</p></td>
<td rowspan="2"><p>DriverType</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Driver Type D Support</p>
<p>This bit indicates support of Driver Type D for 1.8 Signaling.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>5</p></td>
<td rowspan="2"><p>DriverType</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Driver Type C Support</p>
<p>This bit indicates support of Driver Type C for 1.8 Signaling.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>4</p></td>
<td rowspan="2"><p>DriverType</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>Driver Type A Support</p>
<p>This bit indicates support of Driver Type A for 1.8 Signaling.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>DDR50Support</p></td>
<td><p>HwInit</p></td>
<td><p>1'b0</p></td>
<td><p>DDR50 Support</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>1</p></td>
<td rowspan="2"><p>SDR104Support</p></td>
<td rowspan="2"><p>HwInit</p></td>
<td rowspan="2"><p>1'b0</p></td>
<td rowspan="2"><p>SDR104 Support</p>
<p>SDR104 requires tuning.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>0</p></td>
<td rowspan="3"><p>SDR50Support</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>SDR50 Support</p>
<p>If SDR104 is supported, this bit shall be set to 1. Bit 45 indicates whether</p>
<p>SDR50 requires tuning or not.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="maximum-current-capabilities">
<h3><span class="section-number">26.4.30. </span>Maximum_Current_Capabilities<a class="headerlink" href="#maximum-current-capabilities" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060048</p>
<figure class="align-center">
<img alt="../_images/SDH_Maximum_Current_Capabilities.svg" src="../_images/SDH_Maximum_Current_Capabilities.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>MaximumCurrent</p></td>
<td><p>HwInit</p></td>
<td><p>8'd0</p></td>
<td><p>Maximum Current for 1.8V</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>MaximumCurrent</p></td>
<td><p>HwInit</p></td>
<td><p>8'd0</p></td>
<td><p>Maximum Current for 3.0V</p></td>
</tr>
<tr class="row-odd"><td><p>7:0</p></td>
<td><p>MaximumCurrent</p></td>
<td><p>HwInit</p></td>
<td><p>8'd0</p></td>
<td><p>Maximum Current for 3.3V</p></td>
</tr>
</tbody>
</table>
</section>
<section id="force-event-register-for-auto-cmd-error-status">
<h3><span class="section-number">26.4.31. </span>Force_Event_Register_for_Auto_CMD_Error_Status<a class="headerlink" href="#force-event-register-for-auto-cmd-error-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060050</p>
<figure class="align-center">
<img alt="../_images/SDH_Force_Event_Register_for_Auto_CMD_Error_Status.svg" src="../_images/SDH_Force_Event_Register_for_Auto_CMD_Error_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Command Not Issued By Auto CMD12 Error</p></td>
</tr>
<tr class="row-even"><td><p>6:5</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD Index Error</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD End Bit Error</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD CRC Error</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD Timeout Error</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD12 Not Executed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="force-event-register-for-error-interrupt-status">
<h3><span class="section-number">26.4.32. </span>Force_Event_Register_for_Error_Interrupt_Status<a class="headerlink" href="#force-event-register-for-error-interrupt-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060052</p>
<figure class="align-center">
<img alt="../_images/SDH_Force_Event_Register_for_Error_Interrupt_Status.svg" src="../_images/SDH_Force_Event_Register_for_Error_Interrupt_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>15:12</p></td>
<td rowspan="2"><p>ForceEvent</p></td>
<td rowspan="2"><p>w</p></td>
<td rowspan="2"><p>x</p></td>
<td rowspan="2"><p>Force Event for Vendor Specific Error Status</p>
<p>Additional status bits can be defined in this register by the vendor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>11:10</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for ADMA Error</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Auto CMD Error</p></td>
</tr>
<tr class="row-even"><td><p>7</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Current Limit Error</p></td>
</tr>
<tr class="row-odd"><td><p>6</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Data End Bit Error</p></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Data CRC Error</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Data Timeout Error</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Command Index Error</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Command End Bit Error</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Command CRC Error</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>ForceEvent</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>Force Event for Command Timeout Error</p></td>
</tr>
</tbody>
</table>
</section>
<section id="adma-error-status">
<h3><span class="section-number">26.4.33. </span>ADMA_Error_Status<a class="headerlink" href="#adma-error-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x20060054</p>
<figure class="align-center">
<img alt="../_images/SDH_ADMA_Error_Status.svg" src="../_images/SDH_ADMA_Error_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="6"><p>2</p></td>
<td rowspan="6"><p>ADMALength</p></td>
<td rowspan="6"><p>roc</p></td>
<td rowspan="6"><p>1'b0</p></td>
<td rowspan="6"><p>ADMA Length Mismatch Error</p>
<p>This error occurs in the following 2 cases.</p>
<ol class="arabic simple">
<li><p>While Block Count Enable being set, the total data length specified by the</p></li>
</ol>
<p>Descriptor table is different from that specified by the Block Count and</p>
<p>Block Length.</p>
<ol class="arabic simple" start="2">
<li><p>Total data length can not be divided by the block length.</p></li>
</ol>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>1:0</p></td>
<td rowspan="3"><p>ADMAError</p></td>
<td rowspan="3"><p>roc</p></td>
<td rowspan="3"><p>1'b0</p></td>
<td rowspan="3"><p>ADMA Error State</p>
<p>This field indicates the state of ADMA when error is occurred during ADMA data</p>
<p>transfer. This field never indicates &quot;10&quot; because ADMA never stops in this state.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="shared-bus-control">
<h3><span class="section-number">26.4.34. </span>Shared_Bus_Control<a class="headerlink" href="#shared-bus-control" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x200600e0</p>
<figure class="align-center">
<img alt="../_images/SDH_Shared_Bus_Control.svg" src="../_images/SDH_Shared_Bus_Control.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="5"><p>30:24</p></td>
<td rowspan="5"><p>Back-EndPower</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>7'd0</p></td>
<td rowspan="5"><p>Back-End Power Control</p>
<p>Each bit of this field controls back-end power supply for an embedded</p>
<p>device. Host interface voltage (VDDH) is not controlled by this field. The</p>
<p>number of devices supported is specified by Number of Clock Pins and a</p>
<p>maximum of 7 devices can be controlled.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>23</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>22:20</p></td>
<td rowspan="3"><p>InterruptPin</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>3'd0</p></td>
<td rowspan="3"><p>Interrupt Pin Select</p>
<p>Interrupt pin inputs are enabled by this field. Enable of unsupported</p>
<p>interrupt pin is meaningless.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>18:16</p></td>
<td rowspan="4"><p>ClockPin</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>3'd0</p></td>
<td rowspan="4"><p>Clock Pin Select</p>
<p>One of clock pin outputs is selected by this field. Select of unsupported</p>
<p>clock pin is meaningless. Refer to Figure 2-38 for the timing of clock</p>
<p>outputs.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="10"><p>14:8</p></td>
<td rowspan="10"><p>BusWidth</p></td>
<td rowspan="10"><p>r/w</p></td>
<td rowspan="10"><p>7'd0</p></td>
<td rowspan="10"><p>Bus Width Preset</p>
<p>Shared bus supports mixing of 4-bit and 8-bit bus width devices.</p>
<p>Each bit of this field specifies the bus width for each embedded device. The</p>
<p>number of devices supported is specified by Number of Clock Pins and a</p>
<p>maximum of 7 devices are supported.</p>
<p>This field is effective when multiple devices are connected to a shared bus</p>
<p>(Slot Type is set to 10b in the Capabilities register). In the other case,</p>
<p>Extended Data Transfer Width in the Host Control 1 register is used to</p>
<p>select 8-bit bus width. As use of 1-bit mode is not intended for shared bus,</p>
<p>Data Transfer Width in the Host Control 1 register should be set to 1.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>7:6</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="5"><p>5:4</p></td>
<td rowspan="5"><p>Numberof</p></td>
<td rowspan="5"><p>r/w</p></td>
<td rowspan="5"><p>2'd0</p></td>
<td rowspan="5"><p>Number of Interrupt Input Pins</p>
<p>This field indicates support of interrupt input pins for shared bus system.</p>
<p>Three asynchronous interrupt pins are defined, INT_A#, INT_B# and</p>
<p>INT_C#. Which interrupt pin is used is determined by the system. Each one</p>
<p>is driven by open drain and then wired or connection is possible.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="5"><p>2:0</p></td>
<td rowspan="5"><p>Numberof</p></td>
<td rowspan="5"><p>HwInit</p></td>
<td rowspan="5"><p>3'd0</p></td>
<td rowspan="5"><p>Number of Clock Pins</p>
<p>This field indicates support of clock pins to select one of devices for shared</p>
<p>bus system. Up to 7 clock pins can be supported.</p>
<p>Shared bus is supported by specific system. Then Standard Host Driver</p>
<p>does not support control of these clock pins.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="slot-interrupt-status">
<h3><span class="section-number">26.4.35. </span>Slot_Interrupt_Status<a class="headerlink" href="#slot-interrupt-status" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x200600fc</p>
<figure class="align-center">
<img alt="../_images/SDH_Slot_Interrupt_Status.svg" src="../_images/SDH_Slot_Interrupt_Status.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="7"><p>7:0</p></td>
<td rowspan="7"><p>InterruptSignal</p></td>
<td rowspan="7"><p>roc</p></td>
<td rowspan="7"><p>8'd0</p></td>
<td rowspan="7"><p>Interrupt Signal For Each Slot</p>
<p>These status bits indicate the logical OR of Interrupt Signal and Wakeup</p>
<p>Signal for each slot. A maximum of 8 slots can be defined. If one interrupt</p>
<p>signal is associated with multiple slots, the Host Driver can know which</p>
<p>interrupt is generated by reading these status bits. By a power on reset or by</p>
<p>setting Software Reset For All, the interrupt signal shall be de-asserted</p>
<p>and this status shall read 00h.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="host-controller-version">
<h3><span class="section-number">26.4.36. </span>Host_Controller_Version<a class="headerlink" href="#host-controller-version" title="永久链接至标题"></a></h3>
<p><strong>地址：</strong>  0x200600fe</p>
<figure class="align-center">
<img alt="../_images/SDH_Host_Controller_Version.svg" src="../_images/SDH_Host_Controller_Version.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>位</p></th>
<th class="head"><p>名称</p></th>
<th class="head"><p>权限</p></th>
<th class="head"><p>复位值</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>15:8</p></td>
<td rowspan="3"><p>VendorVersion</p></td>
<td rowspan="3"><p>HwInit</p></td>
<td rowspan="3"><p>8'd0</p></td>
<td rowspan="3"><p>Vendor Version Number</p>
<p>This status is reserved for the vendor version number. The Host Driver</p>
<p>should not use this status.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="9"><p>7:0</p></td>
<td rowspan="9"><p>SpecificationVersion</p></td>
<td rowspan="9"><p>HwInit</p></td>
<td rowspan="9"><p>8'd0</p></td>
<td rowspan="9"><p>Specification Version Number</p>
<p>This status indicates the Host Controller Spec. Version. The upper and</p>
<p>lower 4-bits indicate the version.</p>
<p>00h SD Host Specification Version 1.00</p>
<p>01h SD Host Specification Version 2.00</p>
<p>Including the feature of the ADMA and Test Register,</p>
<p>02h SD Host Specification Version 3.00</p>
<p>others Reserved</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="USB.html" class="btn btn-neutral float-left" title="25. USB" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="ISO11898.html" class="btn btn-neutral float-right" title="27. ISO11898" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2021.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>