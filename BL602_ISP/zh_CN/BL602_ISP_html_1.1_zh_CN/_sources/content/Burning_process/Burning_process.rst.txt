======
概述
======
本烧录工具是将用户的应用程序(Firmware)和配置相关的引导信息(Bootinfo)烧录到指定地址中。

烧录功能如下：

- 烧写单核镜像
- 烧写双核镜像
- 烧写raw bin
- 烧写boot2
- 读取flash
- 烧写efuse
- 读取efuse

烧录方式支持UART和JLINK两种方式。

烧写界面如下：

.. figure:: /content/Burning_process/picture/interface1.png
   :align: center

   配置界面

==========
镜像组成
==========

.. figure:: /content/Burning_process/picture/Flash_Image_Layout_Common.jpg
   :align: center

   烧录内容布局

如果只烧录应用程序无法使芯片正常工作，必须要将引导信息烧录到指定位置。引导信息包含对PLL、Boot、Flash等的配置；固件是用户自己编写的应用程序。

以双核烧录为例：根据需求选择CPU0或者CPU1,将对PLL、Boot、Flash等配置的信息烧录到Bootinfo_CPU0或Bootinfo_CPU1对应的地址中，将应用程序经过编译后的bin文件烧录到Firmware_CPU0或Firmware_CPU1对应的地址中。

=========================
镜像生成
=========================

普通bootinfo配置
----------------------------
选项详细描述如下：

- XTAL : 外部晶振选择，默认为38.4M
- PLL : PLL时钟配置，默认为160M
- CacheWayDis : 缓冲通道失能，默认为none
- Sign : 选择是否需要ECC校验，默认为none
- CrcIgnore : 是否需要CRC校验
  
  - False : 需要做CRC校验
  - True : 不需要做CRC校验

- HashIgnore : 是否需要做Hash校验

  - False : 需要做Hash校验
  - True : 不需要做Hash校验

- Flash clock type : 选择Flash时钟，默认为80M
- Flash Type : 根据原理图选择Flash对应的型号

加密bootinfo配置
----------------------------

=============
烧录选项配置
=============

烧录方式选择
--------------

- 使用UART烧录

  - Device选择UART，COMPort配置对应的端口，COMSpeed配置端口速度。

- 使用JLINK烧录

  - Device选择Jlink，JlinkSpeed配置对应的速度。

芯片擦除
-----------
ChipErase设置为True，烧写时将Flash擦除；设置为False，烧写时不擦除Flash。

SHA检验
--------
Verify设置为True时，计算并校验SHA值；设置为False时，读取文件并和原文件对比。


==========
镜像烧录
==========
单核flash镜像
--------------
Image Type选择SingleCPU，Image Addr填写0x20000以后的任意地址，BootInfo Addr填写0x0，点击Creat，确认正确选择烧录方式后，点击Program,完成烧录。

双核flash镜像
---------------
Image Type根据需求选择CPU0或CPU1，若选择CPU0，Image Addr填写0x20000以后的任意地址，BootInfo Addr填写0x0；若选择CPU1，Image Addr填写0x80000以后的任意地址，BootInfo Addr填写0x001000，点击Creat，确认正确选择烧录方式后，点击Program,完成烧录。

boot2 烧录
-----------
Image Type选择BLSP_Boot2，Image Addr填写0x20000以后的任意地址，BootInfo Addr填写0x0，点击Creat，确认正确选择烧录方式后，点击Program,完成烧录。

Raw bin烧录
-------------
Image Type选择RAW，不需要配置Bootinfo，不点击Creat，直接配置烧录方式，配置完毕，点击Program程序会下载到Image Addr设置的地址中。

UART/SDIO生成
---------------
Boot Source选择UART/SDIO，由UART生成bin文件。


==============
Timer配置示例
==============

打开KEIL工程，编译生成对应的bin文件，烧写配置如下：

.. figure:: /content/Burning_process/picture/interface2.png
   :align: center

   配置界面

点击Creat,会出现如下信息

.. figure:: /content/Burning_process/picture/interface3.png
   :align: center

   Log信息

选择合适的烧录方式并进行配置

.. figure:: /content/Burning_process/picture/interface4.png
   :align: center

   配置界面

点击Program,出现如下信息

.. figure:: /content/Burning_process/picture/interface5.png
   :align: center

   Log信息

通过串口工具，打印程序对应的信息

.. figure:: /content/Burning_process/picture/interface6.png
   :align: center

   串口信息



