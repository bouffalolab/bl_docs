
Register description
==========================

+---------------+-------------------------------------+
| Name          | Description                         |
+---------------+-------------------------------------+
| `MODE`_       | ethernet mac mode setting register  |
+---------------+-------------------------------------+
| `INT_SOURCE`_ | interrupt control register          |
+---------------+-------------------------------------+
| `INT_MASK`_   | interrupt  mask register            |
+---------------+-------------------------------------+
| `IPGT`_       | inter packet gap register           |
+---------------+-------------------------------------+
| `PACKETLEN`_  | packet length control register      |
+---------------+-------------------------------------+
| `COLLCONFIG`_ | collision and retry config register |
+---------------+-------------------------------------+
| `TX_BD_NUM`_  | transmit buffer number register     |
+---------------+-------------------------------------+
| `MIIMODE`_    | MII mode config register            |
+---------------+-------------------------------------+
| `MIICOMMAND`_ | MII command config register         |
+---------------+-------------------------------------+
| `MIIADDRESS`_ | MII  address config register        |
+---------------+-------------------------------------+
| `MIITX_DATA`_ | MII transmit data register          |
+---------------+-------------------------------------+
| `MIIRX_DATA`_ | MII read data register              |
+---------------+-------------------------------------+
| `MIISTATUS`_  | MII status register                 |
+---------------+-------------------------------------+
| `MAC_ADDR0`_  | ethernet mac address0 register      |
+---------------+-------------------------------------+
| `MAC_ADDR1`_  | Ethernet mac address1 register      |
+---------------+-------------------------------------+
| `HASH0_ADDR`_ | hash0 address register              |
+---------------+-------------------------------------+
| `HASH1_ADDR`_ | hash1 address register              |
+---------------+-------------------------------------+
| `TXCTRL`_     | Transmit control register           |
+---------------+-------------------------------------+

MODE
------
 
**Addressï¼š**  0x20070000
 
.. figure:: ../../picture/emac_MODE.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                                             |
    +==========+==============================+========+=============+=========================================================================================================================================================================================+
    | 31:18    | RSVD                         |        |             |                                                                                                                                                                                         |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 17       | RMII_EN                      | r/w    | 1'b0        | RMII mode enable                                                                                                                                                                        |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: MII PHY I/F is used                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: RMII PHY I/F is used                                                                                                                                                                 |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 16       | RECSMALL                     | r/w    | 1'b0        | Receive small frame enable                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Frames smaller than MINFL are ignored.                                                                                                                                               |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Frames smaller than MINFL are accepted.                                                                                                                                              |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 15       | PAD                          | r/w    | 1'b1        | Padding enable                                                                                                                                                                          |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Do not add pads to frames shorter than MINFL.                                                                                                                                        |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Add pads to short frames, until the length equals MINFL.                                                                                                                             |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 14       | HUGEN                        | r/w    | 1'b0        | Huge frames enable                                                                                                                                                                      |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: The maximum frame length is MAXFL. All additional bytes are dropped.                                                                                                                 |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Frame size is not limited by MAXFL and can be up to 64K bytes.                                                                                                                       |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 13       | CRCEN                        | r/w    | 1'b1        | CRC Enable                                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: TX MAC does not append CRC field.                                                                                                                                                    |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: TX MAC will append CRC field to every frame.                                                                                                                                         |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 12:11    | RSVD                         |        |             |                                                                                                                                                                                         |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 10       | FULLD                        | r/w    | 1'b0        | Full duplex                                                                                                                                                                             |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Half duplex mode.                                                                                                                                                                    |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Full duplex mode.                                                                                                                                                                    |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 9:7      | RSVD                         |        |             |                                                                                                                                                                                         |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 6        | IFG                          | r/w    | 1'b0        | Inter frame gap check                                                                                                                                                                   |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: IFG is verified before each frame be received.                                                                                                                                       |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: All frames are received regardless to IFG requirement.                                                                                                                               |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 5        | PRO                          | r/w    | 1'b0        | Promiscuous mode enable                                                                                                                                                                 |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: The destination address is checked before receiving.                                                                                                                                 |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: All frames received regardless of the address.                                                                                                                                       |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 4        | RSVD                         |        |             |                                                                                                                                                                                         |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 3        | BRO                          | r/w    | 1'b1        | Broadcast address enable                                                                                                                                                                |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Reject all frames containing the broadcast address unless the PRO bit is asserted.                                                                                                   |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Receive all frames containing broadcast address.                                                                                                                                     |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 2        | NOPRE                        | r/w    | 1'b0        | No preamble mode                                                                                                                                                                        |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: 7-byte preamble will be sent.                                                                                                                                                        |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: No preamble will be sent.                                                                                                                                                            |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 1        | TXEN                         | r/w    | 1'b0        | Transmit enable                                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Transmitter is disabled.                                                                                                                                                             |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Transmitter is enabled.                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | If TX_BD_NUM equals 0x0 (zero buffer descriptors are used), then the transmitter is disabled regardless of TXEN.                                                                        |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 0        | RXEN                         | r/w    | 1'b0        | Receiver enable                                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 0: Receiver is disabled.                                                                                                                                                                |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | 1: Receiver is enabled.                                                                                                                                                                 |
    +          +                              +        +             +                                                                                                                                                                                         +
    |          |                              |        |             | If TX_BD_NUM equals 0x80 (all buffer descriptors are used for TX), then the receiver is disabled regardless of RXEN.                                                                    |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

INT_SOURCE
------------
 
**Addressï¼š**  0x20070004
 
.. figure:: ../../picture/emac_INT_SOURCE.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                                                                                                                                                  |
    +==========+==============================+========+=============+==============================================================================================================================================================================================================================================================================================+
    | 31:7     | RSVD                         |        |             |                                                                                                                                                                                                                                                                                              |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 6        | RXC                          | r/w    | 1'b0        | Receive control frame                                                                                                                                                                                                                                                                        |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that the control frame was received. It is cleared by writing 1 to it.                                                                                                                                                                                                    |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | Bit RXFLOW in the CTRLMODE register must be set to 1 in order to get the RXC bit set.                                                                                                                                                                                                        |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 5        | TXC                          | r/w    | 1'b0        | Transmit control frame                                                                                                                                                                                                                                                                       |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that a control frame was transmitted. It is cleared by writing 1 to it.                                                                                                                                                                                                   |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | Bit TXFLOW in the CTRLMODE register must be set to 1 in order to get the TXC bit set.                                                                                                                                                                                                        |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 4        | BUSY                         | r/w    | 1'b0        | Busy                                                                                                                                                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that RX packet is being received and there is no empty buffer descriptor to use. It iscleared by writing 1 to it.                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit appears regardless to the IRQ bits in the Receive Buffer Descriptor.                                                                                                                                                                                                                |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 3        | RXE                          | r/w    | 1'b0        | Receive error                                                                                                                                                                                                                                                                                |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that an error occurred while receiving data (overrun, receiver error, dribble                                                                                                                                                                                             |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | nibble, too long, >64K, CRC error, bus error or late collision. It is cleared by writing 1 to it.                                                                                                                                                                                            |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit appears only when IRQ bit is set in the Receive Buffer Descriptor.                                                                                                                                                                                                                  |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 2        | RXB                          | r/w    | 1'b0        | Receive frame                                                                                                                                                                                                                                                                                |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that a frame was received. It is cleared by writing 1 to it.                                                                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit appears only when IRQ bit is set in the Receive Buffer Descriptor.                                                                                                                                                                                                                  |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 1        | TXE                          | r/w    | 1'b0        | Transmit error                                                                                                                                                                                                                                                                               |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that a buffer was not transmitted due to a transmit error (underrun,                                                                                                                                                                                                      |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | retransmission limit, late collision, bus error or defer timeout). It is cleared by writing 1 to it.                                                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit appears only when IRQ bit is set in the Transmit Buffer Descriptor.                                                                                                                                                                                                                 |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 0        | TXB                          | r/w    | 1'b0        | Transmit buffer                                                                                                                                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit indicates that a buffer has been transmitted. It is cleared by writing 1 to it.                                                                                                                                                                                                     |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                              +
    |          |                              |        |             | This bit appears only when IRQ bit is set in the Transmit Buffer Descriptor.                                                                                                                                                                                                                 |
    +----------+------------------------------+--------+-------------+----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

INT_MASK
----------
 
**Addressï¼š**  0x20070008
 
.. figure:: ../../picture/emac_INT_MASK.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                         |
    +==========+==============================+========+=============+=====================================================================================+
    | 31:7     | RSVD                         |        |             |                                                                                     |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 6        | RXC_M                        | r/w    | 1'b1        | Receive control frame mask ENABLE                                                   |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 5        | TXC_M                        | r/w    | 1'b1        | Transmit control frame mask ENABLE                                                  |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 4        | BUSY_M                       | r/w    | 1'b1        | Busy mask ENABLE                                                                    |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 3        | RXE_M                        | r/w    | 1'b1        | Receive error mask ENABLE                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 2        | RXB_M                        | r/w    | 1'b1        | Receive frame mask ENABLE                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 1        | TXE_M                        | r/w    | 1'b1        | Transmit error mask ENABLE                                                          |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+
    | 0        | TXB_M                        | r/w    | 1'b1        | Transmit buffer mask ENABLE                                                         |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 0: Interrupt is un-masked                                                           |
    +          +                              +        +             +                                                                                     +
    |          |                              |        |             | 1: Interrupt is masked                                                              |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------------------+

IPGT
------
 
**Addressï¼š**  0x2007000c
 
.. figure:: ../../picture/emac_IPGT.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                     |
    +==========+==============================+========+=============+=================================================================================================================================+
    | 31:7     | RSVD                         |        |             |                                                                                                                                 |
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------+
    | 6:0      | IPGT                         | r/w    | 7'h18       | Inter packet gap                                                                                                                |
    +          +                              +        +             +                                                                                                                                 +
    |          |                              |        |             | The recommended value is 0x18 (24 clock cycles),                                                                                |
    +          +                              +        +             +                                                                                                                                 +
    |          |                              |        |             | which equals 9.6 us for 10 Mbps and 0.96 us for 100 Mbps mode                                                                   |
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------+

PACKETLEN
-----------
 
**Addressï¼š**  0x20070018
 
.. figure:: ../../picture/emac_PACKETLEN.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                                                                                                                                           |
    +==========+==============================+========+=============+=======================================================================================================================================================================================================================================================================================+
    | 31:16    | MINFL                        | r/w    | 16'h40      | Minimum frame length                                                                                                                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | The minimum Ethernet packet is 64 bytes long (0x40).                                                                                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | To receive small packets, assert the RECSMALL bit or change the MINFL value.                                                                                                                                                                                                          |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | To transmit small packets, assert the PAD bit or change the MINFL value.                                                                                                                                                                                                              |
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 15:0     | MAXFL                        | r/w    | 16'h600     | Maximum frame length                                                                                                                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | The maximum Ethernet packet is 1518 bytes long. To support this and to have some additional                                                                                                                                                                                           |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | space for tags, a default maximum packet length equals to 1536 bytes (0x600).                                                                                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                       +
    |          |                              |        |             | For bigger packets, you can assert the HUGEN bit or increase the value of MAXFL field.                                                                                                                                                                                                |
    +----------+------------------------------+--------+-------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

COLLCONFIG
------------
 
**Addressï¼š**  0x2007001c
 
.. figure:: ../../picture/emac_COLLCONFIG.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                                                                                                                                                                                       |
    +==========+==============================+========+=============+===================================================================================================================================================================================================================================================================================================================================+
    | 31:20    | RSVD                         |        |             |                                                                                                                                                                                                                                                                                                                                   |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 19:16    | MAXRET                       | r/w    | 4'hF        | Maximum retry                                                                                                                                                                                                                                                                                                                     |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                                                                   +
    |          |                              |        |             | This field specifies the maximum number of consequential retransmission attempts after the collision is detected.                                                                                                                                                                                                                 |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                                                                   +
    |          |                              |        |             | When the maximum number has been reached, the TX MAC reports an error and stops transmitting the current packet.                                                                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                                                                   +
    |          |                              |        |             | According to the Ethernet standard, the MAXRET default value is set to 0xf (15).                                                                                                                                                                                                                                                  |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 15:6     | RSVD                         |        |             |                                                                                                                                                                                                                                                                                                                                   |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 5:0      | COLLVALID                    | r/w    | 6'h3F       | Collision valid                                                                                                                                                                                                                                                                                                                   |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                                                                   +
    |          |                              |        |             | This field specifies a collision time window. A collision that occurs later than the time window                                                                                                                                                                                                                                  |
    +          +                              +        +             +                                                                                                                                                                                                                                                                                                                                   +
    |          |                              |        |             | is reported as a "Late Collisions" and transmission of the current packet is aborted.                                                                                                                                                                                                                                             |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

TX_BD_NUM
-----------
 
**Addressï¼š**  0x20070020
 
.. figure:: ../../picture/emac_TX_BD_NUM.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                                                                                                    |
    +==========+==============================+========+=============+================================================================================================================================================================================================================================================+
    | 31       | RSVD                         |        |             |                                                                                                                                                                                                                                                |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 30:24    | RXBDPTR                      | r      | 7'h0        | RX buffer descriptors (BD) pointer, pointing at the RXBD currently being used                                                                                                                                                                  |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 23       | RSVD                         |        |             |                                                                                                                                                                                                                                                |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 22:16    | TXBDPTR                      | r      | 7'h0        | TX buffer descriptors (BD) pointer, pointing at the TXBD currently being used                                                                                                                                                                  |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 15:8     | RSVD                         |        |             |                                                                                                                                                                                                                                                |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 7:0      | TXBDNUM                      | r/w    | 8'h40       | TX buffer descriptors (BD) number                                                                                                                                                                                                              |
    +          +                              +        +             +                                                                                                                                                                                                                                                +
    |          |                              |        |             | Number of TX BD. TX and RX share 128 (0x80) descriptors, so the number of RX BD equals 0x80 - TXBDNUM.                                                                                                                                         |
    +          +                              +        +             +                                                                                                                                                                                                                                                +
    |          |                              |        |             | The maximum number of TXBDNUM is 0x80. Values greater then 0x80 cannot be written into this register.                                                                                                                                          |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

MIIMODE
---------
 
**Addressï¼š**  0x20070028
 
.. figure:: ../../picture/emac_MIIMODE.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+--------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                        |
    +==========+==============================+========+=============+====================================================================================================================+
    | 31:9     | RSVD                         |        |             |                                                                                                                    |
    +----------+------------------------------+--------+-------------+--------------------------------------------------------------------------------------------------------------------+
    | 8        | MIINOPRE                     | r/w    | 1'b0        | No preamble for Management Data (MD)                                                                               |
    +          +                              +        +             +                                                                                                                    +
    |          |                              |        |             | 0: 32-bit preamble will be sent.                                                                                   |
    +          +                              +        +             +                                                                                                                    +
    |          |                              |        |             | 1: No preamble will be sent.                                                                                       |
    +----------+------------------------------+--------+-------------+--------------------------------------------------------------------------------------------------------------------+
    | 7:0      | CLKDIV                       | r/w    | 8'h64       | Clock divider for Management Data Clock (MDC)                                                                      |
    +          +                              +        +             +                                                                                                                    +
    |          |                              |        |             | The source clock is bus clock and can be divided by any even number.                                               |
    +----------+------------------------------+--------+-------------+--------------------------------------------------------------------------------------------------------------------+

MIICOMMAND
------------
 
**Addressï¼š**  0x2007002c
 
.. figure:: ../../picture/emac_MIICOMMAND.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                                                                                            |
    +==========+==============================+========+=============+========================================================================================================================================================================+
    | 31:3     | RSVD                         |        |             |                                                                                                                                                                        |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 2        | WCTRLDATA                    | r/w    | 1'b0        | Write control data, setting this bit to 1 will trigger the command (auto cleared)                                                                                      |
    +          +                              +        +             +                                                                                                                                                                        +
    |          |                              |        |             | Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time                                                                                   |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 1        | RSTAT                        | r/w    | 1'b0        | Read status, setting this bit to 1 will trigger the command (auto cleared)                                                                                             |
    +          +                              +        +             +                                                                                                                                                                        +
    |          |                              |        |             | Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time                                                                                   |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
    | 0        | SCANSTAT                     | r/w    | 1'b0        | Scan status, setting this bit to 1 will trigger the command (auto cleared)                                                                                             |
    +          +                              +        +             +                                                                                                                                                                        +
    |          |                              |        |             | Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time                                                                                   |
    +----------+------------------------------+--------+-------------+------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

MIIADDRESS
------------
 
**Addressï¼š**  0x20070030
 
.. figure:: ../../picture/emac_MIIADDRESS.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+------------------+
    | Bit      | Name                         |Type    | Reset       | Description      |
    +==========+==============================+========+=============+==================+
    | 31:13    | RSVD                         |        |             |                  |
    +----------+------------------------------+--------+-------------+------------------+
    | 12:8     | RGAD                         | r/w    | 5'h0        | Register Address |
    +----------+------------------------------+--------+-------------+------------------+
    | 7:5      | RSVD                         |        |             |                  |
    +----------+------------------------------+--------+-------------+------------------+
    | 4:0      | FIAD                         | r/w    | 5'h0        | PHY Address      |
    +----------+------------------------------+--------+-------------+------------------+

MIITX_DATA
------------
 
**Addressï¼š**  0x20070034
 
.. figure:: ../../picture/emac_MIITX_DATA.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                       |
    +==========+==============================+========+=============+===================================+
    | 31:16    | RSVD                         |        |             |                                   |
    +----------+------------------------------+--------+-------------+-----------------------------------+
    | 15:0     | CTRLDATA                     | r/w    | 16'h0       | Control Data to be written to PHY |
    +----------+------------------------------+--------+-------------+-----------------------------------+

MIIRX_DATA
------------
 
**Addressï¼š**  0x20070038
 
.. figure:: ../../picture/emac_MIIRX_DATA.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+------------------------+
    | Bit      | Name                         |Type    | Reset       | Description            |
    +==========+==============================+========+=============+========================+
    | 31:16    | RSVD                         |        |             |                        |
    +----------+------------------------------+--------+-------------+------------------------+
    | 15:0     | PRSD                         | r      | 16'h0       | Received Data from PHY |
    +----------+------------------------------+--------+-------------+------------------------+

MIISTATUS
-----------
 
**Addressï¼š**  0x2007003c
 
.. figure:: ../../picture/emac_MIISTATUS.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                             |
    +==========+==============================+========+=============+=========================================================================+
    | 31:2     | RSVD                         |        |             |                                                                         |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------+
    | 1        | MIIM_BUSY                    | r      | 1'b0        | MIIM I/F busy signal                                                    |
    +          +                              +        +             +                                                                         +
    |          |                              |        |             | 0: The MIIM I/F is ready.                                               |
    +          +                              +        +             +                                                                         +
    |          |                              |        |             | 1: The MIIM I/F is busy.                                                |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------+
    | 0        | MIIM_LINKFAIL                | r      | 1'b0        | MIIM I/F link fail signal                                               |
    +----------+------------------------------+--------+-------------+-------------------------------------------------------------------------+

MAC_ADDR0
-----------
 
**Addressï¼š**  0x20070040
 
.. figure:: ../../picture/emac_MAC_ADDR0.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                 |
    +==========+==============================+========+=============+=============================+
    | 31:24    | MAC_B2                       | r/w    | 8'd0        | Ethernet MAC address byte 2 |
    +----------+------------------------------+--------+-------------+-----------------------------+
    | 23:16    | MAC_B3                       | r/w    | 8'd0        | Ethernet MAC address byte 3 |
    +----------+------------------------------+--------+-------------+-----------------------------+
    | 15:8     | MAC_B4                       | r/w    | 8'd0        | Ethernet MAC address byte 4 |
    +----------+------------------------------+--------+-------------+-----------------------------+
    | 7:0      | MAC_B5                       | r/w    | 8'd0        | Ethernet MAC address byte 5 |
    +----------+------------------------------+--------+-------------+-----------------------------+

MAC_ADDR1
-----------
 
**Addressï¼š**  0x20070044
 
.. figure:: ../../picture/emac_MAC_ADDR1.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                 |
    +==========+==============================+========+=============+=============================+
    | 31:16    | RSVD                         |        |             |                             |
    +----------+------------------------------+--------+-------------+-----------------------------+
    | 15:8     | MAC_B0                       | r/w    | 8'd0        | Ethernet MAC address byte 0 |
    +----------+------------------------------+--------+-------------+-----------------------------+
    | 7:0      | MAC_B1                       | r/w    | 8'd0        | Ethernet MAC address byte 1 |
    +----------+------------------------------+--------+-------------+-----------------------------+

HASH0_ADDR
------------
 
**Addressï¼š**  0x20070048
 
.. figure:: ../../picture/emac_HASH0_ADDR.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                   |
    +==========+==============================+========+=============+===============================+
    | 31:0     | HASH0                        | r/w    | 32'h0       | Lower 32-bit of HASH register |
    +----------+------------------------------+--------+-------------+-------------------------------+

HASH1_ADDR
------------
 
**Addressï¼š**  0x2007004c
 
.. figure:: ../../picture/emac_HASH1_ADDR.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                   |
    +==========+==============================+========+=============+===============================+
    | 31:0     | HASH1                        | r/w    | 32'h0       | Upper 32-bit of HASH register |
    +----------+------------------------------+--------+-------------+-------------------------------+

TXCTRL
--------
 
**Addressï¼š**  0x20070050
 
.. figure:: ../../picture/emac_TXCTRL.svg
   :align: center

.. table::
    :widths: 10, 15,10,10,55
    :width: 100%
    :align: center
     
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------+
    | Bit      | Name                         |Type    | Reset       | Description                                                                                               |
    +==========+==============================+========+=============+===========================================================================================================+
    | 31:17    | RSVD                         |        |             |                                                                                                           |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------+
    | 16       | TXPAUSERQ                    | r/w    | 1'b0        | TX Pause Request                                                                                          |
    +          +                              +        +             +                                                                                                           +
    |          |                              |        |             | Writing 1 to this bit starts sending control frame and is automatically cleared to zero.                  |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------+
    | 15:0     | TXPAUSETV                    | r/w    | 16'h0       | TX Pause Timer Value                                                                                      |
    +          +                              +        +             +                                                                                                           +
    |          |                              |        |             | The value that is sent in the pause control frame.                                                        |
    +----------+------------------------------+--------+-------------+-----------------------------------------------------------------------------------------------------------+

