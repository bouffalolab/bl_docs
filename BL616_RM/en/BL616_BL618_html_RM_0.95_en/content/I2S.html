<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>14. I2S &mdash; BL616/BL618 Reference Manual  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="15. AudioDAC" href="AudioDAC.html" />
    <link rel="prev" title="13. TIMER" href="TIMER.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL616/BL618 Reference Manual
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and Memory</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and Clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="GPIO.html">4. GPIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">5. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">6. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">7. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">8. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">9. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">10. UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2C.html">11. I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">12. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">13. TIMER</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">14. I2S</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#overview">14.1. Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="#features">14.2. Features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#functional-description">14.3. Functional Description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#data-formats">14.3.1. Data formats</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-single-channel-mode">14.3.2. I2S single channel mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-msb-lsb-justification">14.3.3. Data MSB/LSB justification</a></li>
<li class="toctree-l3"><a class="reference internal" href="#binaural-data-merge-and-exchange">14.3.4. Binaural data merge and exchange</a></li>
<li class="toctree-l3"><a class="reference internal" href="#silent-mode">14.3.5. Silent mode</a></li>
<li class="toctree-l3"><a class="reference internal" href="#clock-source">14.3.6. Clock source</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-interrupt">14.3.7. I2S Interrupt</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#register-description">14.4. Register description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2s-config">14.4.1. i2s_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-int-sts">14.4.2. i2s_int_sts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-bclk-config">14.4.3. i2s_bclk_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-fifo-config-0">14.4.4. i2s_fifo_config_0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-fifo-config-1">14.4.5. i2s_fifo_config_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-fifo-wdata">14.4.6. i2s_fifo_wdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-fifo-rdata">14.4.7. i2s_fifo_rdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s-io-config">14.4.8. i2s_io_config</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="AudioDAC.html">15. AudioDAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="AudioADC.html">16. AudioADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMAC.html">17. Emac</a></li>
<li class="toctree-l1"><a class="reference internal" href="USB.html">18. USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="Cam.html">19. CAM</a></li>
<li class="toctree-l1"><a class="reference internal" href="MJPEG.html">20. MJPEG</a></li>
<li class="toctree-l1"><a class="reference internal" href="DBI.html">21. DBI</a></li>
<li class="toctree-l1"><a class="reference internal" href="SDH.html">22. SDH</a></li>
<li class="toctree-l1"><a class="reference internal" href="SDIO.html">23. SDIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="LowPower.html">24. LowPower</a></li>
<li class="toctree-l1"><a class="reference internal" href="SEC_ENG.html">25. SEC ENG</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">26. Revision history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL616/BL618 Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">14. </span>I2S</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="i2s">
<h1><span class="section-number">14. </span>I2S<a class="headerlink" href="#i2s" title="Permalink to this headline"></a></h1>
<section id="overview">
<h2><span class="section-number">14.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this headline"></a></h2>
<p>InterIC Sound (I2S), also Integrated Interchip Sound (IIS), is a digital audio transmission specification defined by Philips in 1986 (revised in 1996) for transmitting digital audio data between internal devices of a system.
I2S is a simple digital interface protocol with no address or device selection mechanism and supports full-duplex peer-to-peer transmission. In the I2S bus, the device providing the clock (BCLK and FS) is the master device.
In most scenarios, there is a master device and a slave device on the I2S bus for unidirectional or bidirectional data transmission. However, in some special scenarios, only one master can provide the clock to control the data transmission between two slaves, which can precisely control the data flow.</p>
<p>The integrated I2S module of the chip is also compatible with the PCM/TDM format. Compared with I2S, which can only transmit two-channel audio data, the PCM/TDM interface expands the number of transmission channels through Time Division Multiplexing. The main difference between PCM/TDM and I2S lies in the position, length and frame length of the frame clock, and I2S can be considered as a special case of the PCM/TDM interface. However, PCM/TDM does not have a completely unified application standard, and different manufacturers may have slightly different applications.</p>
</section>
<section id="features">
<h2><span class="section-number">14.2. </span>Features<a class="headerlink" href="#features" title="Permalink to this headline"></a></h2>
<ul>
<li><p>Supports master and slave modes</p></li>
<li><p>Supported I2S protocol</p>
<blockquote>
<div><ul class="simple">
<li><p>Normal I2S (Philips format)</p></li>
<li><p>Left-Justified</p></li>
<li><p>Right-Justified</p></li>
<li><p>The channel slot and effective data width support 8/16/24/32 bits respectively, and the effective data width cannot be greater than the channel width</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Support PCM/TDM format, frame clock position and frame length can be adjusted flexibly, support up to 6 channels, compatible with most common modes</p>
<blockquote>
<div><ul class="simple">
<li><p>Support 2-channel, 3-channel, 4-channel and 6-channel modes, channel slot supports 8/16/24/32 bits</p></li>
<li><p>PCM/TDM Mode A, after the data is valid at FS, the second rising edge of BCLK is valid</p></li>
<li><p>PCM/TDM Mode B, after the data is valid at FS, the first rising edge of BCLK is valid</p></li>
<li><p>Long Frame Sync, long frame sync mode, FS pulse width is equal to the length of 1 Slot</p></li>
<li><p>Short Frame Sync, short frame sync mode, FS pulse width is equal to 1 BCLK cycle length</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Support 8/11.025/16/22.05/32/44.1/48/96/192 KHz sampling rate, and can achieve finer control by configuring clock source and frequency division coefficient</p></li>
<li><p>Support playback of monaural audio copied to dual-channel mode</p></li>
<li><p>Support merging of two-channel recording data below 8/16bits to improve FIFO usage efficiency</p></li>
<li><p>Support dynamic mute switching function</p></li>
<li><p>Support data MSB/LSB switching</p></li>
<li><p>Support to directly output the clock source, which can be used as MCLK, or output MCLK with the CLK_OUT function of GLB</p></li>
<li><p>Support output signal polarity inversion</p></li>
<li><p>Support DMA transfer mode</p></li>
<li><p>The data transmit/receive FIFO has a width of 32 bits and a depth of 16</p></li>
</ul>
</section>
<section id="functional-description">
<h2><span class="section-number">14.3. </span>Functional Description<a class="headerlink" href="#functional-description" title="Permalink to this headline"></a></h2>
<section id="data-formats">
<h3><span class="section-number">14.3.1. </span>Data formats<a class="headerlink" href="#data-formats" title="Permalink to this headline"></a></h3>
<p>The signal timing format of the I2S module is highly flexible and configurable, including the mode of the FS signal, the offset from the FS signal to valid data, the slot width and the valid data width, and is compatible with most common formats.
The I2S protocol is a two-channel mode, the FS signal length is equal to a slot, and the effective data length is less than or equal to the slot length. Among them, the valid data in the Normal format is left-aligned and will be offset by one bit relative to the FS signal.
Therefore, set the cr_fs_ch_cnt section of the i2s_config register to be dual-channel, set the FS signal length of the cr_fs_1t_mode section to be equal to Solt, set the cr_i2s_mode section to be data left-aligned, and set the cr_ofs_en and cr_ofs_cnt sections to be one-bit data offset, and the I2S protocol Normal format can be obtained. As shown below.</p>
<figure class="align-center" id="id1">
<img alt="../_images/I2sNormal.svg" src="../_images/I2sNormal.svg" /><figcaption>
<p><span class="caption-number">Fig. 14.1 </span><span class="caption-text">Normal I2S</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The left-justified format of the I2S protocol is similar to the Normal format, but there is no data offset. Valid data in the right-aligned format will be aligned to the right within the slot.
Therefore, on the basis of the Normal format, set the cr_ofs_en section of the i2s_config register to close the data offset to obtain the Left-Justified format, and then set the cr_i2s_mode section to right-align the data to obtain the Right-Justified format, as shown in the figure below.</p>
<figure class="align-center" id="id2">
<img alt="../_images/I2sLeftRight.svg" src="../_images/I2sLeftRight.svg" /><figcaption>
<p><span class="caption-number">Fig. 14.2 </span><span class="caption-text">I2S LeftJustified/RightJustified</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The configuration of PCM/TDM mode is more flexible. Set the cr_i2s_mode section of the i2s_config register to 2, that is, PCM/TDM mode, set the cr_fs_ch_cnt section to select the number of channels, and set the cr_fs_1t_mode section to select long frame synchronization (FS signal length equal to Slot) or short frame synchronization (FS signal length is one BCLK cycle) mode, set cr_ofs_en section and cr_ofs_cnt section to select data offset, generally define Mode A offset by 1 bit, Mode B has no offset, but the definitions of different manufacturers may be different. The figure below shows the timing of Mode B in Long/Short Frame Sync, shifting the data to the right by one bit is the timing of Mode A.</p>
<figure class="align-center" id="id3">
<img alt="../_images/I2sPcmTdm.svg" src="../_images/I2sPcmTdm.svg" /><figcaption>
<p><span class="caption-number">Fig. 14.3 </span><span class="caption-text">PCM/TDM mode</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="i2s-single-channel-mode">
<h3><span class="section-number">14.3.2. </span>I2S single channel mode<a class="headerlink" href="#i2s-single-channel-mode" title="Permalink to this headline"></a></h3>
<p>Usually I2S uses two-channel transmission, but there will be a waste of resources when using a single-channel device. After configuring the cr_mono_mode section of the i2s_config register as Mono mode, the mono mode will be used. It should be noted that both sending and receiving will use mono mode.
At this time, the data in the TX FIFO will be placed in the left and right channels at the same time, and the data received by the left channel or the right channel can be selected through the cr_mono_rx_ch segment of the i2s_config register.</p>
</section>
<section id="data-msb-lsb-justification">
<h3><span class="section-number">14.3.3. </span>Data MSB/LSB justification<a class="headerlink" href="#data-msb-lsb-justification" title="Permalink to this headline"></a></h3>
<p>Usually I2S uses MSB format to transmit data, but some modes of some manufacturers’ devices may use LSB format to transmit, and the format can be adjusted through the cr_endian bit of the i2s_config register.</p>
</section>
<section id="binaural-data-merge-and-exchange">
<h3><span class="section-number">14.3.4. </span>Binaural data merge and exchange<a class="headerlink" href="#binaural-data-merge-and-exchange" title="Permalink to this headline"></a></h3>
<p>When using the 8/16bit valid data of the I2S protocol, in order to increase the utilization efficiency of the FIFO, the dual-channel data can be merged through the cr_fifo_lr_merge section of the i2s_fifo_config_0 register. At this time, each data in the FIFO contains both left and right channel data. [0:15] is the left channel at 16bit, [16:31] is the right channel, [0:7] is the left channel at 8bit, and [8:15] is the right channel. At this time, the data width in DMA mode also needs to be adjusted accordingly.
In merge mode, the left and right channel output can be exchanged by controlling the cr_fifo_lr_exchg bit of the i2s_fifo_config_0 register.</p>
</section>
<section id="silent-mode">
<h3><span class="section-number">14.3.5. </span>Silent mode<a class="headerlink" href="#silent-mode" title="Permalink to this headline"></a></h3>
<p>In some scenarios, it is necessary to pause the playback, but to keep the playback progress continuously changing, the silent mode can meet this requirement. Enter the mute mode through the cr_mute_mode of the i2s_config register. During the mute period, the data transmission speed in the TX FIFO remains unchanged, but the sent data will be forced to remain as the last data before each channel is muted.</p>
</section>
<section id="clock-source">
<h3><span class="section-number">14.3.6. </span>Clock source<a class="headerlink" href="#clock-source" title="Permalink to this headline"></a></h3>
<p>The clock source of I2S is provided by audio PLL, and the clock divider is used to divide the clock source and then generate the clock signal to drive I2S, as shown below:</p>
<figure class="align-center" id="id4">
<img alt="../_images/I2SClk.svg" src="../_images/I2SClk.svg" /><figcaption>
<p><span class="caption-number">Fig. 14.4 </span><span class="caption-text">I2S clock</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="i2s-interrupt">
<h3><span class="section-number">14.3.7. </span>I2S Interrupt<a class="headerlink" href="#i2s-interrupt" title="Permalink to this headline"></a></h3>
<p>I2S supports the following interrupt control modes:</p>
<ul class="simple">
<li><p>TX FIFO request interrupt</p>
<ul>
<li><p>A TX FIFO request interrupt will be generated when TX_FIFO_CNT in I2S_FIFO_CONFIG_1 is greater than TX_FIFO_TH. When the condition is not met, the interrupt flag will be cleared automatically</p></li>
</ul>
</li>
<li><p>RX FIFO request interrupt</p>
<ul>
<li><p>A RX FIFO request interrupt will be generated when RX_FIFO_CNT in I2S_FIFO_CONFIG_1 is greater than RX_FIFO_TH. When the condition is not met, the interrupt flag will be cleared automatically</p></li>
</ul>
</li>
<li><p>Overrun/undderun error interrupt</p>
<ul>
<li><p>If the TX/RX FIFO overflows or underflows, it will trigger the error interrupt. When the error disappears, the flag bit will be cleared automatically</p></li>
</ul>
</li>
</ul>
<p>All the interrupt enable bits and interrupt flag bits of I2S are in the I2S_INT_STS register.</p>
</section>
</section>
<section id="register-description">
<h2><span class="section-number">14.4. </span>Register description<a class="headerlink" href="#register-description" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 44%" />
<col style="width: 56%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2s-config">i2s_config</a></p></td>
<td><p>I2S control</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2s-int-sts">i2s_int_sts</a></p></td>
<td><p>Interrupt control</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2s-bclk-config">i2s_bclk_config</a></p></td>
<td><p>Frequency division control</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2s-fifo-config-0">i2s_fifo_config_0</a></p></td>
<td><p>FIFO control 0</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2s-fifo-config-1">i2s_fifo_config_1</a></p></td>
<td><p>FIFO control 1</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2s-fifo-wdata">i2s_fifo_wdata</a></p></td>
<td><p>TX FIFO</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2s-fifo-rdata">i2s_fifo_rdata</a></p></td>
<td><p>RX FIFO</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2s-io-config">i2s_io_config</a></p></td>
<td><p>IO control</p></td>
</tr>
</tbody>
</table>
<section id="i2s-config">
<h3><span class="section-number">14.4.1. </span>i2s_config<a class="headerlink" href="#i2s-config" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab00</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_config.svg" src="../_images/i2s_i2s_config.svg" /></figure>
</section>
<section id="i2s-int-sts">
<h3><span class="section-number">14.4.2. </span>i2s_int_sts<a class="headerlink" href="#i2s-int-sts" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab04</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_int_sts.svg" src="../_images/i2s_i2s_int_sts.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:27</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>26</p></td>
<td><p>cr_i2s_fer_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2s_fer_int</p></td>
</tr>
<tr class="row-even"><td><p>25</p></td>
<td><p>cr_i2s_rxf_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2s_rxf_int</p></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td><p>cr_i2s_txf_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2s_txf_int</p></td>
</tr>
<tr class="row-even"><td><p>23:11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>10</p></td>
<td><p>cr_i2s_fer_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2s_fer_int</p></td>
</tr>
<tr class="row-even"><td><p>9</p></td>
<td><p>cr_i2s_rxf_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2s_rxf_int</p></td>
</tr>
<tr class="row-odd"><td><p>8</p></td>
<td><p>cr_i2s_txf_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2s_txf_int</p></td>
</tr>
<tr class="row-even"><td><p>7:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>i2s_fer_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2S TX/RX FIFO error interrupt, auto-cleared when FIFO overflow/underflow error flag is cleared</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>i2s_rxf_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2S RX FIFO ready (rx_fifo_cnt &gt; rx_fifo_th) interrupt, auto-cleared when data is popped</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>i2s_txf_int</p></td>
<td><p>r</p></td>
<td><p>1’b1</p></td>
<td><p>I2S TX FIFO ready (tx_fifo_cnt &gt; tx_fifo_th) interrupt, auto-cleared when data is pushed</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-bclk-config">
<h3><span class="section-number">14.4.3. </span>i2s_bclk_config<a class="headerlink" href="#i2s-bclk-config" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab10</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_bclk_config.svg" src="../_images/i2s_i2s_bclk_config.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:28</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>27:16</p></td>
<td><p>cr_bclk_div_h</p></td>
<td><p>r/w</p></td>
<td><p>12’d1</p></td>
<td><p>I2S BCLK active high period (unit: cycle of i2s_clk)</p></td>
</tr>
<tr class="row-even"><td><p>15:12</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>11:0</p></td>
<td><p>cr_bclk_div_l</p></td>
<td><p>r/w</p></td>
<td><p>12’d1</p></td>
<td><p>I2S BCLK active low period (unit: cycle of i2s_clk)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-fifo-config-0">
<h3><span class="section-number">14.4.4. </span>i2s_fifo_config_0<a class="headerlink" href="#i2s-fifo-config-0" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab80</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_fifo_config_0.svg" src="../_images/i2s_i2s_fifo_config_0.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>10</p></td>
<td rowspan="4"><p>cr_fifo_24b_lj</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>FIFO 24-bit data left-justified mode</p>
<p>1’b0: Right-justified, {8’h0, data[23:0]}</p>
<p>1’b1: Left-justified, {data[23:0], 8’h0}</p>
<p>Note: Valid only when cr_data_size = 2’d2 (24-bit)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>9</p></td>
<td rowspan="2"><p>cr_fifo_lr_exchg</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>The position of L/R channel data within each entry is exchanged if this bit is enabled</p>
<p>Can only be enabled if data size is 8 or 16 bits and csr_fifo_lr_merge is enabled</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>8</p></td>
<td rowspan="4"><p>cr_fifo_lr_merge</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>Each FIFO entry contains both L/R channel data if this bit is enabled</p>
<p>Can only be enabled if data size is 8 or 16 bits</p>
<p>Note: cr_fifo_lr_merge &amp;cr_mono_mode should NOT be enabled at the same time</p>
<p>Note: cr_fifo_lr_merge &amp;cr_fifo_l_shift should NOT be enabled at the same time</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>rx_fifo_underflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Underflow flag of RX FIFO, can be cleared by rx_fifo_clr</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>rx_fifo_overflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Overflow flag of RX FIFO, can be cleared by rx_fifo_clr</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>tx_fifo_underflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Underflow flag of TX FIFO, can be cleared by tx_fifo_clr</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>tx_fifo_overflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Overflow flag of TX FIFO, can be cleared by tx_fifo_clr</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>rx_fifo_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Clear signal of RX FIFO</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>tx_fifo_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Clear signal of TX FIFO</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>i2s_dma_rx_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of dma_rx_req/ack interface</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>i2s_dma_tx_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of dma_tx_req/ack interface</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-fifo-config-1">
<h3><span class="section-number">14.4.5. </span>i2s_fifo_config_1<a class="headerlink" href="#i2s-fifo-config-1" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab84</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_fifo_config_1.svg" src="../_images/i2s_i2s_fifo_config_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:28</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>27:24</p></td>
<td><p>rx_fifo_th</p></td>
<td><p>r/w</p></td>
<td><p>4’d0</p></td>
<td><p>RX FIFO threshold, dma_rx_req will not be asserted if tx_fifo_cnt is less than this value</p></td>
</tr>
<tr class="row-even"><td><p>23:20</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>19:16</p></td>
<td><p>tx_fifo_th</p></td>
<td><p>r/w</p></td>
<td><p>4’d0</p></td>
<td><p>TX FIFO threshold, dma_tx_req will not be asserted if tx_fifo_cnt is less than this value</p></td>
</tr>
<tr class="row-even"><td><p>15:13</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>12:8</p></td>
<td><p>rx_fifo_cnt</p></td>
<td><p>r</p></td>
<td><p>5’d0</p></td>
<td><p>RX FIFO available count</p></td>
</tr>
<tr class="row-even"><td><p>7:5</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>4:0</p></td>
<td><p>tx_fifo_cnt</p></td>
<td><p>r</p></td>
<td><p>5’d16</p></td>
<td><p>TX FIFO available count</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-fifo-wdata">
<h3><span class="section-number">14.4.6. </span>i2s_fifo_wdata<a class="headerlink" href="#i2s-fifo-wdata" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab88</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_fifo_wdata.svg" src="../_images/i2s_i2s_fifo_wdata.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>i2s_fifo_wdata</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td><p>TX FIFO write data port</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-fifo-rdata">
<h3><span class="section-number">14.4.7. </span>i2s_fifo_rdata<a class="headerlink" href="#i2s-fifo-rdata" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000ab8c</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_fifo_rdata.svg" src="../_images/i2s_i2s_fifo_rdata.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>i2s_fifo_rdata</p></td>
<td><p>r</p></td>
<td><p>32’h0</p></td>
<td><p>RX FIFO read data port</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s-io-config">
<h3><span class="section-number">14.4.8. </span>i2s_io_config<a class="headerlink" href="#i2s-io-config" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x2000abfc</p>
<figure class="align-center">
<img alt="../_images/i2s_i2s_io_config.svg" src="../_images/i2s_i2s_io_config.svg" /></figure>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="TIMER.html" class="btn btn-neutral float-left" title="13. TIMER" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="AudioDAC.html" class="btn btn-neutral float-right" title="15. AudioDAC" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2021.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>