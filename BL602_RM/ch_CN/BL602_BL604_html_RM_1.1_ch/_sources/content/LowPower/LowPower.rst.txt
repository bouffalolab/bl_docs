=========
LowPower
=========

概述
=====
低功耗是物联网应用的一项重要指标。芯片的处理器包含3种功耗模式，包含工作模式、
空闲省电模式和休眠模式，可以根据当前应用场景选择合适的功耗模式，降低芯片功耗延长电池寿命。

.. figure:: /content/LowPower/picture/pwr_st.png
   :align: center

   低功耗模式

主要特征
=========

- 时钟控制:GLB中对各外设的时钟控制，小范围的省电，响应速度较快
- 睡眠控制 (PDS) : 包含PDS1/2/3/7这4个等级，大范围省电，响应速度中等
- 深度睡眠控制 (HBN) : 包含HBN0/1/2/3这4个等级，全局省电，响应时间长

功能描述
==========
电源域
-----------
BL602中有7个电源域，每个电源域的主要功能如下所示：

- PD_AON_HBNCORE
   
   * 部分电源控制寄存器
   * 4KB的HBN_RAM，用于在进入PDS/HBN模式前保存程序数据，进入PDS/HBN后数据不会消失
   * PIR数字控制，PIR是热释电红外传感器，HBN区域内的一个外设，可以用作HBN唤醒源

- PD_AON_HBNRTC

   * 保留RC32K/XTAL32K控制寄存器
   * RTC可以用于唤醒，也可用于LED闪烁

- PD_AON
   
   * HBN状态机控制电源/隔离/复位/时钟
   * 保持内部电压输出选择
   * 引脚唤醒控制

- PD_CORE

   * HBN状态机控制电源/隔离/复位/时钟
   * 64KB保留RAM
   * WIFI/BLE计时器控制

- PD_CORE_MISC_DIG

   * 外设
   * 芯片全局寄存器

- PD_CPU

   * CPU/缓存控制器
   * ROM/高速RAM

- PD_WB

   * WIFI PHY/MAC
   * BLE PHY/MAC
   * 射频控制器

每个电源域都由8个不同的电源模式控制，具体的控制方式如下表所示：

.. table:: 电源模式

    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    |        |            | Power Domain                                                                                                        |
    +        +            +------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | NO.    | Scenario   |  PD_AON    | PD_AON_HBNRTC| PD_AON_HBNCORE | PD_CORE| PD_CORE_MISC_DIG | PD_CORE_MISC_ANA | PD_CPU     | PD_WB      |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 1      | Normal     |    ON      |     ON       |     ON         |   ON   |     ON           |   ON             | ON         |     ON     |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 2      | PDS1       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | ON         |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 3      | PDS2       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | OFF        |     ON     |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 4      | PDS3       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 5      | PDS7       |    ON      |     ON       |     ON         |    ON  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 6      | HBN0       |    ON      |     ON       |     ON         |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 7      | HBN1       |    ON      |     ON       |    OFF         |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 8      | HBN2       |    ON      |     OFF      |     OFF        |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 9      | HBN3       |    OFF     |     OFF      |     OFF        |   OFF  |     OFF          |  OFF             | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+

唤醒源
------------
芯片内部支持多种唤醒源，可从不同电源模式中唤醒。

PDS1/2/3可以通过以下方式唤醒：

- HBN唤醒源
- 所有GPIO唤醒
- 红外接收器
- BLE唤醒事件
- WIFI唤醒事件
- PDS计时器

其余电源模式的唤醒源如下表所示：

.. table:: 唤醒源

    +----------+--------------------+
    | 电源模式 | 唤醒源             |
    +----------+--------------------+
    | PDS7     | 只能被PDS计时器唤醒|
    +----------+--------------------+
    | HBN0     | HBN                |
    +----------+--------------------+
    | HBN1     | RTC/AON_WAKEUP_PIN |
    +----------+--------------------+
    | HBN2     | AON_WAKEUP_PIN     |
    +----------+--------------------+
    | HBN3     | -                  |
    +----------+--------------------+

功耗模式
------------
**工作模式**

芯片提供处理器与外设独立的时钟控制，在 GLB 和时钟的章节介绍对各模块的时钟控制，
软件可以根据当前应用场景，对于不需要使用的处理器或外设进行时钟控制。时钟控制
的反应是实时的，在此工作模式下，不需要担心响应时间。

**掉电睡眠模式(PDS)**

掉电模式相较于工作模式功耗较低。进入PDS模式后，将 RTC(Real Time Clock) 之外的时钟进行管控，会切换为内部低速时钟，并将外部晶振与PLL
关闭达到更加省电的状态，因此进入与离开此低功耗模式会有时间延迟。

1. 进入空闲省电模式

软件可通过 PDS 配置让此模块进入掉电模式，等待处理，进入等待中断模式 (WFI) 后，PDS 模
块会触发时钟控制模块进入gate clock操作，并通知模拟电路关闭PLL以及外部晶振

2. 离开空闲省电模式

离开空闲省电模式的方式有两种，第一是空闲中间有特定的中断或事件打断空闲状态，第二是软件设定PDS_TIM
的空闲时间达到，两者均会触发 PDS 模块进入或离开掉电模式。注意：因为打开晶振需要
约 1ms 的时间，PDS 提供软件提前打开晶振的方式，这个做法可以加速 PDS 醒来，当 PDS
模块准备醒来时，此模块会通过中断通知处理器离开等待中断模式 (WFI)。

**休眠模式(HBN)**

休眠模式在保留 AON(Always On) 电源的状态下，将大部分的芯片逻辑进行断电 (Vcore)，直到收到外
部事件才会将内部电路唤醒的。
在休眠模式下可以达到极致的省电状态，但相对于前两者需要的响应时间也最长，适合长时间不需要工作
的状态下，可以进入此状态，延长电池寿命。
休眠时期会将大部分的电路断电，对应的寄存器值和内存的数据也会消失。因此 HBN 内部留有 4KB HBN_RAM，这个
内存在休眠状态时不会断电，软件有需要保存的资料或状态可以在进入休眠前拷贝到这个内存。从休眠
恢复时，可以直接从 RAM 中存取数据，通常可以用作状态的纪录或是数据快速恢复。


PDS寄存器描述
====================

+-------------+-----------------------+
| 名称        | 描述                  |
+-------------+-----------------------+
| `PDS_CTL`_  | PDS control register  |
+-------------+-----------------------+
| `PDS_CTL4`_ | PDS control register4 |
+-------------+-----------------------+
| `pds_stat`_ | PDS status register   |
+-------------+-----------------------+

PDS_CTL
---------
 
**地址：**  0x4000e000
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                              | PDSS      |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------+
| 位       | 名称     |权限    | 复位值      | 描述      |
+----------+----------+--------+-------------+-----------+
| 31:1     | RSVD     |        |             |           |
+----------+----------+--------+-------------+-----------+
| 0        | PDSS     | W1P    | 0           | Enter PDS |
+----------+----------+--------+-------------+-----------+

PDS_CTL4
----------
 
**地址：**  0x4000e018
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                          | MGCLK     | MMSS      | MIRE      | MIPO      | RSVD                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| WGCLK     | WMSS      | WRE       | WPO       | RSVD                                                                                          | NPGCLK    | NMSS      | NPRE      | NPPO      |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                                 |
+----------+----------+--------+-------------+------------------------------------------------------+
| 31:28    | RSVD     |        |             |                                                      |
+----------+----------+--------+-------------+------------------------------------------------------+
| 27       | MGCLK    | R/W    | 1           | 1 : make core_misc clock gated at PDS Sleep state    |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make core_misc clocking at PDS Sleep state       |
+----------+----------+--------+-------------+------------------------------------------------------+
| 26       | MMSS     | R/W    | 1           | 1 : make core_misc RAM @Retention at PDS Sleep state |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make core_misc RAM @ Normal at PDS Sleep state   |
+----------+----------+--------+-------------+------------------------------------------------------+
| 25       | MIRE     | R/W    | 1           | 1 : make core_misc reset at PDS Sleep state          |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make core_misc not reset at PDS Sleep state      |
+----------+----------+--------+-------------+------------------------------------------------------+
| 24       | MIPO     | R/W    | 1           | 1 : make core_misc Power off at PDS Sleep state      |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make core_misc power on at PDS Sleep state       |
+----------+----------+--------+-------------+------------------------------------------------------+
| 23:16    | RSVD     |        |             |                                                      |
+----------+----------+--------+-------------+------------------------------------------------------+
| 15       | WGCLK    | R/W    | 1           | 1 : make WB clock gated at PDS Sleep state           |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make WB clocking at PDS Sleep state              |
+----------+----------+--------+-------------+------------------------------------------------------+
| 14       | WMSS     | R/W    | 1           | 1 : make WB RAM @Retention at PDS Sleep state        |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make WB RAM @ Normal at PDS Sleep state          |
+----------+----------+--------+-------------+------------------------------------------------------+
| 13       | WRE      | R/W    | 1           | 1 : make WB reset at PDS Sleep state                 |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make WB not reset at PDS Sleep state             |
+----------+----------+--------+-------------+------------------------------------------------------+
| 12       | WPO      | R/W    | 1           | 1 : make WB Power off at PDS Sleep state             |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make WB power on at PDS Sleep state              |
+----------+----------+--------+-------------+------------------------------------------------------+
| 11:4     | RSVD     |        |             |                                                      |
+----------+----------+--------+-------------+------------------------------------------------------+
| 3        | NPGCLK   | R/W    | 1           | 1 : make NP clock gated at PDS Sleep state           |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make NP clocking at PDS Sleep state              |
+----------+----------+--------+-------------+------------------------------------------------------+
| 2        | NMSS     | R/W    | 1           | 1 : make NP RAM @Retention at PDS Sleep state        |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make NP RAM @ Normal at PDS Sleep state          |
+----------+----------+--------+-------------+------------------------------------------------------+
| 1        | NPRE     | R/W    | 1           | 1 : make NP reset at PDS Sleep state                 |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make NP not reset at PDS Sleep state             |
+----------+----------+--------+-------------+------------------------------------------------------+
| 0        | NPPO     | R/W    | 1           | 1 : make NP Power off at PDS Sleep state             |
+          +          +        +             +                                                      +
|          |          |        |             | 0 : make NP power on at PDS Sleep state              |
+----------+----------+--------+-------------+------------------------------------------------------+

pds_stat
----------
 
**地址：**  0x4000e01c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                  | PLLSTA                |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                          | RFSTA                                         | RSVD                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                              |
+----------+----------+--------+-------------+-----------------------------------+
| 31:18    | RSVD     |        |             |                                   |
+----------+----------+--------+-------------+-----------------------------------+
| 17:16    | PLLSTA   | R      | 2'B00       | ST_PDS_PLL_OFF      = 2'b00   ;   |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PLL_SFREG = 2'b01   ;      |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PLL_PU        = 2'b10   ;  |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PLL_RDY      = 2'b11   ;   |
+----------+----------+--------+-------------+-----------------------------------+
| 15:12    | RSVD     |        |             |                                   |
+----------+----------+--------+-------------+-----------------------------------+
| 11:8     | RFSTA    | R      | 4'B0        | ST_PDS_RF_OFF         = 4'b0000 ; |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PU_MBG         = 4'b0001 ; |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PU_LDO15RF = 4'b0011 ;     |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_PU_SFREG     = 4'b0111 ;   |
+          +          +        +             +                                   +
|          |          |        |             | ST_PDS_WB_EN_AON  = 4'b1111 ;     |
+----------+----------+--------+-------------+-----------------------------------+
| 7:0      | RSVD     |        |             |                                   |
+----------+----------+--------+-------------+-----------------------------------+

HBN寄存器描述
====================

+-----------------+------------------------+
| 名称            | 描述                   |
+-----------------+------------------------+
| `HBN_CTL`_      | HBN control            |
+-----------------+------------------------+
| `HBN_TIME_L`_   | HBN time lower 32-bit  |
+-----------------+------------------------+
| `HBN_TIME_H`_   | HBN time higher 8-bit  |
+-----------------+------------------------+
| `RTC_TIME_L`_   | RTL timer lower 32-bit |
+-----------------+------------------------+
| `RTC_TIME_H`_   | RTL timer higher 8-bit |
+-----------------+------------------------+
| `HBN_IRQ_MODE`_ | HBN interrupt Control  |
+-----------------+------------------------+
| `HBN_IRQ_STAT`_ | HBN interrupt Status   |
+-----------------+------------------------+
| `HBN_IRQ_CLR`_  | HBN interrupt Clear    |
+-----------------+------------------------+
| `HBN_PIR_CFG`_  | PIR control            |
+-----------------+------------------------+
| `HBN_PIR_VTH`_  | PIR threshold          |
+-----------------+------------------------+
| `HBN_GLB`_      | HBN clock control      |
+-----------------+------------------------+
| `HBN_SRAM`_     | HBN sram control       |
+-----------------+------------------------+

HBN_CTL
---------
 
**地址：**  0x4000f000
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                              | SWRST     | RSVD                                          | MODE      | RTCCTL                                                                            |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-------------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                            |
+----------+----------+--------+-------------+-------------------------------------------------+
| 31:13    | RSVD     |        |             |                                                 |
+----------+----------+--------+-------------+-------------------------------------------------+
| 12       | SWRST    | R/W    | 0           | soft reset                                      |
+----------+----------+--------+-------------+-------------------------------------------------+
| 11:8     | RSVD     |        |             |                                                 |
+----------+----------+--------+-------------+-------------------------------------------------+
| 7        | MODE     | W      | 0           | Enter hibernate                                 |
+----------+----------+--------+-------------+-------------------------------------------------+
| 6:0      | RTCCTL   | R/W    | 7'H0        | [6:4] Slow LED, x/0.25/0.5/1/2/4/8/16 seconds   |
+          +          +        +             +                                                 +
|          |          |        |             | [3] rtc long time 0~353days (bit 39~13 compare) |
+          +          +        +             +                                                 +
|          |          |        |             | [2] rtc short time 0~488s (bit 23~0 compare)    |
+          +          +        +             +                                                 +
|          |          |        |             | [1] rtc time 0~353days (bit 39~0 compare)       |
+          +          +        +             +                                                 +
|          |          |        |             | [0] rtc enable                                  |
+----------+----------+--------+-------------+-------------------------------------------------+

HBN_TIME_L
------------
 
**地址：**  0x4000f004
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| TIML                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| TIML                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+----------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                       |
+----------+----------+--------+-------------+----------------------------+
| 31:0     | TIML     | R/W    | 32'H0       | RTC timer compare bit 31:0 |
+----------+----------+--------+-------------+----------------------------+

HBN_TIME_H
------------
 
**地址：**  0x4000f008
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | TIMH                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                        |
+----------+----------+--------+-------------+-----------------------------+
| 31:8     | RSVD     |        |             |                             |
+----------+----------+--------+-------------+-----------------------------+
| 7:0      | TIMH     | R/W    | 8'H0        | RTC timer compare bit 39:32 |
+----------+----------+--------+-------------+-----------------------------+

RTC_TIME_L
------------
 
**地址：**  0x4000f00c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLATL                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLATL                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+---------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                            |
+----------+----------+--------+-------------+---------------------------------+
| 31:0     | RTLATL   | R      | 32'H0       | RTC time latched value bit 31:0 |
+----------+----------+--------+-------------+---------------------------------+

RTC_TIME_H
------------
 
**地址：**  0x4000f010
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLAT     | RSVD                                                                                                                                                                              |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | RTLATH                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+----------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                             |
+----------+----------+--------+-------------+----------------------------------+
| 31       | RTLAT    | W      | 0           | RTC time latch for SW read       |
+----------+----------+--------+-------------+----------------------------------+
| 30:8     | RSVD     |        |             |                                  |
+----------+----------+--------+-------------+----------------------------------+
| 7:0      | RTLATH   | R      | 8'H0        | RTC time latched value bit 39:32 |
+----------+----------+--------+-------------+----------------------------------+

HBN_IRQ_MODE
--------------
 
**地址：**  0x4000f014
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | IRACO1EN              | IRACO0EN              | RSVD      | BOREN     | RSVD                  |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+---------------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                              |
+----------+----------+--------+-------------+---------------------------------------------------+
| 31:24    | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+
| 23:22    | IRACO1EN | R/W    | 0           | enable acomp1 interrupt [20] posedge [21] negedge |
+----------+----------+--------+-------------+---------------------------------------------------+
| 21:20    | IRACO0EN | R/W    | 0           | enable acomp0 interrupt [20] posedge [21] negedge |
+----------+----------+--------+-------------+---------------------------------------------------+
| 19       | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+
| 18       | BOREN    | R/W    | 0           | enable brown-out interrupt                        |
+----------+----------+--------+-------------+---------------------------------------------------+
| 17:0     | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+

HBN_IRQ_STAT
--------------
 
**地址：**  0x4000f018
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQSTA                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQSTA                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                     |
+----------+----------+--------+-------------+------------------------------------------+
| 31:0     | IRQSTA   | R      | 0           | [22] acomp1                              |
+          +          +        +             +                                          +
|          |          |        |             | [20] acomp0                              |
+          +          +        +             +                                          +
|          |          |        |             | [18] brown-out                           |
+          +          +        +             +                                          +
|          |          |        |             | [17] irq_pir state                       |
+          +          +        +             +                                          +
|          |          |        |             | [16] irq_rtc state                       |
+          +          +        +             +                                          +
|          |          |        |             | [1:0] hbn_pin_wakeup state (GPIO8/GPIO7) |
+----------+----------+--------+-------------+------------------------------------------+

HBN_IRQ_CLR
-------------
 
**地址：**  0x4000f01c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQCLR                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQCLR                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                     |
+----------+----------+--------+-------------+------------------------------------------+
| 31:0     | IRQCLR   | W      | 0           | [22] irq_acomp1 clear                    |
+          +          +        +             +                                          +
|          |          |        |             | [20] irq_acomp0 clear                    |
+          +          +        +             +                                          +
|          |          |        |             | [18] irq_bor clear                       |
+          +          +        +             +                                          +
|          |          |        |             | [17] irq_pir clear                       |
+          +          +        +             +                                          +
|          |          |        |             | [16] irq_rtc clear                       |
+          +          +        +             +                                          +
|          |          |        |             | [1:0] hbn_pin_wakeup clear (GPIO8/GPIO7) |
+----------+----------+--------+-------------+------------------------------------------+

HBN_PIR_CFG
-------------
 
**地址：**  0x4000f020
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | PIREN     | RSVD                                                                              |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------+
| 位       | 名称     |权限    | 复位值      | 描述       |
+----------+----------+--------+-------------+------------+
| 31:8     | RSVD     |        |             |            |
+----------+----------+--------+-------------+------------+
| 7        | PIREN    | R/W    | 0           | pir enable |
+----------+----------+--------+-------------+------------+
| 6:0      | RSVD     |        |             |            |
+----------+----------+--------+-------------+------------+

HBN_PIR_VTH
-------------
 
**地址：**  0x4000f024
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                  | PIRVTH                                                                                                                                                                |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------+
| 位       | 名称     |权限    | 复位值      | 描述                  |
+----------+----------+--------+-------------+-----------------------+
| 31:14    | RSVD     |        |             |                       |
+----------+----------+--------+-------------+-----------------------+
| 13:0     | PIRVTH   | R/W    | 14'H3FF     | PIR compare threshold |
+----------+----------+--------+-------------+-----------------------+

HBN_GLB
---------
 
**地址：**  0x4000f030
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                              | F32KSEL               | UARTSOC   | ROOTSOC               |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------------------------------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                                                             |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 31:5     | RSVD     |        |             |                                                                  |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 4:3      | F32KSEL  | R/W    | 0           | 32KHz clock source selection (0: RC32K  1: XTAL 32K  3: DIG 32K) |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 2        | UARTSOC  | R/W    | 0           | uart clock source selection (0: bclk  1: PLL 160MHz)             |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 1:0      | ROOTSOC  | R/W    | 0           | root clock source selection (0: RC32M  1: XTAL  2/3: PLL)        |
+----------+----------+--------+-------------+------------------------------------------------------------------+

HBN_SRAM
----------
 
**地址：**  0x4000f034
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | RETRSLP   | RETRRET   | RSVD                                                                  |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------+
| 位       | 名称     |权限    | 复位值      | 描述                   |
+----------+----------+--------+-------------+------------------------+
| 31:8     | RSVD     |        |             |                        |
+----------+----------+--------+-------------+------------------------+
| 7        | RETRSLP  | R/W    | 0           | SRAM sleep control     |
+----------+----------+--------+-------------+------------------------+
| 6        | RETRRET  | R/W    | 0           | SRAM retention control |
+----------+----------+--------+-------------+------------------------+
| 5:0      | RSVD     |        |             |                        |
+----------+----------+--------+-------------+------------------------+

