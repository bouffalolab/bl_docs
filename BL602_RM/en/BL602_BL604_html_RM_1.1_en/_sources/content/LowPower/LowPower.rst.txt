=========
LowPower
=========

Introduction
================
Low power consumption is an important indicator for IoT applications. The chip's processor contains three power consumption modes, including working mode, idle power saving mode and sleep mode. You can select the appropriate power consumption mode according to the current application scenario, reduce chip power consumption and extend battery life.

.. figure:: /content/LowPower/picture/pwr_st.png
   :align: center

   Low power mode

Main features
==================

- Clock control: GLB clock control for each peripheral device, small range of power saving, fast response speed

- Sleep control(PDS): Contains 4 levels of PDS1/2/3/7,wide range of power saving, medium response speed

- Deep Sleep Control(HBN): Contains 4 levels of HBN0/1/2/3,global power saving, long response time

Function description
========================
Power domain
-----------------
There are 7 power domains in BL602. The main functions of each power domain are as follows:

- PD_AON_HBNCORE
   
   * Some power control registers
   * 4KB HBN_RAM, used to save program data before entering PDS / HBN mode, the data will not disappear after entering PDS / HBN
   * PIR digital control, PIR is a pyroelectric infrared sensor, a peripheral in the HBN area, can be used as a HBN wakeup source

- PD_AON_HBNRTC

   * Reserve RC32K / XTAL32K control register
   * RTC can be used to wake up, can also be used for LED flashing

- PD_AON
   
   * HBN state machine control power / isolation / reset / clock
   * Maintain internal voltage output selection
   * Pin wake-up control

- PD_CORE

   * HBN state machine control power / isolation / reset / clock
   * 64KB reserved RAM
   * WIFI / BLE timer control

- PD_CORE_MISC_DIG

   * Peripherals
   * Chip global register

- PD_CPU

   * CPU / Cache Controller
   * ROM / high-speed RAM

- PD_WB

   * WIFI PHY / MAC
   * BLE PHY / MAC
   * RF controller

Each power domain is controlled by 8 different power modes, the specific control method is shown in the following table:

.. table:: Power mode

    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    |        |            | Power Domain                                                                                                        |
    +        +            +------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | NO.    | Scenario   |  PD_AON    | PD_AON_HBNRTC| PD_AON_HBNCORE | PD_CORE| PD_CORE_MISC_DIG | PD_CORE_MISC_ANA | PD_CPU     | PD_WB      |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 1      | Normal     |    ON      |     ON       |     ON         |   ON   |     ON           |   ON             | ON         |     ON     |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 2      | PDS1       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | ON         |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 3      | PDS2       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | OFF        |     ON     |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 4      | PDS3       |    ON      |     ON       |     ON         |    ON  |     ON           |   ON             | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 5      | PDS7       |    ON      |     ON       |     ON         |    ON  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 6      | HBN0       |    ON      |     ON       |     ON         |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 7      | HBN1       |    ON      |     ON       |    OFF         |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 8      | HBN2       |    ON      |     OFF      |     OFF        |   OFF  |     OFF          |   OFF            | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+
    | 9      | HBN3       |    OFF     |     OFF      |     OFF        |   OFF  |     OFF          |  OFF             | OFF        |     OFF    |
    +--------+------------+------------+--------------+----------------+--------+------------------+------------------+------------+------------+

Wakeup source
----------------
The chip supports multiple wake-up sources and can wake up from different power modes.

PDS1/2/3 can be awakened by:

- HBN wakeup source
- Wake up from all GPIOs
- Infrared receiver
- BLE wakeup event
- WIFI wake-up event
- PDS timer

The wake-up sources of the remaining power modes are shown in the following table:

.. table:: Wakeup source

    +----------+---------------------------------------+
    |Power mode| Wakeup source                         |
    +----------+---------------------------------------+
    | PDS7     | Can only be awakened by the PDS timer |
    +----------+---------------------------------------+
    | HBN0     | HBN                                   |
    +----------+---------------------------------------+
    | HBN1     | RTC/AON_WAKEUP_PIN                    |
    +----------+---------------------------------------+
    | HBN2     | AON_WAKEUP_PIN                        |
    +----------+---------------------------------------+
    | HBN3     | -                                     |
    +----------+---------------------------------------+

Power mode
--------------
**Operating mode**

The chip provides independent clock control for the processor and peripherals. The clock control for each module is introduced in the GLB and Clock chapters. The software can perform clock control for processors or peripherals that do not need to be used according to the current application scenario. The response of the clock control is real-time, in this working mode, there is no need to worry about the response time.

**Power-down sleep mode (PDS)**

Compared with the working mode, the power-down mode consumes less power. After entering the PDS mode, the clocks other than RTC (Real Time Clock) will be controlled and will be switched to the internal low-speed clock, and the external crystal and PLL will be turned off to achieve a more power-saving state. Therefore, entering and leaving this low-power mode will There is a time delay.

1. Enter idle power saving mode

Software can put this module into power-down mode through PDS configuration and wait for processing. After entering the wait interrupt mode (WFI), the PDS module will trigger the clock control module to enter the gate clock operation and notify the analog circuit to turn off the PLL and external crystal oscillator.

2. Leave idle power saving mode

There are two ways to leave the idle power saving mode. The first is that there is a specific interruption or event in the idle to interrupt the idle state. The second is that the software sets the idle time of PDS_TIM to be reached. Both will trigger the PDS module to enter or leave the power-down mode. Note: Because it takes about 1ms to turn on the crystal oscillator, PDS provides software to turn on the crystal oscillator in advance. This method can speed up the wake up of the PDS. When the PDS module is ready to wake up, the module will notify the processor to leave the wait interrupt mode (WFI) through an interrupt. ).

**Sleep Mode (HBN)**

In the sleep mode, while keeping AON (Always On) power, most of the chip logic is powered off (Vcore), and the internal circuit will not be woken up until an external event is received.

In sleep mode, the ultimate power saving state can be achieved, but the response time required by the previous two modes is also the longest. It is suitable for the state that does not need to work for a long time.

During the sleep period, most circuits will be powered off, and the corresponding register values ​​and memory data will also disappear. Therefore, 4KB HBN_RAM is reserved inside HBN. This memory will not be powered off when it is in sleep state. The software needs to save the data or state that can be copied to this memory before entering sleep. When restoring from hibernation, data can be directly accessed from RAM, and it can usually be used as a state record or a quick data recovery.

PDS Register description
==========================

+-------------+-----------------------+
| Name        | Description           |
+-------------+-----------------------+
| `PDS_CTL`_  | PDS control register  |
+-------------+-----------------------+
| `PDS_CTL4`_ | PDS control register4 |
+-------------+-----------------------+
| `pds_stat`_ | PDS status register   |
+-------------+-----------------------+

PDS_CTL
---------
 
**Address：**  0x4000e000
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                              | PDSS      |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------+
| Bit      | Name     |Type    | Reset       | Description|
+----------+----------+--------+-------------+-----------+
| 31:1     | RSVD     |        |             |           |
+----------+----------+--------+-------------+-----------+
| 0        | PDSS     | W1P    | 0           | Enter PDS |
+----------+----------+--------+-------------+-----------+

PDS_CTL4
----------
 
**Address：**  0x4000e018
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                          | MGCLK     | MMSS      | MIRE      | MIPO      | RSVD                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| WGCLK     | WMSS      | WRE       | WPO       | RSVD                                                                                          | NPGCLK    | NMSS      | NPRE      | NPPO      |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                                                             |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 31:28    | RSVD     |        |             |                                                                                                         |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 27       | MGCLK    | R/W    | 1           | 1 : make core_misc clock gated at PDS Sleep state                                                       |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make core_misc clocking at PDS Sleep state                                                          |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 26       | MMSS     | R/W    | 1           | 1 : make core_misc RAM @Retention at PDS Sleep state                                                    |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make core_misc RAM @ Normal at PDS Sleep state                                                      |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 25       | MIRE     | R/W    | 1           | 1 : make core_misc reset at PDS Sleep state                                                             |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make core_misc not reset at PDS Sleep state                                                         |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 24       | MIPO     | R/W    | 1           | 1 : make core_misc Power off at PDS Sleep state                                                         |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make core_misc power on at PDS Sleep state                                                          |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 23:16    | RSVD     |        |             |                                                                                                         |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 15       | WGCLK    | R/W    | 1           | 1 : make WB clock gated at PDS Sleep state                                                              |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make WB clocking at PDS Sleep state                                                                 |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 14       | WMSS     | R/W    | 1           | 1 : make WB RAM @Retention at PDS Sleep state                                                           |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make WB RAM @ Normal at PDS Sleep state                                                             |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 13       | WRE      | R/W    | 1           | 1 : make WB reset at PDS Sleep state                                                                    |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make WB not reset at PDS Sleep state                                                                |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 12       | WPO      | R/W    | 1           | 1 : make WB Power off at PDS Sleep state                                                                |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make WB power on at PDS Sleep state                                                                 |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 11:4     | RSVD     |        |             |                                                                                                         |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 3        | NPGCLK   | R/W    | 1           | 1 : make NP clock gated at PDS Sleep state                                                              |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make NP clocking at PDS Sleep state                                                                 |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 2        | NMSS     | R/W    | 1           | 1 : make NP RAM @Retention at PDS Sleep state                                                           |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make NP RAM @ Normal at PDS Sleep state                                                             |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 1        | NPRE     | R/W    | 1           | 1 : make NP reset at PDS Sleep state                                                                    |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make NP not reset at PDS Sleep state                                                                |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+
| 0        | NPPO     | R/W    | 1           | 1 : make NP Power off at PDS Sleep state                                                                |
+          +          +        +             +                                                                                                         +
|          |          |        |             | 0 : make NP power on at PDS Sleep state                                                                 |
+----------+----------+--------+-------------+---------------------------------------------------------------------------------------------------------+

pds_stat
----------
 
**Address：**  0x4000e01c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                  | PLLSTA                |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                          | RFSTA                                         | RSVD                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                                                                                                                     |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 31:18    | RSVD     |        |             |                                                                                                                                                                 |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 17:16    | PLLSTA   | R      | 2'B00       | ST_PDS_PLL_OFF      = 2'b00   ;                                                                                                                                 |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PLL_SFREG = 2'b01   ;                                                                                                                                    |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PLL_PU        = 2'b10   ;                                                                                                                                |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PLL_RDY      = 2'b11   ;                                                                                                                                 |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 15:12    | RSVD     |        |             |                                                                                                                                                                 |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 11:8     | RFSTA    | R      | 4'B0        | ST_PDS_RF_OFF         = 4'b0000 ;                                                                                                                               |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PU_MBG         = 4'b0001 ;                                                                                                                               |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PU_LDO15RF = 4'b0011 ;                                                                                                                                   |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_PU_SFREG     = 4'b0111 ;                                                                                                                                 |
+          +          +        +             +                                                                                                                                                                 +
|          |          |        |             | ST_PDS_WB_EN_AON  = 4'b1111 ;                                                                                                                                   |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7:0      | RSVD     |        |             |                                                                                                                                                                 |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------+

HBN Register description
==========================

+-----------------+------------------------+
| Name            | Description            |
+-----------------+------------------------+
| `HBN_CTL`_      | HBN control            |
+-----------------+------------------------+
| `HBN_TIME_L`_   | HBN time lower 32-bit  |
+-----------------+------------------------+
| `HBN_TIME_H`_   | HBN time higher 8-bit  |
+-----------------+------------------------+
| `RTC_TIME_L`_   | RTL timer lower 32-bit |
+-----------------+------------------------+
| `RTC_TIME_H`_   | RTL timer higher 8-bit |
+-----------------+------------------------+
| `HBN_IRQ_MODE`_ | HBN interrupt Control  |
+-----------------+------------------------+
| `HBN_IRQ_STAT`_ | HBN interrupt Status   |
+-----------------+------------------------+
| `HBN_IRQ_CLR`_  | HBN interrupt Clear    |
+-----------------+------------------------+
| `HBN_PIR_CFG`_  | PIR control            |
+-----------------+------------------------+
| `HBN_PIR_VTH`_  | PIR threshold          |
+-----------------+------------------------+
| `HBN_GLB`_      | HBN clock control      |
+-----------------+------------------------+
| `HBN_SRAM`_     | HBN sram control       |
+-----------------+------------------------+

HBN_CTL
---------
 
**Address：**  0x4000f000
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                              | SWRST     | RSVD                                          | MODE      | RTCCTL                                                                            |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                                                                                                                                                         |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 31:13    | RSVD     |        |             |                                                                                                                                                                                                     |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 12       | SWRST    | R/W    | 0           | soft reset                                                                                                                                                                                          |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 11:8     | RSVD     |        |             |                                                                                                                                                                                                     |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 7        | MODE     | W      | 0           | Enter hibernate                                                                                                                                                                                     |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 6:0      | RTCCTL   | R/W    | 7'H0        | [6:4] Slow LED, x/0.25/0.5/1/2/4/8/16 seconds                                                                                                                                                       |
+          +          +        +             +                                                                                                                                                                                                     +
|          |          |        |             | [3] rtc long time 0~353days (bit 39~13 compare)                                                                                                                                                     |
+          +          +        +             +                                                                                                                                                                                                     +
|          |          |        |             | [2] rtc short time 0~488s (bit 23~0 compare)                                                                                                                                                        |
+          +          +        +             +                                                                                                                                                                                                     +
|          |          |        |             | [1] rtc time 0~353days (bit 39~0 compare)                                                                                                                                                           |
+          +          +        +             +                                                                                                                                                                                                     +
|          |          |        |             | [0] rtc enable                                                                                                                                                                                      |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

HBN_TIME_L
------------
 
**Address：**  0x4000f004
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| TIML                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| TIML                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+----------------------------+
| Bit      | Name     |Type    | Reset       | Description                |
+----------+----------+--------+-------------+----------------------------+
| 31:0     | TIML     | R/W    | 32'H0       | RTC timer compare bit 31:0 |
+----------+----------+--------+-------------+----------------------------+

HBN_TIME_H
------------
 
**Address：**  0x4000f008
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | TIMH                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------+
| Bit      | Name     |Type    | Reset       | Description                 |
+----------+----------+--------+-------------+-----------------------------+
| 31:8     | RSVD     |        |             |                             |
+----------+----------+--------+-------------+-----------------------------+
| 7:0      | TIMH     | R/W    | 8'H0        | RTC timer compare bit 39:32 |
+----------+----------+--------+-------------+-----------------------------+

RTC_TIME_L
------------
 
**Address：**  0x4000f00c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLATL                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLATL                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+---------------------------------+
| Bit      | Name     |Type    | Reset       | Description                     |
+----------+----------+--------+-------------+---------------------------------+
| 31:0     | RTLATL   | R      | 32'H0       | RTC time latched value bit 31:0 |
+----------+----------+--------+-------------+---------------------------------+

RTC_TIME_H
------------
 
**Address：**  0x4000f010
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RTLAT     | RSVD                                                                                                                                                                              |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | RTLATH                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+----------------------------------+
| Bit      | Name     |Type    | Reset       | Description                      |
+----------+----------+--------+-------------+----------------------------------+
| 31       | RTLAT    | W      | 0           | RTC time latch for SW read       |
+----------+----------+--------+-------------+----------------------------------+
| 30:8     | RSVD     |        |             |                                  |
+----------+----------+--------+-------------+----------------------------------+
| 7:0      | RTLATH   | R      | 8'H0        | RTC time latched value bit 39:32 |
+----------+----------+--------+-------------+----------------------------------+

HBN_IRQ_MODE
--------------
 
**Address：**  0x4000f014
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | IRACO1EN              | IRACO0EN              | RSVD      | BOREN     | RSVD                  |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+---------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                       |
+----------+----------+--------+-------------+---------------------------------------------------+
| 31:24    | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+
| 23:22    | IRACO1EN | R/W    | 0           | enable acomp1 interrupt [20] posedge [21] negedge |
+----------+----------+--------+-------------+---------------------------------------------------+
| 21:20    | IRACO0EN | R/W    | 0           | enable acomp0 interrupt [20] posedge [21] negedge |
+----------+----------+--------+-------------+---------------------------------------------------+
| 19       | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+
| 18       | BOREN    | R/W    | 0           | enable brown-out interrupt                        |
+----------+----------+--------+-------------+---------------------------------------------------+
| 17:0     | RSVD     |        |             |                                                   |
+----------+----------+--------+-------------+---------------------------------------------------+

HBN_IRQ_STAT
--------------
 
**Address：**  0x4000f018
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQSTA                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQSTA                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                                                                           |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------+
| 31:0     | IRQSTA   | R      | 0           | [22] acomp1                                                                                                           |
+          +          +        +             +                                                                                                                       +
|          |          |        |             | [20] acomp0                                                                                                           |
+          +          +        +             +                                                                                                                       +
|          |          |        |             | [18] brown-out                                                                                                        |
+          +          +        +             +                                                                                                                       +
|          |          |        |             | [17] irq_pir state                                                                                                    |
+          +          +        +             +                                                                                                                       +
|          |          |        |             | [16] irq_rtc state                                                                                                    |
+          +          +        +             +                                                                                                                       +
|          |          |        |             | [1:0] hbn_pin_wakeup state (GPIO8/GPIO7)                                                                              |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------+

HBN_IRQ_CLR
-------------
 
**Address：**  0x4000f01c
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQCLR                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| IRQCLR                                                                                                                                                                                        |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                                                                                                   |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------+
| 31:0     | IRQCLR   | W      | 0           | [22] irq_acomp1 clear                                                                                                                         |
+          +          +        +             +                                                                                                                                               +
|          |          |        |             | [20] irq_acomp0 clear                                                                                                                         |
+          +          +        +             +                                                                                                                                               +
|          |          |        |             | [18] irq_bor clear                                                                                                                            |
+          +          +        +             +                                                                                                                                               +
|          |          |        |             | [17] irq_pir clear                                                                                                                            |
+          +          +        +             +                                                                                                                                               +
|          |          |        |             | [16] irq_rtc clear                                                                                                                            |
+          +          +        +             +                                                                                                                                               +
|          |          |        |             | [1:0] hbn_pin_wakeup clear (GPIO8/GPIO7)                                                                                                      |
+----------+----------+--------+-------------+-----------------------------------------------------------------------------------------------------------------------------------------------+

HBN_PIR_CFG
-------------
 
**Address：**  0x4000f020
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | PIREN     | RSVD                                                                              |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------+
| Bit      | Name     |Type    | Reset       | Description|
+----------+----------+--------+-------------+------------+
| 31:8     | RSVD     |        |             |            |
+----------+----------+--------+-------------+------------+
| 7        | PIREN    | R/W    | 0           | pir enable |
+----------+----------+--------+-------------+------------+
| 6:0      | RSVD     |        |             |            |
+----------+----------+--------+-------------+------------+

HBN_PIR_VTH
-------------
 
**Address：**  0x4000f024
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                  | PIRVTH                                                                                                                                                                |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+-----------------------+
| Bit      | Name     |Type    | Reset       | Description           |
+----------+----------+--------+-------------+-----------------------+
| 31:14    | RSVD     |        |             |                       |
+----------+----------+--------+-------------+-----------------------+
| 13:0     | PIRVTH   | R/W    | 14'H3FF     | PIR compare threshold |
+----------+----------+--------+-------------+-----------------------+

HBN_GLB
---------
 
**Address：**  0x4000f030
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                              | F32KSEL               | UARTSOC   | ROOTSOC               |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------------------------------------------------+
| Bit      | Name     |Type    | Reset       | Description                                                      |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 31:5     | RSVD     |        |             |                                                                  |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 4:3      | F32KSEL  | R/W    | 0           | 32KHz clock source selection (0: RC32K  1: XTAL 32K  3: DIG 32K) |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 2        | UARTSOC  | R/W    | 0           | uart clock source selection (0: bclk  1: PLL 160MHz)             |
+----------+----------+--------+-------------+------------------------------------------------------------------+
| 1:0      | ROOTSOC  | R/W    | 0           | root clock source selection (0: RC32M  1: XTAL  2/3: PLL)        |
+----------+----------+--------+-------------+------------------------------------------------------------------+

HBN_SRAM
----------
 
**Address：**  0x4000f034
 

+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 31        | 30        | 29        | 28        | 27        | 26        | 25        | 24        | 23        | 22        | 21        | 20        | 19        | 18        | 17        | 16        | 
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                                                                                                                          |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| 15        | 14        | 13        | 12        | 11        | 10        | 9         | 8         | 7         | 6         | 5         | 4         | 3         | 2         | 1         | 0         |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 
| RSVD                                                                                          | RETRSLP   | RETRRET   | RSVD                                                                  |
+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+-----------+ 

+----------+----------+--------+-------------+------------------------+
| Bit      | Name     |Type    | Reset       | Description            |
+----------+----------+--------+-------------+------------------------+
| 31:8     | RSVD     |        |             |                        |
+----------+----------+--------+-------------+------------------------+
| 7        | RETRSLP  | R/W    | 0           | SRAM sleep control     |
+----------+----------+--------+-------------+------------------------+
| 6        | RETRRET  | R/W    | 0           | SRAM retention control |
+----------+----------+--------+-------------+------------------------+
| 5:0      | RSVD     |        |             |                        |
+----------+----------+--------+-------------+------------------------+

