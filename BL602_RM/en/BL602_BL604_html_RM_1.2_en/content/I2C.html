

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>11. I2C &mdash; BL602/604 Reference Manual  文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="12. PWM" href="PWM.html" />
    <link rel="prev" title="10. UART" href="UART.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BL602/604 Reference Manual
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">4. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">5. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">6. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="L1C.html">7. L1C</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">8. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">9. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">10. UART</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. I2C</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">11.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-features">11.2. Main features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-description">11.3. Function description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#start-and-stop-conditions">11.3.1. Start and stop conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-transmission-format">11.3.2. Data transmission format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arbitration">11.3.3. Arbitration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-clock-setting">11.4. I2C clock setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-configuration-process">11.5. I2C configuration process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-item">11.5.1. Configuration item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-and-write-flags">11.5.2. Read and write flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-address">11.5.3. Slave address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-device-address">11.5.4. Slave device address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-device-address-length">11.5.5. Slave device address length</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data">11.5.6. Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-length">11.5.7. Data length</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-signal">11.5.8. Enable signal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fifo-management">11.6. FIFO management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-dma">11.7. Using DMA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dma-transmission-process">11.7.1. DMA transmission process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dma-receiving-process">11.7.2. DMA receiving process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#interrupt">11.8. Interrupt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#register-description">11.9. Register description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2c-config">11.9.1. i2c_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-int-sts">11.9.2. i2c_int_sts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-sub-addr">11.9.3. i2c_sub_addr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-bus-busy">11.9.4. i2c_bus_busy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-start">11.9.5. i2c_prd_start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-stop">11.9.6. i2c_prd_stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-data">11.9.7. i2c_prd_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-config-0">11.9.8. i2c_fifo_config_0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-config-1">11.9.9. i2c_fifo_config_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-wdata">11.9.10. i2c_fifo_wdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-rdata">11.9.11. i2c_fifo_rdata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">12. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">13. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">14. Revision history</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL602/604 Reference Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>11. I2C</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="i2c">
<h1>11. I2C<a class="headerlink" href="#i2c" title="永久链接至标题">¶</a></h1>
<div class="section" id="introduction">
<h2>11.1. Introduction<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h2>
<p>I2C (Inter-Intergrated Circuit) is a serial communication bus that uses a multi-master-slave architecture to connect low-speed peripheral devices.</p>
<p>Each device has a unique address identification and can be used as a transmitter or receiver. Each device connected to the bus can set the address by software with a unique address and the always-receiving master-slave relationship. The host can be used as a host transmitter or a host receiver.</p>
<p>If two or more hosts are initialized at the same time, data transmission can prevent data from being destroyed through collision detection and arbitration.</p>
<p>BL602/BL604 includes an I2C controller host, which can be flexibly configured with slaveAddr, subAddr, and data transmission to facilitate communication with slave devices. It provides 2 word depth fifo and provides interrupt functions. It can be used with DMA to improve efficiency and flexibly adjust clock frequency.</p>
</div>
<div class="section" id="main-features">
<h2>11.2. Main features<a class="headerlink" href="#main-features" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>Support host mode</li>
<li>Support multi-master mode and arbitration function</li>
<li>Flexible clock frequency adjustment</li>
<li>The maximum operating frequency is 40MHz</li>
</ul>
</div>
<div class="section" id="function-description">
<h2>11.3. Function description<a class="headerlink" href="#function-description" title="永久链接至标题">¶</a></h2>
<table border="1" class="docutils" id="id1">
<caption><span class="caption-text">Pin lists</span><a class="headerlink" href="#id1" title="永久链接至表格">¶</a></caption>
<colgroup>
<col width="20%" />
<col width="27%" />
<col width="53%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Name</td>
<td>Type</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>I2Cx_SCL</td>
<td>input/output</td>
<td>I2C serial clock signal</td>
</tr>
<tr class="row-odd"><td>I2Cx_SDA</td>
<td>input/output</td>
<td>I2C serial data signal</td>
</tr>
</tbody>
</table>
<div class="section" id="start-and-stop-conditions">
<h3>11.3.1. Start and stop conditions<a class="headerlink" href="#start-and-stop-conditions" title="永久链接至标题">¶</a></h3>
<p>All transfers begin with a START condition and end with a STOP condition.</p>
<p>The start and stop conditions are generally generated by the master. The bus is considered to be in a busy state after the start condition, and is considered to be in an idle state for a period of time after the stop condition.</p>
<p>Start condition: SDA generates a high-to-low level transition when SCL is high;</p>
<p>Stop condition: SDA generates a low-to-high level transition when SCL is high.</p>
<p>The waveform diagram is as follows:</p>
<div class="figure align-center" id="id2">
<img alt="../_images/I2CStopStart.png" src="../_images/I2CStopStart.png" />
<p class="caption"><span class="caption-text">I2C stop/start condition</span></p>
</div>
</div>
<div class="section" id="data-transmission-format">
<h3>11.3.2. Data transmission format<a class="headerlink" href="#data-transmission-format" title="永久链接至标题">¶</a></h3>
<p>The first 8 bits transmitted are the address byte, including the 7-bit slave address and the 1-bit direction bit. Data sent or received by the host is controlled by the eighth bit of the first byte sent by the host.</p>
<p>If it is 0, it means that the data is sent by the master; if it is 1, it means that the data is received by the master, and then the slave sends an acknowledge bit (ACK). After the data transmission is completed, the master sends a stop signal. The waveform is as follows:</p>
<div class="figure align-center" id="id3">
<img alt="../_images/I2CMasterTxRx.png" src="../_images/I2CMasterTxRx.png" />
<p class="caption"><span class="caption-text">Master transmission</span></p>
</div>
<p><strong>Timing of master transmission and slave reception</strong></p>
<div class="figure align-center" id="id4">
<img alt="../_images/I2CMasterTxSlaveRx.png" src="../_images/I2CMasterTxSlaveRx.png" />
<p class="caption"><span class="caption-text">Master tx and slave rx</span></p>
</div>
<p><strong>Timing of master receive and slave send</strong></p>
<div class="figure align-center" id="id5">
<img alt="../_images/I2CMasterRxSlaveTx.png" src="../_images/I2CMasterRxSlaveTx.png" />
<p class="caption"><span class="caption-text">Master rx and slave tx</span></p>
</div>
</div>
<div class="section" id="arbitration">
<h3>11.3.3. Arbitration<a class="headerlink" href="#arbitration" title="永久链接至标题">¶</a></h3>
<p>When there are multiple masters on the I2C bus, multiple masters may start transmitting at the same time. At this time, it is necessary to rely on the arbitration mechanism to determine which master has the right to complete the next data transfer. The remaining masters must give up control of the bus. The transmission cannot be started again until the bus is free.</p>
<p>During the transmission process, all hosts need to check whether SDA is consistent with the data they want to send when SCL is high. When the SDA level is different from expected, it means that other hosts are also transmitting at the same time. Hosts with different SDA levels will lose the arbitration and other hosts will complete the data transmission.</p>
<p>The waveform diagram of two hosts transmitting data and starting the arbitration mechanism at the same time is as follows:</p>
<div class="figure align-center" id="id6">
<img alt="../_images/I2CTxRxTogether.png" src="../_images/I2CTxRxTogether.png" />
<p class="caption"><span class="caption-text">Tx and Rx together</span></p>
</div>
</div>
</div>
<div class="section" id="i2c-clock-setting">
<h2>11.4. I2C clock setting<a class="headerlink" href="#i2c-clock-setting" title="永久链接至标题">¶</a></h2>
<p>The I2C clock is derived from bclk (bus clock), which can be divided based on the bclk clock.</p>
<p>Register I2C_PRD_DATA can divide the clock of the data segment. The i2c module divides the data transmission into 4 phases. Each phase is controlled by a single byte in the register. The number of samples in each phase can be set. The 4 samples together determine the frequency division coefficient of the i2c clock.</p>
<p>For example, bclk is 32M and the value of register I2C_PRD_DATA is 0x15151515 by default without configuration. Then the clock frequency of I2C is 32M / ((15 + 1) * 4) = 500K.</p>
<p>Similarly, the registers I2C_PRD_START and I2C_PRD_STOP also divide the clock of the start bit and stop bit respectively.</p>
</div>
<div class="section" id="i2c-configuration-process">
<h2>11.5. I2C configuration process<a class="headerlink" href="#i2c-configuration-process" title="永久链接至标题">¶</a></h2>
<div class="section" id="configuration-item">
<h3>11.5.1. Configuration item<a class="headerlink" href="#configuration-item" title="永久链接至标题">¶</a></h3>
<blockquote>
<div><ul class="simple">
<li>Read and write flags</li>
<li>Slave address</li>
<li>Slave device address</li>
<li>Slave device address length</li>
<li>Data (when sending, configure the data to be sent; when receiving, store the received data)</li>
<li>Data length</li>
<li>Enable signal</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="read-and-write-flags">
<h3>11.5.2. Read and write flags<a class="headerlink" href="#read-and-write-flags" title="永久链接至标题">¶</a></h3>
<p>I2C supports two working states: sending and receiving. Register PKTDIR indicates the sending or receiving status. When it is set to 0, it indicates the sending state, and when it is set to 1, it indicates the receiving state.</p>
</div>
<div class="section" id="slave-address">
<h3>11.5.3. Slave address<a class="headerlink" href="#slave-address" title="永久链接至标题">¶</a></h3>
<p>Each slave device connected to I2C will have a unique address. Usually the address length is 7 bits. The slave device address will be written into the register SLVADDR. I2C will automatically shift left by 1 bit before sending it from the device address. Transmit/receive direction bit on the low-order complement.</p>
</div>
<div class="section" id="slave-device-address">
<h3>11.5.4. Slave device address<a class="headerlink" href="#slave-device-address" title="永久链接至标题">¶</a></h3>
<p>Slave device register address indicates the register address that I2C needs to read and write to a certain register of the slave device. The slave device address will be written to the register I2C_SUB_ADDR, and the register I2C_CR_I2C_SUB_ADDR_EN needs to be set.</p>
<p>If the register SAEN is set to 0, the I2C master will skip the slave register address segment when transmitting.</p>
</div>
<div class="section" id="slave-device-address-length">
<h3>11.5.5. Slave device address length<a class="headerlink" href="#slave-device-address-length" title="永久链接至标题">¶</a></h3>
<p>The slave device address length is decremented by one and written to the register SABC.</p>
</div>
<div class="section" id="data">
<h3>11.5.6. Data<a class="headerlink" href="#data" title="永久链接至标题">¶</a></h3>
<p>The data part represents the data that needs to be sent to the slave device, or the data that needs to be received from the slave device.</p>
<p>When I2C sends data, the data needs to be written into the I2C FIFO in word units in turn, and the data is written to the register address I2C_FIFO_WDATA of the FIFO.</p>
<p>When the I2C receives data, it needs to read the data from the I2C FIFO in units of words in order, and the received data reads the register address I2C_FIFO_RDATA of the FIFO.</p>
</div>
<div class="section" id="data-length">
<h3>11.5.7. Data length<a class="headerlink" href="#data-length" title="永久链接至标题">¶</a></h3>
<p>Decrement the data length by one and write to the register PKTLEN.</p>
</div>
<div class="section" id="enable-signal">
<h3>11.5.8. Enable signal<a class="headerlink" href="#enable-signal" title="永久链接至标题">¶</a></h3>
<p>After the above configurations are completed, write the enable signal register MEN to 1 to automatically start the I2C transmission process.</p>
<p>When the read-write flag is set to 0, I2C sends data, and the host sends the process:</p>
<ol class="arabic simple">
<li>Start bit</li>
<li>(1 bit left from device address + 0) + ACK</li>
<li>Slave device address + ACK</li>
<li>1 byte data + ACK</li>
<li>1 byte data + ACK</li>
<li>Stop bit</li>
</ol>
<p>When the read / write flag is set to 1, I2C receives data and the host sends the process:</p>
<ol class="arabic simple">
<li>Start bit</li>
<li>(1 bit left from device address + 0) + ACK</li>
<li>Slave device address + ACK</li>
<li>Start bit</li>
<li>(1 bit left from device address + 1) + ACK</li>
<li>1 byte data + ACK</li>
<li>1 byte data + ACK</li>
<li>Stop bit</li>
</ol>
</div>
</div>
<div class="section" id="fifo-management">
<h2>11.6. FIFO management<a class="headerlink" href="#fifo-management" title="永久链接至标题">¶</a></h2>
<p>The I2C FIFO depth is 2 words. I2C transmission and reception can be divided into RX FIFO and TX FIFO.</p>
<p>The register RFICNT indicates how much data (unit word) needs to be read in the RX FIFO.</p>
<p>The register TFICNT indicates how much space (in Word) is available for writing in the TX FIFO.</p>
<p>I2C FIFO status:</p>
<blockquote>
<div><ul class="simple">
<li>RX FIFO underflow: When the data in the RX FIFO has been read or is empty, continue to read data from the RX FIFO, the register RFIU will be set;</li>
<li>RX FIFO overflow: When I2C receives data until the 2 words of RX FIFO are filled. Without reading the RX FIFO, I2C receives the data again and the register RFIO will be set;</li>
<li>TX FIFO underflow: When the size of the data filled in the TX FIFO does not meet the configured I2C data length PKTLEN, and there is no new data to be filled into the TX FIFO, the register TFIU will be set;</li>
<li>TX FIFO overflow: After the two words of the TX FIFO are filled, before the data in the TX FIFO is sent out, fill the TX FIFO with data again. The register TFIO will be set.</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="using-dma">
<h2>11.7. Using DMA<a class="headerlink" href="#using-dma" title="永久链接至标题">¶</a></h2>
<p>I2C can use DMA to send and receive data. Set DTEN to 1 to enable the DMA transmission mode. After a channel is allocated for I2C, the DMA will transfer data from the memory area to the I2C_FIFO_WDATA register.</p>
<p>Set DREN to 1 to enable the DMA receive mode. After a channel is allocated for I2C, the DMA will transfer the data in the I2C_FIFO_RDATA register to the memory area.</p>
<p>When the I2C module is used with DMA, the data part will be automatically carried by the DMA. There is no need for the CPU to write data to the I2C TX FIFO or read data from the I2C RX FIFO.</p>
<div class="section" id="dma-transmission-process">
<h3>11.7.1. DMA transmission process<a class="headerlink" href="#dma-transmission-process" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li>Configure the read and write flags to 0</li>
<li>Configure the slave device address</li>
<li>Configure Slave Device Address</li>
<li>Configure slave device address length</li>
<li>Data length</li>
<li>Set the enable signal register</li>
<li>Configure DMA transfer size</li>
<li>Configure DMA source address transfer width</li>
<li>Configure the DMA destination address transfer width (Note that when I2C is used with DMA, the destination address transfer width needs to be set to 32bits and used in word alignment)</li>
<li>Configure the DMA source address as the memory address to store the transmitted data</li>
<li>Configure the DMA destination address as I2C TX FIFO address, I2C_FIFO_WDATA</li>
<li>Enable DMA</li>
</ol>
</div>
<div class="section" id="dma-receiving-process">
<h3>11.7.2. DMA receiving process<a class="headerlink" href="#dma-receiving-process" title="永久链接至标题">¶</a></h3>
<ol class="arabic simple">
<li>Configure the read and write flags to 1</li>
<li>Configure the slave device address</li>
<li>Configure Slave Device Address</li>
<li>Configure slave device address length</li>
<li>Data length</li>
<li>Set the enable signal register</li>
<li>Configure DMA transfer size</li>
<li>Configure the DMA source address transfer width (Note that when I2C is used with DMA, the source address transfer width needs to be set to 32bits and used in word alignment)</li>
<li>Configure DMA destination address transfer width</li>
<li>Configure the DMA source address as I2C RX FIFO address, I2C_FIFO_RDATA</li>
<li>Configure the DMA destination address as the memory address to store the received data</li>
<li>Enable DMA</li>
</ol>
</div>
</div>
<div class="section" id="interrupt">
<h2>11.8. Interrupt<a class="headerlink" href="#interrupt" title="永久链接至标题">¶</a></h2>
<p>I2C includes the following interrupts:</p>
<blockquote>
<div><ul class="simple">
<li>I2C_TRANS_END_INT: I2C transfer end interrupt</li>
<li>I2C_TX_FIFO_READY_INT: Interrupt is triggered when I2C TX FIFO has free space available for filling</li>
<li>I2C_RX_FIFO_READY_INT: When I2C RX FIFO receives data, trigger interrupt</li>
<li>I2C_NACK_RECV_INT: When the I2C module detects a NACK state, an interrupt is triggered</li>
<li>I2C_ARB_LOST_INT: I2C arbitration lost interrupt</li>
<li>I2C_FIFO_ERR_INT: I2C FIFO ERROR interrupt</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="register-description">
<h2>11.9. Register description<a class="headerlink" href="#register-description" title="永久链接至标题">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="39%" />
<col width="61%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Name</td>
<td>Description</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-config">i2c_config</a></td>
<td>I2C configuration register</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#i2c-int-sts">i2c_int_sts</a></td>
<td>I2C interrupt status</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-sub-addr">i2c_sub_addr</a></td>
<td>I2C sub-address configuration</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#i2c-bus-busy">i2c_bus_busy</a></td>
<td>I2C bus busy control register</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-prd-start">i2c_prd_start</a></td>
<td>I2C length of start phase</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#i2c-prd-stop">i2c_prd_stop</a></td>
<td>I2C length of stop phase</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-prd-data">i2c_prd_data</a></td>
<td>I2C length of data phase</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#i2c-fifo-config-0">i2c_fifo_config_0</a></td>
<td>I2C FIFO configuration register0</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-fifo-config-1">i2c_fifo_config_1</a></td>
<td>I2C FIFO configuration register1</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#i2c-fifo-wdata">i2c_fifo_wdata</a></td>
<td>I2C FIFO write data</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#i2c-fifo-rdata">i2c_fifo_rdata</a></td>
<td>I2C FIFO read data</td>
</tr>
</tbody>
</table>
<div class="section" id="i2c-config">
<h3>11.9.1. i2c_config<a class="headerlink" href="#i2c-config" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a300</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="4">DEGCNT</td>
<td colspan="4">RSVD</td>
<td colspan="8">PKTLEN</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td>RSVD</td>
<td colspan="7">SLVADDR</td>
<td>RSVD</td>
<td colspan="2">SABC</td>
<td>SAEN</td>
<td>SCLSEN</td>
<td>DEGEN</td>
<td>PKTDIR</td>
<td>MEN</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="5%" />
<col width="5%" />
<col width="4%" />
<col width="7%" />
<col width="78%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:28</td>
<td>DEGCNT</td>
<td>R/W</td>
<td>4'D0</td>
<td>De-glitch function cycle count</td>
</tr>
<tr class="row-odd"><td>27:24</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>23:16</td>
<td>PKTLEN</td>
<td>R/W</td>
<td>8'D0</td>
<td>Packet length (unit: byte)</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>14:8</td>
<td>SLVADDR</td>
<td>R/W</td>
<td>7'D0</td>
<td>Slave address for I2C transaction (target address)</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td rowspan="2">6:5</td>
<td rowspan="2">SABC</td>
<td rowspan="2">R/W</td>
<td rowspan="2">2'D0</td>
<td rowspan="2"><p class="first">Sub-address field byte count</p>
<p class="last">2'd0: 1-byte, 2'd1: 2-byte, 2'd2: 3-byte, 2'd3: 4-byte</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>4</td>
<td>SAEN</td>
<td>R/W</td>
<td>1'B0</td>
<td>Enable signal of I2C sub-address field</td>
</tr>
<tr class="row-odd"><td rowspan="2">3</td>
<td rowspan="2">SCLSEN</td>
<td rowspan="2">R/W</td>
<td rowspan="2">1'B1</td>
<td rowspan="2"><p class="first">Enable signal of I2C SCL synchronization, should be enabled to support Multi-Master and Clock-Stretching</p>
<p class="last">(Normally should not be turned-off)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td>2</td>
<td>DEGEN</td>
<td>R/W</td>
<td>1'B0</td>
<td>Enable signal of I2C input de-glitch function (for all input pins)</td>
</tr>
<tr class="row-even"><td rowspan="2">1</td>
<td rowspan="2">PKTDIR</td>
<td rowspan="2">R/W</td>
<td rowspan="2">1'B1</td>
<td rowspan="2"><p class="first">Transfer direction of the packet</p>
<p class="last">1'b0: Write; 1'b1: Read</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2">0</td>
<td rowspan="2">MEN</td>
<td rowspan="2">R/W</td>
<td rowspan="2">1'B0</td>
<td rowspan="2"><p class="first">Enable signal of I2C Master function</p>
<p class="last">Asserting this bit will trigger the transaction, and should be de-asserted after finish</p>
</td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-int-sts">
<h3>11.9.2. i2c_int_sts<a class="headerlink" href="#i2c-int-sts" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a304</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="2">RSVD</td>
<td>FEREN</td>
<td>ARBEN</td>
<td>NAKEN</td>
<td>RXFEN</td>
<td>TXFEN</td>
<td>ENDEN</td>
<td colspan="3">RSVD</td>
<td>ARBCLR</td>
<td>NAKCLR</td>
<td colspan="2">RSVD</td>
<td>ENDCLR</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="2">RSVD</td>
<td>FERMASK</td>
<td>ARBMASK</td>
<td>NAKMASK</td>
<td>RXFMASK</td>
<td>TXFMASK</td>
<td>ENDMASK</td>
<td colspan="2">RSVD</td>
<td>FERINT</td>
<td>ARBINT</td>
<td>NAKINT</td>
<td>RXFINT</td>
<td>TXFINT</td>
<td>ENDINT</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="7%" />
<col width="7%" />
<col width="6%" />
<col width="9%" />
<col width="70%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:30</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>29</td>
<td>FEREN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_fer_int</td>
</tr>
<tr class="row-even"><td>28</td>
<td>ARBEN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_arb_int</td>
</tr>
<tr class="row-odd"><td>27</td>
<td>NAKEN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_nak_int</td>
</tr>
<tr class="row-even"><td>26</td>
<td>RXFEN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_rxf_int</td>
</tr>
<tr class="row-odd"><td>25</td>
<td>TXFEN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_txf_int</td>
</tr>
<tr class="row-even"><td>24</td>
<td>ENDEN</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt enable of i2c_end_int</td>
</tr>
<tr class="row-odd"><td>23:21</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>20</td>
<td>ARBCLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Interrupt clear of i2c_arb_int</td>
</tr>
<tr class="row-odd"><td>19</td>
<td>NAKCLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Interrupt clear of i2c_nak_int</td>
</tr>
<tr class="row-even"><td>18:17</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>ENDCLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Interrupt clear of i2c_end_int</td>
</tr>
<tr class="row-even"><td>15:14</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>13</td>
<td>FERMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_fer_int</td>
</tr>
<tr class="row-even"><td>12</td>
<td>ARBMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_arb_int</td>
</tr>
<tr class="row-odd"><td>11</td>
<td>NAKMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_nak_int</td>
</tr>
<tr class="row-even"><td>10</td>
<td>RXFMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_rxf_int</td>
</tr>
<tr class="row-odd"><td>9</td>
<td>TXFMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_txf_int</td>
</tr>
<tr class="row-even"><td>8</td>
<td>ENDMASK</td>
<td>R/W</td>
<td>1'B1</td>
<td>Interrupt mask of i2c_end_int</td>
</tr>
<tr class="row-odd"><td>7:6</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-even"><td>5</td>
<td>FERINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C TX/RX FIFO error interrupt, auto-cleared when FIFO overflow/underflow error flag is cleared</td>
</tr>
<tr class="row-odd"><td>4</td>
<td>ARBINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C arbitration lost interrupt</td>
</tr>
<tr class="row-even"><td>3</td>
<td>NAKINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C NACK-received interrupt</td>
</tr>
<tr class="row-odd"><td>2</td>
<td>RXFINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C RX FIFO ready (rx_fifo_cnt &gt; rx_fifo_th) interrupt, auto-cleared when data is popped</td>
</tr>
<tr class="row-even"><td>1</td>
<td>TXFINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C TX FIFO ready (tx_fifo_cnt &gt; tx_fifo_th) interrupt, auto-cleared when data is pushed</td>
</tr>
<tr class="row-odd"><td>0</td>
<td>ENDINT</td>
<td>R</td>
<td>1'B0</td>
<td>I2C transfer end interrupt</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-sub-addr">
<h3>11.9.3. i2c_sub_addr<a class="headerlink" href="#i2c-sub-addr" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a308</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="8">SUBAB3</td>
<td colspan="8">SUBAB2</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="8">SUBAB1</td>
<td colspan="8">SUBAB0</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="9%" />
<col width="9%" />
<col width="7%" />
<col width="12%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:24</td>
<td>SUBAB3</td>
<td>R/W</td>
<td>8'D0</td>
<td>I2C sub-address field - byte[3]</td>
</tr>
<tr class="row-odd"><td>23:16</td>
<td>SUBAB2</td>
<td>R/W</td>
<td>8'D0</td>
<td>I2C sub-address field - byte[2]</td>
</tr>
<tr class="row-even"><td>15:8</td>
<td>SUBAB1</td>
<td>R/W</td>
<td>8'D0</td>
<td>I2C sub-address field - byte[1]</td>
</tr>
<tr class="row-odd"><td>7:0</td>
<td>SUBAB0</td>
<td>R/W</td>
<td>8'D0</td>
<td>I2C sub-address field - byte[0] (sub-address starts from this byte)</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-bus-busy">
<h3>11.9.4. i2c_bus_busy<a class="headerlink" href="#i2c-bus-busy" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a30c</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">RSVD</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="14">RSVD</td>
<td>BUSYCLR</td>
<td>BUSY</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="7%" />
<col width="11%" />
<col width="66%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:2</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>BUSYCLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Clear signal of bus_busy status, not for normal usage (in case I2C bus hangs)</td>
</tr>
<tr class="row-even"><td>0</td>
<td>BUSY</td>
<td>R</td>
<td>1'B0</td>
<td>Indicator of I2C bus busy</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-prd-start">
<h3>11.9.5. i2c_prd_start<a class="headerlink" href="#i2c-prd-start" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a310</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="8">PRDSPH3</td>
<td colspan="8">PRDSPH2</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="8">PRDSPH1</td>
<td colspan="8">PRDSPH0</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="11%" />
<col width="17%" />
<col width="46%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:24</td>
<td>PRDSPH3</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of START condition phase 3</td>
</tr>
<tr class="row-odd"><td>23:16</td>
<td>PRDSPH2</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of START condition phase 2</td>
</tr>
<tr class="row-even"><td>15:8</td>
<td>PRDSPH1</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of START condition phase 1</td>
</tr>
<tr class="row-odd"><td>7:0</td>
<td>PRDSPH0</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of START condition phase 0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-prd-stop">
<h3>11.9.6. i2c_prd_stop<a class="headerlink" href="#i2c-prd-stop" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a314</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="8">PRDPPH3</td>
<td colspan="8">PRDPPH2</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="8">PRDPPH1</td>
<td colspan="8">PRDPPH0</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="13%" />
<col width="11%" />
<col width="17%" />
<col width="45%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:24</td>
<td>PRDPPH3</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of STOP condition phase 3</td>
</tr>
<tr class="row-odd"><td>23:16</td>
<td>PRDPPH2</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of STOP condition phase 2</td>
</tr>
<tr class="row-even"><td>15:8</td>
<td>PRDPPH1</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of STOP condition phase 1</td>
</tr>
<tr class="row-odd"><td>7:0</td>
<td>PRDPPH0</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of STOP condition phase 0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-prd-data">
<h3>11.9.7. i2c_prd_data<a class="headerlink" href="#i2c-prd-data" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a318</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="8">PRDDPH3</td>
<td colspan="8">PRDDPH2</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="8">PRDDPH1</td>
<td colspan="8">PRDDPH0</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="4%" />
<col width="7%" />
<col width="77%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:24</td>
<td>PRDDPH3</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of DATA phase 3</td>
</tr>
<tr class="row-odd"><td>23:16</td>
<td>PRDDPH2</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of DATA phase 2</td>
</tr>
<tr class="row-even"><td rowspan="2">15:8</td>
<td rowspan="2">PRDDPH1</td>
<td rowspan="2">R/W</td>
<td rowspan="2">8'D15</td>
<td rowspan="2"><p class="first">Length of DATA phase 1</p>
<p class="last">Note: This value should not be set to 8'd0, adjust source clock rate instead if higher I2C clock rate is required</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td>7:0</td>
<td>PRDDPH0</td>
<td>R/W</td>
<td>8'D15</td>
<td>Length of DATA phase 0</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-fifo-config-0">
<h3>11.9.8. i2c_fifo_config_0<a class="headerlink" href="#i2c-fifo-config-0" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a380</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">RSVD</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="8">RSVD</td>
<td>RFIU</td>
<td>RFIO</td>
<td>TFIU</td>
<td>TFIO</td>
<td>RFICLR</td>
<td>TFICLR</td>
<td>DREN</td>
<td>DTEN</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="10%" />
<col width="10%" />
<col width="8%" />
<col width="13%" />
<col width="59%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:8</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>7</td>
<td>RFIU</td>
<td>R</td>
<td>1'B0</td>
<td>Underflow flag of RX FIFO, can be cleared by rx_fifo_clr</td>
</tr>
<tr class="row-even"><td>6</td>
<td>RFIO</td>
<td>R</td>
<td>1'B0</td>
<td>Overflow flag of RX FIFO, can be cleared by rx_fifo_clr</td>
</tr>
<tr class="row-odd"><td>5</td>
<td>TFIU</td>
<td>R</td>
<td>1'B0</td>
<td>Underflow flag of TX FIFO, can be cleared by tx_fifo_clr</td>
</tr>
<tr class="row-even"><td>4</td>
<td>TFIO</td>
<td>R</td>
<td>1'B0</td>
<td>Overflow flag of TX FIFO, can be cleared by tx_fifo_clr</td>
</tr>
<tr class="row-odd"><td>3</td>
<td>RFICLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Clear signal of RX FIFO</td>
</tr>
<tr class="row-even"><td>2</td>
<td>TFICLR</td>
<td>W1C</td>
<td>1'B0</td>
<td>Clear signal of TX FIFO</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>DREN</td>
<td>R/W</td>
<td>1'B0</td>
<td>Enable signal of dma_rx_req/ack interface</td>
</tr>
<tr class="row-even"><td>0</td>
<td>DTEN</td>
<td>R/W</td>
<td>1'B0</td>
<td>Enable signal of dma_tx_req/ack interface</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-fifo-config-1">
<h3>11.9.9. i2c_fifo_config_1<a class="headerlink" href="#i2c-fifo-config-1" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a384</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="7">RSVD</td>
<td>RFITH</td>
<td colspan="7">RSVD</td>
<td>TFITH</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="6">RSVD</td>
<td colspan="2">RFICNT</td>
<td colspan="6">RSVD</td>
<td colspan="2">TFICNT</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="8%" />
<col width="6%" />
<col width="10%" />
<col width="69%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:25</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>24</td>
<td>RFITH</td>
<td>R/W</td>
<td>1'D0</td>
<td>RX FIFO threshold, dma_rx_req will not be asserted if tx_fifo_cnt is less than this value</td>
</tr>
<tr class="row-even"><td>23:17</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>16</td>
<td>TFITH</td>
<td>R/W</td>
<td>1'D0</td>
<td>TX FIFO threshold, dma_tx_req will not be asserted if tx_fifo_cnt is less than this value</td>
</tr>
<tr class="row-even"><td>15:10</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>9:8</td>
<td>RFICNT</td>
<td>R</td>
<td>2'D0</td>
<td>RX FIFO available count</td>
</tr>
<tr class="row-even"><td>7:2</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>1:0</td>
<td>TFICNT</td>
<td>R</td>
<td>2'D2</td>
<td>TX FIFO available count</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-fifo-wdata">
<h3>11.9.10. i2c_fifo_wdata<a class="headerlink" href="#i2c-fifo-wdata" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a388</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">FIWD</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="16">FIWD</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="16%" />
<col width="13%" />
<col width="21%" />
<col width="34%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:0</td>
<td>FIWD</td>
<td>W</td>
<td>X</td>
<td>I2C FIFO write data</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="i2c-fifo-rdata">
<h3>11.9.11. i2c_fifo_rdata<a class="headerlink" href="#i2c-fifo-rdata" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000a38c</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">FIRD</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="16">FIRD</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="16%" />
<col width="16%" />
<col width="13%" />
<col width="21%" />
<col width="33%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:0</td>
<td>FIRD</td>
<td>R</td>
<td>32'H0</td>
<td>I2C FIFO read data</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="PWM.html" class="btn btn-neutral float-right" title="12. PWM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="UART.html" class="btn btn-neutral float-left" title="10. UART" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>