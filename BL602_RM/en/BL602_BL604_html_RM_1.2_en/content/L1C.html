

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="zh" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="zh" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>7. L1C &mdash; BL602/604 Reference Manual  文档</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/style.css" type="text/css" />
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="8. IR" href="IR.html" />
    <link rel="prev" title="6. DMA" href="DMA.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> BL602/604 Reference Manual
          

          
            
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">4. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">5. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">6. DMA</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">7. L1C</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#introduction">7.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#main-features">7.2. Main features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#function-description">7.3. Function description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mutual-conversion-between-tcm-and-cache-ram-resources">7.3.1. Mutual conversion between TCM and Cache RAM resources</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cache">7.3.2. Cache</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#register-description">7.4. Register description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#l1c-config">7.4.1. l1c_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hit-cnt-lsb">7.4.2. hit_cnt_lsb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hit-cnt-msb">7.4.3. hit_cnt_msb</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miss-cnt">7.4.4. miss_cnt</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">8. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">9. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">10. UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2C.html">11. I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">12. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">13. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">14. Revision history</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL602/604 Reference Manual</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>7. L1C</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="l1c">
<h1>7. L1C<a class="headerlink" href="#l1c" title="永久链接至标题">¶</a></h1>
<div class="section" id="introduction">
<h2>7.1. Introduction<a class="headerlink" href="#introduction" title="永久链接至标题">¶</a></h2>
<p>The L1 Cache Controller is a unit module that is located outside the processor and is used to manage code or data buffers on the Flash and increase the speed of the CPU accessing the Flash. The architecture is as follows:</p>
<div class="figure align-center" id="id1">
<img alt="../_images/L1CArch.png" src="../_images/L1CArch.png" />
<p class="caption"><span class="caption-text">L1c architecture</span></p>
</div>
<p>L1C is a high-speed unit integrated between the processor and Flash. Because the speed of the processor is very fast, when the processor needs to wait for a long time to access the Flash, the waiting time represents wasteful time. The L1C cache can be used as a lubricating role between the processor and the Flash to improve the efficiency of the processor.</p>
</div>
<div class="section" id="main-features">
<h2>7.2. Main features<a class="headerlink" href="#main-features" title="永久链接至标题">¶</a></h2>
<ul class="simple">
<li>4-way Set-Associative mapping</li>
<li>Variable cache size</li>
<li>Connect to TCM address space, can easily configure L1C space as TCM space</li>
<li>Support cache performance statistics</li>
</ul>
</div>
<div class="section" id="function-description">
<h2>7.3. Function description<a class="headerlink" href="#function-description" title="永久链接至标题">¶</a></h2>
<div class="section" id="mutual-conversion-between-tcm-and-cache-ram-resources">
<h3>7.3.1. Mutual conversion between TCM and Cache RAM resources<a class="headerlink" href="#mutual-conversion-between-tcm-and-cache-ram-resources" title="永久链接至标题">¶</a></h3>
<p>In order to increase the memory usage efficiency, the 32K RAM of the cache can be fully or partially adjusted to the TCM space, which is convenient for users to adjust the memory usage method and efficiency according to the actual situation.</p>
<p>The default size of the cache is 32K, divided into 4 ways, each way is 8K, the unit of adjustment is 1 way, which is 8K. The default size of ITCM is 16K. Through the setting of WayDisable, you can flexibly adjust the actual space size of Cache and ITCM.</p>
<table border="1" class="docutils" id="id2">
<caption><span class="caption-text">WayDisable settings</span><a class="headerlink" href="#id2" title="永久链接至表格">¶</a></caption>
<colgroup>
<col width="29%" />
<col width="55%" />
<col width="17%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>WayDisable</td>
<td>Cache</td>
<td>ITCM</td>
</tr>
<tr class="row-even"><td>none</td>
<td>32K</td>
<td>16K</td>
</tr>
<tr class="row-odd"><td>1-way</td>
<td>24K</td>
<td>24K</td>
</tr>
<tr class="row-even"><td>2-way</td>
<td>16K</td>
<td>32K</td>
</tr>
<tr class="row-odd"><td>3-way</td>
<td>8K</td>
<td>40K</td>
</tr>
<tr class="row-even"><td>4-way</td>
<td>0K</td>
<td>48K</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="cache">
<h3>7.3.2. Cache<a class="headerlink" href="#cache" title="永久链接至标题">¶</a></h3>
<p>The unit of each line buffer is 32 bytes, and the 4-way associative mapping cache is used. The application architecture is as follows:</p>
<div class="figure align-center" id="id3">
<img alt="../_images/L1cWay.png" src="../_images/L1cWay.png" />
<p class="caption"><span class="caption-text">Cache architecture</span></p>
</div>
<p>Each set of associative mapping caches contains two parts, the first is a tag, which contains the valid value and the address mapping relationship. The second part is data storage. When the processor accesses the cache, the cache processor compares the relationship between the address and the tag. When the address comparison is successful, the representative can directly get data from the cache. Conversely, the cache processor will capture related data through the AHB Master and put the data into the cache and respond to the processor's data.</p>
<p>When most of the data can be successfully compared in the tag, the waiting time of the processor can be greatly reduced, and the use efficiency can be increased.</p>
</div>
</div>
<div class="section" id="register-description">
<h2>7.4. Register description<a class="headerlink" href="#register-description" title="永久链接至标题">¶</a></h2>
<table border="1" class="docutils">
<colgroup>
<col width="37%" />
<col width="63%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Name</td>
<td>Description</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#l1c-config">l1c_config</a></td>
<td>L1C feature configuration</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#hit-cnt-lsb">hit_cnt_lsb</a></td>
<td>Low 32-bit hit couter</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#hit-cnt-msb">hit_cnt_msb</a></td>
<td>High 32-bit hit counter</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#miss-cnt">miss_cnt</a></td>
<td>Miss counter</td>
</tr>
</tbody>
</table>
<div class="section" id="l1c-config">
<h3>7.4.1. l1c_config<a class="headerlink" href="#l1c-config" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x40009000</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">RSVD</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="4">RSVD</td>
<td colspan="4">WAYDIS</td>
<td colspan="6">RSVD</td>
<td>CNTEN</td>
<td>CACABLE</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="12%" />
<col width="12%" />
<col width="10%" />
<col width="15%" />
<col width="51%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:12</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>11:8</td>
<td>WAYDIS</td>
<td>R/W</td>
<td>4'B1111</td>
<td>Disable part of cache ways &amp; used as ITCM</td>
</tr>
<tr class="row-even"><td>7:2</td>
<td>RSVD</td>
<td>&#160;</td>
<td>&#160;</td>
<td>&#160;</td>
</tr>
<tr class="row-odd"><td>1</td>
<td>CNTEN</td>
<td>R/W</td>
<td>0</td>
<td>Cache performance counter enable</td>
</tr>
<tr class="row-even"><td>0</td>
<td>CACABLE</td>
<td>R/W</td>
<td>0</td>
<td>Cachable region enable</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hit-cnt-lsb">
<h3>7.4.2. hit_cnt_lsb<a class="headerlink" href="#hit-cnt-lsb" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x40009004</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">CNTLSB</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="16">CNTLSB</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="15%" />
<col width="15%" />
<col width="12%" />
<col width="20%" />
<col width="38%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:0</td>
<td>CNTLSB</td>
<td>R</td>
<td>0</td>
<td>Hit counter low 32-bit</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="hit-cnt-msb">
<h3>7.4.3. hit_cnt_msb<a class="headerlink" href="#hit-cnt-msb" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x40009008</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">CNTMSB</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="16">CNTMSB</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="11%" />
<col width="11%" />
<col width="9%" />
<col width="14%" />
<col width="55%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:0</td>
<td>CNTMSB</td>
<td>R</td>
<td>0</td>
<td>total hit count = hit_cnt_msb*2^32 + hit_cnt_lsb</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="miss-cnt">
<h3>7.4.4. miss_cnt<a class="headerlink" href="#miss-cnt" title="永久链接至标题">¶</a></h3>
<p><strong>Address：</strong>  0x4000900c</p>
<table border="1" class="docutils">
<colgroup>
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
<col width="6%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>31</td>
<td>30</td>
<td>29</td>
<td>28</td>
<td>27</td>
<td>26</td>
<td>25</td>
<td>24</td>
<td>23</td>
<td>22</td>
<td>21</td>
<td>20</td>
<td>19</td>
<td>18</td>
<td>17</td>
<td>16</td>
</tr>
<tr class="row-even"><td colspan="16">MISSCNT</td>
</tr>
<tr class="row-odd"><td>15</td>
<td>14</td>
<td>13</td>
<td>12</td>
<td>11</td>
<td>10</td>
<td>9</td>
<td>8</td>
<td>7</td>
<td>6</td>
<td>5</td>
<td>4</td>
<td>3</td>
<td>2</td>
<td>1</td>
<td>0</td>
</tr>
<tr class="row-even"><td colspan="16">MISSCNT</td>
</tr>
</tbody>
</table>
<table border="1" class="docutils">
<colgroup>
<col width="18%" />
<col width="18%" />
<col width="15%" />
<col width="24%" />
<col width="25%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>Bit</td>
<td>Name</td>
<td>Type</td>
<td>Reset</td>
<td>Description</td>
</tr>
<tr class="row-even"><td>31:0</td>
<td>MISSCNT</td>
<td>R</td>
<td>0</td>
<td>Miss counter</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="IR.html" class="btn btn-neutral float-right" title="8. IR" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="DMA.html" class="btn btn-neutral float-left" title="6. DMA" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2019

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>