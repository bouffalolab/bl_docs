<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. Functional Description &mdash; BL616/BL618 Datasheet  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3. Pin Definition" href="Pindefinition.html" />
    <link rel="prev" title="1. Overview" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL616/BL618 Datasheet
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. Overview</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. Functional Description</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cpu">2.1. CPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cache">2.2. Cache</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory">2.3. Memory</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dma">2.4. DMA</a></li>
<li class="toctree-l2"><a class="reference internal" href="#memory-map">2.5. Memory Map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#interrupt">2.6. Interrupt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#boot">2.7. Boot</a></li>
<li class="toctree-l2"><a class="reference internal" href="#power">2.8. Power</a></li>
<li class="toctree-l2"><a class="reference internal" href="#clock">2.9. Clock</a></li>
<li class="toctree-l2"><a class="reference internal" href="#peripheral">2.10. Peripheral</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gpio">2.10.1. GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart">2.10.2. UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spi">2.10.3. SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c">2.10.4. I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="#emac">2.10.5. EMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s">2.10.6. I2S</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timer">2.10.7. TIMER</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pwm">2.10.8. PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ir-ir-remote">2.10.9. IR(IR-remote)</a></li>
<li class="toctree-l3"><a class="reference internal" href="#audio-adc">2.10.10. Audio ADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#audio-dac">2.10.11. Audio DAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#gpadc">2.10.12. GPADC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#high-precision-adc">2.10.13. High precision ADC</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Pindefinition.html">3. Pin Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="AudioCharacteristic.html">4. Audio characteristic</a></li>
<li class="toctree-l1"><a class="reference internal" href="Electricalcharacteristics.html">5. Electrical Specifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="ProductUse.html">6. Product use</a></li>
<li class="toctree-l1"><a class="reference internal" href="Referencedesign.html">7. Reference Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="PackagingQFN40.html">8. Package Information(QFN40)</a></li>
<li class="toctree-l1"><a class="reference internal" href="PackagingQFN56.html">9. Package Information(QFN56)</a></li>
<li class="toctree-l1"><a class="reference internal" href="TopMarkingDefinition.html">10. Top Marking Definition</a></li>
<li class="toctree-l1"><a class="reference internal" href="OrderingInformation.html">11. Ordering Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">12. Revision history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL616/BL618 Datasheet</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>Functional Description</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="functional-description">
<h1><span class="section-number">2. </span>Functional Description<a class="headerlink" href="#functional-description" title="Permalink to this headline"></a></h1>
<p>BL616/BL618  main functions described as follows:</p>
<figure class="align-center" id="id1">
<img alt="../_images/SystemArch.svg" src="../_images/SystemArch.svg" /><figcaption>
<p><span class="caption-number">Fig. 2.1 </span><span class="caption-text">System Architecture</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<section id="cpu">
<h2><span class="section-number">2.1. </span>CPU<a class="headerlink" href="#cpu" title="Permalink to this headline"></a></h2>
<p>BL616/BL618 has a built-in 32-bit RISC-V CPU, which adopts a 5-stage pipeline structure:
fetch, decode, execute, memory access, write back, support RISC-V 32/16-bit mixed instruction set,
including 64 external Interrupt source, there are 4 bits that can be used to configure the interrupt priority.</p>
</section>
<section id="cache">
<h2><span class="section-number">2.2. </span>Cache<a class="headerlink" href="#cache" title="Permalink to this headline"></a></h2>
<p>The cache of BL616/BL618 improves the performance of CPU accessing external memory,
including 32K instruction cache and 16K data cache.</p>
</section>
<section id="memory">
<h2><span class="section-number">2.3. </span>Memory<a class="headerlink" href="#memory" title="Permalink to this headline"></a></h2>
<p>BL616/BL618 memory includes: on-chip zero-delay SRAM memory, read-only memory, write-once memory,
Embedded flash (optional), embedded pSRAM (optional).</p>
</section>
<section id="dma">
<h2><span class="section-number">2.4. </span>DMA<a class="headerlink" href="#dma" title="Permalink to this headline"></a></h2>
<p>The DMA controller has 4 dedicated channels to manage data transfers between peripherals and memory to improve CPU/bus efficiency. DMA has four transfer types, memory-to-memory, memory-to-peripheral, peripheral-to-memory, and peripheral-to-peripheral modes.</p>
<p>The DMA also supports the LLI (Linked List Item) feature, which consists of a series of linked lists that predefine multiple transfers, and then the hardware automatically completes all transfers based on the size and address of each LLI.</p>
<p>Peripherals supported by DMA include UART、I2C、SPI、Audio(Audio ADC and Audio DAC)、GPIO、I2S、DBI、GPADC、GPDAC.</p>
</section>
<section id="memory-map">
<h2><span class="section-number">2.5. </span>Memory Map<a class="headerlink" href="#memory-map" title="Permalink to this headline"></a></h2>
<table class="colwidths-given docutils align-center" id="id2" style="width: 100%">
<caption><span class="caption-number">Table 2.1 </span><span class="caption-text">Memory address map</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>Module</p></th>
<th class="head" rowspan="2"><p>Size</p></th>
<th class="head" colspan="2"><p>Base Address</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Cache</p></th>
<th class="head"><p>Non-cache</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>OCRAM</p></td>
<td><p>320KB</p></td>
<td><p>0x62FC0000</p></td>
<td><p>0x22FC0000</p></td>
</tr>
<tr class="row-even"><td><p>WRAM</p></td>
<td><p>160KB</p></td>
<td><p>0x63010000</p></td>
<td><p>0x23010000</p></td>
</tr>
</tbody>
</table>
<p>OCRAM and WRAM can be accessed either through the AHB bus or through AXI. When the CPU uses the 0x62FC0000 address to access the OCRAM, it will go through the internal cache and access the OCRAM through AXI to AHB. When the CPU uses the 0x22FC0000 address to access the OCRAM, it will directly access the OCRAM through the AHB bus.</p>
<table class="colwidths-given docutils align-center" id="id3" style="width: 100%">
<caption><span class="caption-number">Table 2.2 </span><span class="caption-text">Memory Map</span><a class="headerlink" href="#id3" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 13%" />
<col style="width: 13%" />
<col style="width: 8%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Module</p></th>
<th class="head"><p>Target</p></th>
<th class="head"><p>Base Address</p></th>
<th class="head"><p>Size</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FLASH</p></td>
<td><p>Flash</p></td>
<td><p>0xA0000000</p></td>
<td><p>128MB</p></td>
<td><p>Application address space</p></td>
</tr>
<tr class="row-odd"><td><p>PSRAM</p></td>
<td><p>pSRAM</p></td>
<td><p>0xA8000000</p></td>
<td><p>128MB</p></td>
<td><p>pSRAM memory address space (optional, depends on the specific chip model)</p></td>
</tr>
<tr class="row-even"><td><p>RAM</p></td>
<td><p>HBN RAM</p></td>
<td><p>0x20010000</p></td>
<td><p>4KB</p></td>
<td><p>HBN RAM,mainly used for data saving in ultra-low power mode</p></td>
</tr>
<tr class="row-odd"><td rowspan="28"><p>Peripheral</p></td>
<td><p>USB</p></td>
<td><p>0x20072000</p></td>
<td><p>4KB</p></td>
<td><p>USB High Speed OTG Control Register</p></td>
</tr>
<tr class="row-even"><td><p>EMAC</p></td>
<td><p>0x20070000</p></td>
<td><p>4KB</p></td>
<td><p>EMAC Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>SDH</p></td>
<td><p>0x20060000</p></td>
<td><p>4KB</p></td>
<td><p>SDH Control Register</p></td>
</tr>
<tr class="row-even"><td><p>MJPEG</p></td>
<td><p>0x20059000</p></td>
<td><p>4KB</p></td>
<td><p>MJPEG Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>DVP</p></td>
<td><p>0x20057000</p></td>
<td><p>4KB</p></td>
<td><p>DVP camera interface Control Register</p></td>
</tr>
<tr class="row-even"><td><p>Efuse</p></td>
<td><p>0x20056000</p></td>
<td><p>4KB</p></td>
<td><p>Efuse storage Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>AUDIO PWM</p></td>
<td><p>0x20055000</p></td>
<td><p>4KB</p></td>
<td><p>Audio PWM Control Register</p></td>
</tr>
<tr class="row-even"><td><p>PSRAM_Ctrl</p></td>
<td><p>0x20052000</p></td>
<td><p>4KB</p></td>
<td><p>PSRAM Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>HBN</p></td>
<td><p>0x2000F000</p></td>
<td><p>4KB</p></td>
<td><p>Hibernate register</p></td>
</tr>
<tr class="row-even"><td><p>PDS</p></td>
<td><p>0x2000E000</p></td>
<td><p>4KB</p></td>
<td><p>Power-down sleep register</p></td>
</tr>
<tr class="row-odd"><td><p>SDU</p></td>
<td><p>0x2000D000</p></td>
<td><p>4KB</p></td>
<td><p>SDU Control Register</p></td>
</tr>
<tr class="row-even"><td><p>DMA</p></td>
<td><p>0x2000C000</p></td>
<td><p>4KB</p></td>
<td><p>DMA Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>SF_Ctrl</p></td>
<td><p>0x2000B000</p></td>
<td><p>4KB</p></td>
<td><p>Serial Flash Control Register</p></td>
</tr>
<tr class="row-even"><td><p>Audio ADC</p></td>
<td><p>0x2000AC00</p></td>
<td><p>256B</p></td>
<td><p>Audio ADC Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>I2S</p></td>
<td><p>0x2000AB00</p></td>
<td><p>256B</p></td>
<td><p>I2S Control Register</p></td>
</tr>
<tr class="row-even"><td><p>I2C1</p></td>
<td><p>0x2000A900</p></td>
<td><p>256B</p></td>
<td><p>I2C1 Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>Display</p></td>
<td><p>0x2000A800</p></td>
<td><p>256B</p></td>
<td><p>Display Control Register</p></td>
</tr>
<tr class="row-even"><td><p>IRR</p></td>
<td><p>0x2000A600</p></td>
<td><p>256B</p></td>
<td><p>IR Receiver Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>TIMER</p></td>
<td><p>0x2000A500</p></td>
<td><p>256B</p></td>
<td><p>TIMER Control Register</p></td>
</tr>
<tr class="row-even"><td><p>PWM</p></td>
<td><p>0x2000A400</p></td>
<td><p>256B</p></td>
<td><p>PWM Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>I2C0</p></td>
<td><p>0x2000A300</p></td>
<td><p>256B</p></td>
<td><p>I2C0 Control Register</p></td>
</tr>
<tr class="row-even"><td><p>SPI</p></td>
<td><p>0x2000A200</p></td>
<td><p>256B</p></td>
<td><p>SPI Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>UART1</p></td>
<td><p>0x2000A100</p></td>
<td><p>256B</p></td>
<td><p>UART1 Control Register</p></td>
</tr>
<tr class="row-even"><td><p>UART0</p></td>
<td><p>0x2000A000</p></td>
<td><p>256B</p></td>
<td><p>UART0 Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>TZ</p></td>
<td><p>0x20005000</p></td>
<td><p>4KB</p></td>
<td><p>TrustZone Control Register</p></td>
</tr>
<tr class="row-even"><td><p>SEC_ENG</p></td>
<td><p>0x20004000</p></td>
<td><p>4KB</p></td>
<td><p>Security Engine Control Register</p></td>
</tr>
<tr class="row-odd"><td><p>GPIP</p></td>
<td><p>0x20002000</p></td>
<td><p>1KB</p></td>
<td><p>General Purpose DAC/ADC/ACOMP Interface Control Register</p></td>
</tr>
<tr class="row-even"><td><p>GLB</p></td>
<td><p>0x20000000</p></td>
<td><p>4KB</p></td>
<td><p>Global control register</p></td>
</tr>
<tr class="row-odd"><td><p>ROM</p></td>
<td><p>ROM</p></td>
<td><p>0x90000000</p></td>
<td><p>128KB</p></td>
<td><p>Bootrom address space</p></td>
</tr>
</tbody>
</table>
</section>
<section id="interrupt">
<h2><span class="section-number">2.6. </span>Interrupt<a class="headerlink" href="#interrupt" title="Permalink to this headline"></a></h2>
<p>BL616/BL618 supports internal RTC clock wake-up and external interrupt wake-up to realize low-power sleep wake-up function.</p>
<p>The CPU interrupt controller supports a total of 64 maskable interrupt trigger sources including UART interrupt, I2C interrupt, SPI interrupt, timer interrupt, DMA interrupt, etc.</p>
<p>All I/O pins can be configured as external interrupt input mode, the external interrupt supports nine trigger types: synchronous high/low level trigger, synchronous rising/falling edge trigger, asynchronous high/low level trigger, asynchronous rising edge /Falling edge trigger and synchronous double edge trigger.</p>
</section>
<section id="boot">
<h2><span class="section-number">2.7. </span>Boot<a class="headerlink" href="#boot" title="Permalink to this headline"></a></h2>
<p>BL616/BL618 supports multiple boot options: UART,USB,SDU and Flash.</p>
<table class="colwidths-given docutils align-center" id="id4" style="width: 100%">
<caption><span class="caption-number">Table 2.3 </span><span class="caption-text">Boot mode</span><a class="headerlink" href="#id4" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 12%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Boot pin</p></td>
<td><p>Level</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>GPIO2</p></td>
<td><p>1</p></td>
<td><p>Boot from UART(GPIO21/22)/USB/SDU, this mode is mainly used for flash programming or downloading image to RAM for execution (wireless transparent transmission scenario)</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>Launch application image from Flash</p></td>
</tr>
</tbody>
</table>
</section>
<section id="power">
<h2><span class="section-number">2.8. </span>Power<a class="headerlink" href="#power" title="Permalink to this headline"></a></h2>
<p>PMU (power management unit) manages the power of the entire chip and is divided into running, idle, sleep, hibernation and power off modes. The software can be configured to enter sleep mode and wake-up via RTC timer or EINT to achieve low-power sleep and accurate wake-up management.</p>
<p>Power down sleep modes are flexible for applications to configure as the lowest power consumption.</p>
</section>
<section id="clock">
<h2><span class="section-number">2.9. </span>Clock<a class="headerlink" href="#clock" title="Permalink to this headline"></a></h2>
<p>Clock control unit generates clocks to the core MCU and the peripheral SOC devices. The root clock source can be XTAL, PLL or RC oscillator.
Dynamic power-saved by proper configurations such as sel, div, en, etc.</p>
<figure class="align-center" id="id5">
<a class="reference internal image-reference" href="../_images/clock_tree.svg"><img alt="../_images/clock_tree.svg" height="876" src="../_images/clock_tree.svg" width="498" /></a>
<figcaption>
<p><span class="caption-number">Fig. 2.2 </span><span class="caption-text">Clock Architecture</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="peripheral">
<h2><span class="section-number">2.10. </span>Peripheral<a class="headerlink" href="#peripheral" title="Permalink to this headline"></a></h2>
<p>Peripherals include GPIO, UART, SPI, I2C, PWM, Timer, IR(RX), Display(DBI/QSPI),
I2S, Audio(Audio ADC+Audio DAC), SDU, DVP, MJPEG, SD/MMC(SDH), Ethernet MAC, GPDAC, GPADC, ACOMP, USB2.0.</p>
<section id="gpio">
<h3><span class="section-number">2.10.1. </span>GPIO<a class="headerlink" href="#gpio" title="Permalink to this headline"></a></h3>
<p>BL616 can have up to 19 GPIOs, BL618 can have up to 35 GPIOs, with the following features:</p>
<ul class="simple">
<li><p>Each GPIO can be used as general-purpose input and output function, pull-up/pull-down/float can be configured by software</p></li>
<li><p>Each GPIO supports interrupt function, the interrupt supports synchronous high/low level trigger, synchronous rising/falling edge trigger, asynchronous high/low level trigger, asynchronous rising/falling edge trigger and synchronous double edge trigger</p></li>
<li><p>Each GPIO can be set to high-impedance state for low-power modes</p></li>
</ul>
</section>
<section id="uart">
<h3><span class="section-number">2.10.2. </span>UART<a class="headerlink" href="#uart" title="Permalink to this headline"></a></h3>
<p>The chip has two built-in universal asynchronous serial transceivers (UART0/1) with the following features:</p>
<ul class="simple">
<li><p>Supports CTS and RTS flow control in hardware</p></li>
<li><p>Support LIN master/slave function</p></li>
<li><p>Configurable data bits, stop bits and parity bits</p></li>
<li><p>Supports automatic baud rate detection for common/fixed characters</p></li>
<li><p>The working clock can be selected as FCLK, XCLK or 160MHz, the maximum baud rate supports 10Mbps</p></li>
<li><p>TX and RX have independent FIFO, FIFO depth is 32 bytes, support DMA function</p></li>
</ul>
</section>
<section id="spi">
<h3><span class="section-number">2.10.3. </span>SPI<a class="headerlink" href="#spi" title="Permalink to this headline"></a></h3>
<p>The chip has a built-in SPI, which can be configured as master mode or slave mode. The SPI module clock is XCLK or 160MHz, and has the following characteristics:</p>
<ul>
<li><p>In master mode, clock frequency up to 80 MHz</p></li>
<li><p>In slave mode, the maximum allowed master clock frequency is 80 MHz</p></li>
<li><p>The bit width of each frame can be configured as 8-bit / 16-bit / 24-bit / 32-bit</p></li>
<li><p>Adaptive FIFO depth change characteristics, suitable for high-performance scene applications</p>
<blockquote>
<div><ul class="simple">
<li><p>When the bit width is 32 bits, the depth of the FIFO is 8</p></li>
<li><p>When the bit width is 24 bits, the depth of the FIFO is 8</p></li>
<li><p>When the bit width is 16 bits, the depth of the FIFO is 16</p></li>
<li><p>When the bit width is 8 bits, the depth of the FIFO is 32</p></li>
</ul>
</div></blockquote>
</li>
<li><p>Support DMA transfer mode</p></li>
</ul>
</section>
<section id="i2c">
<h3><span class="section-number">2.10.4. </span>I2C<a class="headerlink" href="#i2c" title="Permalink to this headline"></a></h3>
<p>The chip has two built-in I2C interfaces with the following features:</p>
<ul class="simple">
<li><p>Supports multi-master mode and arbitration function</p></li>
<li><p>The working clock can be selected as BCLK or XCLK</p></li>
<li><p>With device address register, register address register, register address length can be set to 1 byte/ 2 bytes/ 3 bytes/ 4 bytes</p></li>
<li><p>I2C has independent transceiver FIFO, FIFO depth is 2 word</p></li>
<li><p>Support DMA function</p></li>
</ul>
</section>
<section id="emac">
<h3><span class="section-number">2.10.5. </span>EMAC<a class="headerlink" href="#emac" title="Permalink to this headline"></a></h3>
<p>The EMAC module is a 10/100Mbps Ethernet Media Access Controller (EMAC) compatible with IEEE 802.3, with the following features:</p>
<ul class="simple">
<li><p>Compatible with the MAC layer defined by IEEE 802.3</p></li>
<li><p>PHY supporting MII/RMII interface defined by IEEE 802.3</p></li>
<li><p>Interacts with PHY through MDIO interface</p></li>
<li><p>Supports 10 Mbps and 100 Mbps Ethernet</p></li>
<li><p>Supports half-duplex and full-duplex</p></li>
<li><p>Supports automatic flow control and control frame generation in the full-duplex mode</p></li>
<li><p>Supports collision detection and retransmission in the half-duplex mode</p></li>
<li><p>Supports the generation and verification of CRC</p></li>
<li><p>Generates and removes data frame preamble</p></li>
<li><p>Supports automatic extension of short data frames when sending</p></li>
<li><p>Detects too long/short data frames (length limit)</p></li>
<li><p>Transmits long data frames (&gt; standard Ethernet frame length)</p></li>
<li><p>Automatically discards data packets with over-limit retransmission times or too small frame gap</p></li>
<li><p>Broadcast packet filtering</p></li>
<li><p>Internal RAM for storing up to 128 BDs</p></li>
<li><p>Splits and configures a data packet to multiple consecutive Bds when sending</p></li>
<li><p>Various event flags sent or received</p></li>
<li><p>Generates a corresponding interrupt when an event occurs</p></li>
</ul>
<p>The EMAC timing diagram is shown below:</p>
<figure class="align-center" id="id6">
<img alt="../_images/EMACTiming.svg" src="../_images/EMACTiming.svg" /><figcaption>
<p><span class="caption-number">Fig. 2.3 </span><span class="caption-text">EMAC Timing Diagram</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<table class="colwidths-given docutils align-center" id="id7" style="width: 100%">
<caption><span class="caption-number">Table 2.4 </span><span class="caption-text">Timing conditions for using RX Clock</span><a class="headerlink" href="#id7" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="7"><p>Set the corresponding bit of register eth_cfg0:cfg_inv_eth_rx_clk = 1，cfg_inv_eth_tx_clk = 0，cfg_sel_eth_ref_clk_o = 0</p></th>
</tr>
<tr class="row-even"><th class="head" colspan="2"><p>Timing parameters(1.8V, Load = 20PF)</p></th>
<th class="head"><p>Min.</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Max.</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>T<sub>cyc</sub></p></td>
<td><p>Clock Cycle</p></td>
<td><p>-</p></td>
<td><p>20</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>Clock From ETH PHY</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>vld</sub></p></td>
<td><p>Output Valid Delay</p></td>
<td><p>6.98</p></td>
<td><p>-</p></td>
<td><p>15.63</p></td>
<td><p>ns</p></td>
<td><p>TXD/TX_EN</p></td>
</tr>
<tr class="row-odd"><td><p>T<sub>su</sub></p></td>
<td><p>Input Setup Time</p></td>
<td><p>11.64</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>h</sub></p></td>
<td><p>Input Hold Time</p></td>
<td><p>0</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-center" id="id8" style="width: 100%">
<caption><span class="caption-number">Table 2.5 </span><span class="caption-text">Timing conditions without using RX Clock</span><a class="headerlink" href="#id8" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="7"><p>Set the corresponding bit of register eth_cfg0:cfg_inv_eth_rx_clk = 0，cfg_inv_eth_tx_clk = 0，cfg_sel_eth_ref_clk_o = 0</p></th>
</tr>
<tr class="row-even"><th class="head" colspan="2"><p>Timing parameters(1.8V, Load = 20PF)</p></th>
<th class="head"><p>Min.</p></th>
<th class="head"><p>Typ</p></th>
<th class="head"><p>Max.</p></th>
<th class="head"><p>Unit</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>T<sub>cyc</sub></p></td>
<td><p>Clock Cycle</p></td>
<td><p>-</p></td>
<td><p>20</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>Clock From ETH PHY</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>vld</sub></p></td>
<td><p>Output Valid Delay</p></td>
<td><p>6.98</p></td>
<td><p>-</p></td>
<td><p>15.63</p></td>
<td><p>ns</p></td>
<td><p>TXD/TX_EN</p></td>
</tr>
<tr class="row-odd"><td><p>T<sub>su</sub></p></td>
<td><p>Input Setup Time</p></td>
<td><p>3.5</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>h</sub></p></td>
<td><p>Input Hold Time</p></td>
<td><p>2</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s">
<h3><span class="section-number">2.10.6. </span>I2S<a class="headerlink" href="#i2s" title="Permalink to this headline"></a></h3>
<p>The chip has a built-in I2S interface with the following features:</p>
<ul class="simple">
<li><p>Supports master mode as well as slave mode</p></li>
<li><p>Support Left-justified/ Right-justified/ DSP and other data formats, the data width can be configured as 8/16/24/32 bits</p></li>
<li><p>The working clock is Audio PLL</p></li>
<li><p>Supports both four-channel and six-channel modes in addition to mono/dual-channel mode</p></li>
<li><p>Supports playback of mono audio dubbing to binaural mode</p></li>
<li><p>Support dynamic mute switching function</p></li>
<li><p>I2S has independent transceiver FIFO, FIFO depth is 16 word</p></li>
<li><p>Support DMA function</p></li>
</ul>
</section>
<section id="timer">
<h3><span class="section-number">2.10.7. </span>TIMER<a class="headerlink" href="#timer" title="Permalink to this headline"></a></h3>
<p>The chip has two built-in 32-bit general-purpose timers and a watchdog timer with the following features:</p>
<ul class="simple">
<li><p>The clock source of the general timer can be selected from FCLK/32K/XTAL, and the clock source of the watchdog timer can be selected from FCLK/32K/XTAL</p></li>
<li><p>8-bit divider for each counter</p></li>
<li><p>Each group of general-purpose timers includes three compare registers, supports compare interrupts, and supports FreeRun mode and PreLoad mode in counting mode</p></li>
<li><p>16-bit watchdog timer, supports two watchdog overflow modes: interrupt or reset</p></li>
</ul>
</section>
<section id="pwm">
<h3><span class="section-number">2.10.8. </span>PWM<a class="headerlink" href="#pwm" title="Permalink to this headline"></a></h3>
<p>The chip has a built-in group of PWM signals, each group contains 4-channel PWM signal output, and each channel can be set to 2-channel complementary PWM, with the following characteristics:</p>
<ul class="simple">
<li><p>Three clock sources BCLK/XCLK/32K to choose from, with 16-bit clock divider</p></li>
<li><p>Each group of PWM can be independently set to a different period</p></li>
<li><p>Each channel PWM has dual threshold settings, which can set different duty cycles and phases to increase pulse elasticity</p></li>
<li><p>Each channel PWM has independent dead time setting</p></li>
<li><p>Each PWM output pin can be set to a different active level</p></li>
<li><p>Each PWM has an independent connection switch to select whether to connect to the internal counter, and to set the default output level when not connected</p></li>
<li><p>Brake signal can put the PWM output level into a preset state</p></li>
<li><p>Up to 11 trigger sources that can be used to trigger ADC conversions</p></li>
<li><p>Supports multiple interrupt types: counter overflow interrupt, threshold value comparison interrupt, cycle count interrupt</p></li>
</ul>
</section>
<section id="ir-ir-remote">
<h3><span class="section-number">2.10.9. </span>IR(IR-remote)<a class="headerlink" href="#ir-ir-remote" title="Permalink to this headline"></a></h3>
<p>The chip has a built-in infrared remote control with the following features:</p>
<ul class="simple">
<li><p>Supports receiving data with fixed protocols NEC, RC-5, and receiving data in any format with pulse width counting</p></li>
<li><p>The clock source is XCLK, the maximum operating frequency is 40MHz</p></li>
<li><p>Receive supports up to 64-bit data bits</p></li>
<li><p>Receive FIFO depth of 128 bytes</p></li>
<li><p>Support receive end interrupt</p></li>
</ul>
</section>
<section id="audio-adc">
<h3><span class="section-number">2.10.10. </span>Audio ADC<a class="headerlink" href="#audio-adc" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The chip has an integrated 1-channel audio ADC (not to be used simultaneously with the high precision ADC) with the following features:</p>
<ul>
<li><p>Sampling rate:8k~96k</p></li>
<li><p>Signal-to-noise ratio (A-W): 96dB &#64; 6dB gain, 48K sampling rate</p></li>
<li><p>Harmonic distortion + noise: -90dB &#64; 6dB gain, 48K sample rate</p></li>
<li><p>Analogue preamp gain: 6 to 42 dB, 3dB steps</p></li>
<li><p>Analogue fully differential input or single-ended input</p></li>
</ul>
</li>
<li><p>Adjustable high-pass filter and digital volume control</p></li>
<li><p>PDM interface support (1 way DMIC supported)</p></li>
<li><p>Input signal multiplexing GPIO</p></li>
<li><p>Transmit FIFO width of 32-bit, depth of 8</p></li>
<li><p>Support for DMA transfer mode</p></li>
</ul>
</section>
<section id="audio-dac">
<h3><span class="section-number">2.10.11. </span>Audio DAC<a class="headerlink" href="#audio-dac" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Chip with integrated 1-channel audio DAC with the following features.</p>
<ul>
<li><p>Sampling rate:8k~48k</p></li>
<li><p>Signal to noise ratio (A-W): 95dB &#64; 48K sample rate</p></li>
<li><p>Harmonic distortion + noise: -80dB &#64; 48K sample rate</p></li>
</ul>
</li>
<li><p>Adjustable digital volume control</p></li>
<li><p>Supports differential complementary outputs</p></li>
<li><p>Output signal multiplexing GPIO</p></li>
<li><p>Transmit FIFO width of 32-bit, depth of 16</p></li>
<li><p>Support for DMA transfer mode</p></li>
</ul>
</section>
<section id="gpadc">
<h3><span class="section-number">2.10.12. </span>GPADC<a class="headerlink" href="#gpadc" title="Permalink to this headline"></a></h3>
<p>The chip has a built-in 12bits successive approximation analog-to-digital converter (ADC) with the following features.</p>
<ul class="simple">
<li><p>The maximum sampling rate of single-channel continuous conversion mode can reach 2M, and the maximum sampling rate of other conversion modes is 500K</p></li>
<li><p>Supports 12 external analog channels</p></li>
<li><p>Support single-channel single conversion, single-channel continuous conversion, multi-channel single conversion, multi-channel continuous conversion</p></li>
<li><p>Supports 2.0V, 3.2V selectable internal reference voltages and 12/14/16bits (via oversampling) left-aligned conversion results</p></li>
<li><p>32-byte deep FIFO, multiple interrupt support, DMA support</p></li>
<li><p>ADC can be used to measure supply voltages in addition to common analog signal measurements</p></li>
<li><p>Can be used for temperature detection by measuring internal/external diode voltages</p></li>
</ul>
</section>
<section id="high-precision-adc">
<h3><span class="section-number">2.10.13. </span>High precision ADC<a class="headerlink" href="#high-precision-adc" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>The chip has a built-in 1-channel high precision ADC (not to be used simultaneously with audio CODEC) with the following features.</p>
<ul>
<li><p>Supports fully differential input, 4 channels</p></li>
<li><p>Effective resolution (ER): 19.5 bit</p></li>
<li><p>Programmable gain amplifier: 6dB to 42dB (2 to 128x), 3dB steps</p></li>
<li><p>Programmable data rates: 20SPS, 100SPS, 200SPS, 400SPS, 1000SPS, 2000SPS</p></li>
<li><p>Supports high accuracy/low latency dual set digital filters</p></li>
<li><p>Supports 50Hz/60Hz simultaneous frequency suppression</p></li>
<li><p>Supports software global chopping, ER=20.7bit, below 1uV detuning voltage</p></li>
</ul>
</li>
<li><p>Multiplexed GPIO input signals</p></li>
<li><p>Transmit FIFO width of 32-bit, depth of 8</p></li>
<li><p>Supports polling, interrupt and DMA transfer modes</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="1. Overview" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="Pindefinition.html" class="btn btn-neutral float-right" title="3. Pin Definition" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>