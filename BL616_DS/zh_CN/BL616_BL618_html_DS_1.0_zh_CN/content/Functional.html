<!DOCTYPE html>
<html class="writer-html5" lang="zh" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>2. 功能描述 &mdash; BL616/BL618 数据手册  文档</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="索引" href="../genindex.html" />
    <link rel="search" title="搜索" href="../search.html" />
    <link rel="next" title="3. 管脚定义" href="Pindefinition.html" />
    <link rel="prev" title="1. 概述" href="overview.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL616/BL618 数据手册
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="在文档中搜索" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">1. 概述</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">2. 功能描述</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#cpu">2.1. CPU</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id2">2.2. 缓存</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id3">2.3. 内存</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dma">2.4. DMA控制器</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id4">2.5. 地址映射</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id5">2.6. 中断</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id6">2.7. 启动选项</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id7">2.8. 电源管理单元</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id8">2.9. 时钟架构</a></li>
<li class="toctree-l2"><a class="reference internal" href="#id9">2.10. 外设</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#gpio">2.10.1. GPIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="#uart">2.10.2. UART</a></li>
<li class="toctree-l3"><a class="reference internal" href="#spi">2.10.3. SPI</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c">2.10.4. I2C</a></li>
<li class="toctree-l3"><a class="reference internal" href="#emac">2.10.5. EMAC</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2s">2.10.6. I2S</a></li>
<li class="toctree-l3"><a class="reference internal" href="#timer">2.10.7. TIMER</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pwm">2.10.8. PWM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ir-ir-remote">2.10.9. IR(IR-remote)</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="Pindefinition.html">3. 管脚定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="RFCharacteristic.html">4. 射频特性</a></li>
<li class="toctree-l1"><a class="reference internal" href="AudioCharacteristic.html">5. 音频特性</a></li>
<li class="toctree-l1"><a class="reference internal" href="PowerConsumption.html">6. 功耗</a></li>
<li class="toctree-l1"><a class="reference internal" href="Electricalcharacteristics.html">7. 电气特性</a></li>
<li class="toctree-l1"><a class="reference internal" href="ProductUse.html">8. 产品使用</a></li>
<li class="toctree-l1"><a class="reference internal" href="Referencedesign.html">9. 参考设计</a></li>
<li class="toctree-l1"><a class="reference internal" href="PackagingQFN40.html">10. 封装信息QFN40</a></li>
<li class="toctree-l1"><a class="reference internal" href="PackagingQFN56.html">11. 封装信息QFN56</a></li>
<li class="toctree-l1"><a class="reference internal" href="TopMarkingDefinition.html">12. 标志定义</a></li>
<li class="toctree-l1"><a class="reference internal" href="OrderingInformation.html">13. 订购信息</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">14. 版本信息</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL616/BL618 数据手册</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">2. </span>功能描述</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="id1">
<h1><span class="section-number">2. </span>功能描述<a class="headerlink" href="#id1" title="永久链接至标题"></a></h1>
<p>BL616/BL618 系统架构如下所示:</p>
<figure class="align-center" id="id10">
<a class="reference internal image-reference" href="../_images/SystemArch.svg"><img alt="../_images/SystemArch.svg" src="../_images/SystemArch.svg" /></a>
<figcaption>
<p><span class="caption-number">图 2.1 </span><span class="caption-text">系统架构图</span><a class="headerlink" href="#id10" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<p>CPU带有AXI和AHB两条总线，ROM，Flash和PSRAM挂在 AXI 总线上，以实现对这些存储单元的高速访问，各个外设通过 AHB 总线与 CPU 连接在一起。</p>
<section id="cpu">
<h2><span class="section-number">2.1. </span>CPU<a class="headerlink" href="#cpu" title="永久链接至标题"></a></h2>
<p>BL616/BL618 内置一颗 32-bit RISC-V CPU，它采用5级流水线结构：取指、译码、执行、内存访问、写回，
支持 RISC-V 32/16 位混编指令集，包含 64 个外部中断源，有 4 个 bits 可以用于配置中断优先级。</p>
</section>
<section id="id2">
<h2><span class="section-number">2.2. </span>缓存<a class="headerlink" href="#id2" title="永久链接至标题"></a></h2>
<p>BL616/BL618 的缓存提高了 CPU 访问外部存储器的效能，包含 32K 指令 cache 和 16K 数据 cache。</p>
</section>
<section id="id3">
<h2><span class="section-number">2.3. </span>内存<a class="headerlink" href="#id3" title="永久链接至标题"></a></h2>
<p>BL616/BL618 存储器包括：片上零延迟SRAM存储器 ，只读存储器，一次写入存储器，
嵌入式闪存（可选），嵌入式pSRAM（可选）。</p>
</section>
<section id="dma">
<h2><span class="section-number">2.4. </span>DMA控制器<a class="headerlink" href="#dma" title="永久链接至标题"></a></h2>
<p>BL616/BL618 DMA（直接存储器访问）控制器具有 4 个专用通道，用于管理外设和存储器之间的数据传输，以
提高 CPU /总线效率。DMA 有四种传输类型，内存到内存，内存到外设、外设到内存以及外设到外设四种模式。</p>
<p>DMA还支持 LLI（链接列表项）功能，该链表由一系列链接列表预定义多个传输，然后硬件会根据每个 LLI 的大小和地址自
动完成所有传输。</p>
<p>DMA 支持的外设包括 UART、I2C、SPI、Audio(Audio ADC和Audio DAC)、GPIO、I2S、DBI、
GPADC、GPDAC。</p>
</section>
<section id="id4">
<h2><span class="section-number">2.5. </span>地址映射<a class="headerlink" href="#id4" title="永久链接至标题"></a></h2>
<table class="colwidths-given docutils align-center" id="id11" style="width: 100%">
<caption><span class="caption-number">表 2.1 </span><span class="caption-text">内存地址映射</span><a class="headerlink" href="#id11" title="永久链接至表格"></a></caption>
<colgroup>
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
<col style="width: 25%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" rowspan="2"><p>模块</p></th>
<th class="head" rowspan="2"><p>大小</p></th>
<th class="head" colspan="2"><p>开始地址</p></th>
</tr>
<tr class="row-even"><th class="head"><p>Cache</p></th>
<th class="head"><p>Non-cache</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>OCRAM</p></td>
<td><p>320KB</p></td>
<td><p>0x62FC0000</p></td>
<td><p>0x22FC0000</p></td>
</tr>
<tr class="row-even"><td><p>WRAM</p></td>
<td><p>160KB</p></td>
<td><p>0x63010000</p></td>
<td><p>0x23010000</p></td>
</tr>
</tbody>
</table>
<p>OCRAM 和 WRAM 既可以通过 AHB 总线访问，也可以通过 AXI 访问，当 CPU 使用 0x62FC0000 地址访问 OCRAM 时，会经过内部 Cache 并通过 AXI 转 AHB 实现对 OCRAM 的访问，
当 CPU 使用 0x22FC0000 地址访问 OCRAM 时，不会经过内部 Cache 并且直接通过 AHB 总线访问 OCRAM 。</p>
<table class="colwidths-given docutils align-center" id="id12" style="width: 100%">
<caption><span class="caption-number">表 2.2 </span><span class="caption-text">地址映射</span><a class="headerlink" href="#id12" title="永久链接至表格"></a></caption>
<colgroup>
<col style="width: 11%" />
<col style="width: 15%" />
<col style="width: 15%" />
<col style="width: 8%" />
<col style="width: 51%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>模块</p></th>
<th class="head"><p>目标</p></th>
<th class="head"><p>开始地址</p></th>
<th class="head"><p>大小</p></th>
<th class="head"><p>描述</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>FLASH</p></td>
<td><p>Flash</p></td>
<td><p>0xA0000000</p></td>
<td><p>128MB</p></td>
<td><p>应用程序地址空间</p></td>
</tr>
<tr class="row-odd"><td><p>PSRAM</p></td>
<td><p>pSRAM</p></td>
<td><p>0xA8000000</p></td>
<td><p>128MB</p></td>
<td><p>pSRAM 存储器地址空间(可选项，依赖芯片具体型号)</p></td>
</tr>
<tr class="row-even"><td><p>RAM</p></td>
<td><p>HBN RAM</p></td>
<td><p>0x20010000</p></td>
<td><p>4KB</p></td>
<td><p>HBN RAM,主要用于超低功耗模式下的数据保存</p></td>
</tr>
<tr class="row-odd"><td rowspan="29"><p>Peripheral</p></td>
<td><p>USB</p></td>
<td><p>0x20072000</p></td>
<td><p>4KB</p></td>
<td><p>USB High Speed OTG 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>EMAC</p></td>
<td><p>0x20070000</p></td>
<td><p>4KB</p></td>
<td><p>EMAC 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>SDH</p></td>
<td><p>0x20060000</p></td>
<td><p>4KB</p></td>
<td><p>SDH 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>MJPEG</p></td>
<td><p>0x20059000</p></td>
<td><p>4KB</p></td>
<td><p>MJPEG 图像编码控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>DVP</p></td>
<td><p>0x20057000</p></td>
<td><p>4KB</p></td>
<td><p>DVP 摄像头接口控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>Efuse</p></td>
<td><p>0x20056000</p></td>
<td><p>4KB</p></td>
<td><p>Efuse存储控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>AUDIO DAC</p></td>
<td><p>0x20055000</p></td>
<td><p>4KB</p></td>
<td><p>Audio DAC 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>PSRAM_Ctrl</p></td>
<td><p>0x20052000</p></td>
<td><p>4KB</p></td>
<td><p>PSRAM 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>HBN</p></td>
<td><p>0x2000F000</p></td>
<td><p>4KB</p></td>
<td><p>深度睡眠控制（休眠）寄存器</p></td>
</tr>
<tr class="row-even"><td><p>PDS</p></td>
<td><p>0x2000E000</p></td>
<td><p>4KB</p></td>
<td><p>睡眠控制（掉电睡眠）寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>SDU</p></td>
<td><p>0x2000D000</p></td>
<td><p>4KB</p></td>
<td><p>SDU 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>DMA</p></td>
<td><p>0x2000C000</p></td>
<td><p>4KB</p></td>
<td><p>DMA 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>SF_Ctrl</p></td>
<td><p>0x2000B000</p></td>
<td><p>4KB</p></td>
<td><p>Serial Flash 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>Audio ADC</p></td>
<td><p>0x2000AC00</p></td>
<td><p>256B</p></td>
<td><p>Audio ADC 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>I2S</p></td>
<td><p>0x2000AB00</p></td>
<td><p>256B</p></td>
<td><p>I2S 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>ISO 17987</p></td>
<td><p>0x2000AA00</p></td>
<td><p>256B</p></td>
<td><p>ISO 17987控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>I2C1</p></td>
<td><p>0x2000A900</p></td>
<td><p>256B</p></td>
<td><p>I2C1 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>Display</p></td>
<td><p>0x2000A800</p></td>
<td><p>256B</p></td>
<td><p>Display 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>IRR</p></td>
<td><p>0x2000A600</p></td>
<td><p>256B</p></td>
<td><p>IR Receiver 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>TIMER</p></td>
<td><p>0x2000A500</p></td>
<td><p>256B</p></td>
<td><p>TIMER 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>PWM</p></td>
<td><p>0x2000A400</p></td>
<td><p>256B</p></td>
<td><p>PWM 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>I2C0</p></td>
<td><p>0x2000A300</p></td>
<td><p>256B</p></td>
<td><p>I2C0 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>SPI</p></td>
<td><p>0x2000A200</p></td>
<td><p>256B</p></td>
<td><p>SPI 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>UART1</p></td>
<td><p>0x2000A100</p></td>
<td><p>256B</p></td>
<td><p>UART1 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>UART0</p></td>
<td><p>0x2000A000</p></td>
<td><p>256B</p></td>
<td><p>UART0 控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>TZ</p></td>
<td><p>0x20005000</p></td>
<td><p>4KB</p></td>
<td><p>TrustZone 控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>SEC_ENG</p></td>
<td><p>0x20004000</p></td>
<td><p>4KB</p></td>
<td><p>安全引擎控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>GPIP</p></td>
<td><p>0x20002000</p></td>
<td><p>1KB</p></td>
<td><p>通用DAC/ADC/ACOMP接口控制寄存器</p></td>
</tr>
<tr class="row-odd"><td><p>GLB</p></td>
<td><p>0x20000000</p></td>
<td><p>4KB</p></td>
<td><p>全局控制寄存器</p></td>
</tr>
<tr class="row-even"><td><p>ROM</p></td>
<td><p>ROM</p></td>
<td><p>0x90000000</p></td>
<td><p>128KB</p></td>
<td><p>Bootrom区域地址空间</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id5">
<h2><span class="section-number">2.6. </span>中断<a class="headerlink" href="#id5" title="永久链接至标题"></a></h2>
<p>BL616/BL618 中断控制器支持 UART/I2C/SPI/Timer/DMA/EMAC/WiFi/BLE等共64个可屏蔽中断触发源。</p>
<p>所有 I/O 引脚都可以配置为外部中断输入模式，外部中断支持同步高/低电平触发、同步上升沿/下降沿触发、
异步高/低电平触发、异步上升沿/下降沿触发和同步双边沿触发共 9 种触发类型。</p>
</section>
<section id="id6">
<h2><span class="section-number">2.7. </span>启动选项<a class="headerlink" href="#id6" title="永久链接至标题"></a></h2>
<p>BL616/BL618 支持多种启动选项，可选择从 Flash/UART/USB/SDU 启动。</p>
<table class="colwidths-given docutils align-center" id="id13" style="width: 100%">
<caption><span class="caption-number">表 2.3 </span><span class="caption-text">启动模式</span><a class="headerlink" href="#id13" title="永久链接至表格"></a></caption>
<colgroup>
<col style="width: 13%" />
<col style="width: 12%" />
<col style="width: 75%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>启动引脚</p></td>
<td><p>电平</p></td>
<td><p>描述</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>GPIO2</p></td>
<td><p>1</p></td>
<td><p>从 UART(GPIO21/22)/USB/SDU启动，该模式主要用于Flash烧写或者下载镜像到RAM执行(无线透传场景)</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>从 Flash 启动应用镜像</p></td>
</tr>
</tbody>
</table>
</section>
<section id="id7">
<h2><span class="section-number">2.8. </span>电源管理单元<a class="headerlink" href="#id7" title="永久链接至标题"></a></h2>
<p>电源管理单元（PMU）管理整个芯片的电源，芯片中有 8 个电源域：PD_AON/PD_AON_HBNRTC/PD_AON_HBNCORE/PD_CORE/PD_CORE_MISC/PD_USB/PD_CPU/PD_WB。
可以实现的低功耗模式包括运行、空闲、睡眠(PDS)、休眠(HBN)和电源关闭。在睡眠(PDS)和休眠(HBN)模式下，可以有多种唤醒源将系统从低功耗模式唤醒。</p>
</section>
<section id="id8">
<h2><span class="section-number">2.9. </span>时钟架构<a class="headerlink" href="#id8" title="永久链接至标题"></a></h2>
<p>时钟控制单元为核心MCU和外围SOC设备生成时钟。时钟源可以是XTAL，PLL或RC振荡器。用户可以通过适当的配置（例如sel，div，en等）来设定各个外设的
时钟频率或者开关外设的时钟，以达到低功耗的应用需求。</p>
<figure class="align-center" id="id14">
<img alt="../_images/SystemClock.svg" src="../_images/SystemClock.svg" /><figcaption>
<p><span class="caption-number">图 2.2 </span><span class="caption-text">系统时钟架构</span><a class="headerlink" href="#id14" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id15">
<img alt="../_images/MoudleClock.svg" src="../_images/MoudleClock.svg" /><figcaption>
<p><span class="caption-number">图 2.3 </span><span class="caption-text">模块时钟架构</span><a class="headerlink" href="#id15" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<figure class="align-center" id="id16">
<a class="reference internal image-reference" href="../_images/PeripheralClock.svg"><img alt="../_images/PeripheralClock.svg" src="../_images/PeripheralClock.svg" /></a>
<figcaption>
<p><span class="caption-number">图 2.4 </span><span class="caption-text">外设时钟架构</span><a class="headerlink" href="#id16" title="永久链接至图片"></a></p>
</figcaption>
</figure>
</section>
<section id="id9">
<h2><span class="section-number">2.10. </span>外设<a class="headerlink" href="#id9" title="永久链接至标题"></a></h2>
<p>外设包括 GPIO， UART， SPI， I2C， PWM， Timer， IR(RX)， Display(DBI/QSPI)， ISO 17987，
I2S， Audio(Audio ADC+Audio DAC)， SDU， DVP， MJPEG，
SD/MMC(SDH)， Ethernet MAC， GPDAC， GPADC， ACOMP，
USB2.0。</p>
<section id="gpio">
<h3><span class="section-number">2.10.1. </span>GPIO<a class="headerlink" href="#gpio" title="永久链接至标题"></a></h3>
<p>BL616 最多可达 19 个 GPIO，BL618 最多可达 35 个 GPIO，具有以下特性：</p>
<ul class="simple">
<li><p>每个 GPIO 都可用作通用输入和输出功能，上拉/下拉/浮空可由软件配置</p></li>
<li><p>每个 GPIO 都支持中断功能，中断支持同步高/低电平触发、同步上升沿/下降沿触发、异步高/低电平触发、异步上升沿/下降沿触发和同步双边沿触发</p></li>
<li><p>每个 GPIO 均可设置为高阻态，用于低功耗模式</p></li>
<li><p>每个 GPIO 均可通过Set/Clear寄存器完成输出状态的控制</p></li>
<li><p>支持自定义的逻辑0/1波形输出</p></li>
<li><p>支持DMA</p></li>
</ul>
</section>
<section id="uart">
<h3><span class="section-number">2.10.2. </span>UART<a class="headerlink" href="#uart" title="永久链接至标题"></a></h3>
<p>芯片内置两个通用异步串行收发器(UART0/1)，具有以下特性：</p>
<ul class="simple">
<li><p>支持硬件的 CTS 和 RTS 流控</p></li>
<li><p>支持 LIN 主/从功能</p></li>
<li><p>可配置的数据位、停止位和奇偶校验位</p></li>
<li><p>支持普通/固定字符的自动波特率检测</p></li>
<li><p>工作时钟可以选择为 FCLK 、XCLK 或 160MHz， 波特率最大支持 10Mbps</p></li>
<li><p>TX 和 RX 具有独立 FIFO，FIFO深度为 32 字节，支持 DMA 功能</p></li>
</ul>
</section>
<section id="spi">
<h3><span class="section-number">2.10.3. </span>SPI<a class="headerlink" href="#spi" title="永久链接至标题"></a></h3>
<p>芯片内置一个 SPI，可以配置为主机模式或者从机模式，SPI 模块时钟是 XCLK 或 160MHz，具有以下特性：</p>
<ul class="simple">
<li><p>主机模式下，时钟频率最高为 80 MHz</p></li>
<li><p>从机模式下，允许主机最大的时钟频率为 80 MHz</p></li>
<li><p>每帧的位宽可以配置为 8 位/ 16 位/ 24 位/ 32 位</p></li>
<li><p>自适应的 FIFO 深度变化特性，适配高性能的场景应用</p>
<ul>
<li><p>当位宽为 32 位时，FIFO 的深度为 8</p></li>
<li><p>当位宽为 24 位时，FIFO 的深度为 8</p></li>
<li><p>当位宽为 16 位时，FIFO 的深度为 16</p></li>
<li><p>当位宽为 8 位时，FIFO 的深度为 32</p></li>
</ul>
</li>
<li><p>支持DMA传输模式</p></li>
</ul>
</section>
<section id="i2c">
<h3><span class="section-number">2.10.4. </span>I2C<a class="headerlink" href="#i2c" title="永久链接至标题"></a></h3>
<p>芯片内置两个 I2C 接口，具有以下特性：</p>
<ul class="simple">
<li><p>支持多主机模式和仲裁功能</p></li>
<li><p>工作时钟可以选择为 BCLK 或者 XCLK</p></li>
<li><p>具有器件地址寄存器，寄存器地址寄存器，寄存器地址长度可设置为 1 字节/ 2 字节/ 3 字节/ 4 字节</p></li>
<li><p>I2C 具有独立收发 FIFO，FIFO 深度为 2 word</p></li>
<li><p>支持 DMA 功能</p></li>
</ul>
</section>
<section id="emac">
<h3><span class="section-number">2.10.5. </span>EMAC<a class="headerlink" href="#emac" title="永久链接至标题"></a></h3>
<p>EMAC 模块是一个兼容 IEEE 802.3 的 10/100Mbps 以太网 MAC(Ethernet Media Access Controller)，具有以下特性：</p>
<ul class="simple">
<li><p>兼容 IEEE 802.3 定义的 MAC 层功能</p></li>
<li><p>支持 IEEE 802.3 定义的 MII/RMII 接口的 PHY</p></li>
<li><p>通过 MDIO 接口与 PHY 交互</p></li>
<li><p>支持 10Mbps 与 100Mbps 以太网</p></li>
<li><p>支持半双工与全双工</p></li>
<li><p>在全双工模式下，支持自动流控及生成控制帧</p></li>
<li><p>在半双工模式下，支持碰撞检测及重传</p></li>
<li><p>支持 CRC 的生成及校验</p></li>
<li><p>数据帧前导生成及移除</p></li>
<li><p>发送时，自动扩展短的数据帧</p></li>
<li><p>检测过长或过短的数据帧 (长度限制)</p></li>
<li><p>可传输长数据帧 (&gt; 标准以太帧长度)</p></li>
<li><p>自动丢弃重发次数超限或帧间隙过小的数据包</p></li>
<li><p>广播包过滤</p></li>
<li><p>用于保存多达 128 个 BD(Buffer Descriptor) 的内部 RAM</p></li>
<li><p>在发送时，支持将一个数据包分拆配置到多个连续的 BD</p></li>
<li><p>发送/接收的各种事件标志</p></li>
<li><p>在事件发生时产生对应中断</p></li>
</ul>
<p>EMAC 时序图如下所示：</p>
<figure class="align-center" id="id17">
<img alt="../_images/EMACTiming.svg" src="../_images/EMACTiming.svg" /><figcaption>
<p><span class="caption-number">图 2.5 </span><span class="caption-text">EMAC 时序图</span><a class="headerlink" href="#id17" title="永久链接至图片"></a></p>
</figcaption>
</figure>
<table class="colwidths-given docutils align-center" id="id18" style="width: 100%">
<caption><span class="caption-number">表 2.4 </span><span class="caption-text">使用 RX Clock 对应的时序条件</span><a class="headerlink" href="#id18" title="永久链接至表格"></a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="7"><p>将寄存器 eth_cfg0 对应的位设置为：cfg_inv_eth_rx_clk = 1，cfg_inv_eth_tx_clk = 0，cfg_sel_eth_ref_clk_o = 0</p></th>
</tr>
<tr class="row-even"><th class="head" colspan="2"><p>时序参数（1.8V, Load = 20PF）</p></th>
<th class="head"><p>最小值</p></th>
<th class="head"><p>典型值</p></th>
<th class="head"><p>最大值</p></th>
<th class="head"><p>单位</p></th>
<th class="head"><p>备注</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>T<sub>cyc</sub></p></td>
<td><p>Clock Cycle</p></td>
<td><p>-</p></td>
<td><p>20</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>Clock From ETH PHY</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>vld</sub></p></td>
<td><p>Output Valid Delay</p></td>
<td><p>6.98</p></td>
<td><p>-</p></td>
<td><p>15.63</p></td>
<td><p>ns</p></td>
<td><p>TXD/TX_EN</p></td>
</tr>
<tr class="row-odd"><td><p>T<sub>su</sub></p></td>
<td><p>Input Setup Time</p></td>
<td><p>11.64</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>h</sub></p></td>
<td><p>Input Hold Time</p></td>
<td><p>0</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
</tbody>
</table>
<table class="colwidths-given docutils align-center" id="id19" style="width: 100%">
<caption><span class="caption-number">表 2.5 </span><span class="caption-text">不使用 RX Clock 对应的时序条件</span><a class="headerlink" href="#id19" title="永久链接至表格"></a></caption>
<colgroup>
<col style="width: 10%" />
<col style="width: 20%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 30%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head" colspan="7"><p>将寄存器 eth_cfg0 对应的位设置为：cfg_inv_eth_rx_clk = 0，cfg_inv_eth_tx_clk = 0，cfg_sel_eth_ref_clk_o = 0</p></th>
</tr>
<tr class="row-even"><th class="head" colspan="2"><p>时序参数（1.8V, Load = 20PF）</p></th>
<th class="head"><p>最小值</p></th>
<th class="head"><p>典型值</p></th>
<th class="head"><p>最大值</p></th>
<th class="head"><p>单位</p></th>
<th class="head"><p>备注</p></th>
</tr>
</thead>
<tbody>
<tr class="row-odd"><td><p>T<sub>cyc</sub></p></td>
<td><p>Clock Cycle</p></td>
<td><p>-</p></td>
<td><p>20</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>Clock From ETH PHY</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>vld</sub></p></td>
<td><p>Output Valid Delay</p></td>
<td><p>6.98</p></td>
<td><p>-</p></td>
<td><p>15.63</p></td>
<td><p>ns</p></td>
<td><p>TXD/TX_EN</p></td>
</tr>
<tr class="row-odd"><td><p>T<sub>su</sub></p></td>
<td><p>Input Setup Time</p></td>
<td><p>3.5</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
<tr class="row-even"><td><p>T<sub>h</sub></p></td>
<td><p>Input Hold Time</p></td>
<td><p>2</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>ns</p></td>
<td><p>RXD/RX_DV/RXERR</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2s">
<h3><span class="section-number">2.10.6. </span>I2S<a class="headerlink" href="#i2s" title="永久链接至标题"></a></h3>
<p>芯片内置一个 I2S 接口，具有以下特性：</p>
<ul class="simple">
<li><p>支持主模式以及从模式</p></li>
<li><p>支持 Left-justified/ Right-justified/ DSP 等数据格式，数据宽度可配置为 8/16/24/32 比特</p></li>
<li><p>工作时钟为 Audio PLL</p></li>
<li><p>除单声道/双声道模式之外，同时支持四声道与六声道模式</p></li>
<li><p>支持播放单声道音频复制为双声道模式</p></li>
<li><p>支持动态静音切换功能</p></li>
<li><p>I2S 具有独立收发 FIFO，FIFO 深度为 16 word</p></li>
<li><p>支持 DMA 功能</p></li>
</ul>
</section>
<section id="timer">
<h3><span class="section-number">2.10.7. </span>TIMER<a class="headerlink" href="#timer" title="永久链接至标题"></a></h3>
<p>芯片内置两个 32-bit 通用定时器和一个看门狗定时器，具有以下特性：</p>
<ul class="simple">
<li><p>通用定时器的时钟源可以选择 FCLK/32K/XTAL，看门狗定时器的时钟源可以选择FCLK/32K/XTAL</p></li>
<li><p>每个计数器都有 8-bit 分频器</p></li>
<li><p>每组通用定时器都包含三个比较寄存器，支持比较中断，计数模式支持 FreeRun 模式和 PreLoad 模式</p></li>
<li><p>16-bit 看门狗定时器，支持中断或复位两种看门狗溢出方式</p></li>
</ul>
</section>
<section id="pwm">
<h3><span class="section-number">2.10.8. </span>PWM<a class="headerlink" href="#pwm" title="永久链接至标题"></a></h3>
<p>芯片内置一组 PWM 信号，每组包含 4 通道 PWM 信号输出，每通道可以设置为 2 路互补 PWM，具有以下特性：</p>
<ul class="simple">
<li><p>三种时钟源 BCLK/XCLK/32K 可供选择，搭配 16-bit 时钟分频器</p></li>
<li><p>每组 PWM 都可以独立设置为不同的周期</p></li>
<li><p>每通道 PWM 都有双门限值设定，可以设定不同的占空比和相位，增加脉冲弹性</p></li>
<li><p>每通道 PWM 都有独立的死区时间设定</p></li>
<li><p>每路 PWM 输出引脚都可以设定不同的有效电平</p></li>
<li><p>每路 PWM 都有独立的连接开关用来选择是否与内部计数器相连，并可设定不连接时的默认输出电平</p></li>
<li><p>刹车信号可以将 PWM 输出电平置于预先设定的状态</p></li>
<li><p>多达 11 种可用于触发 ADC 转换的触发源</p></li>
<li><p>支持多种中断类型：计数器溢出中断、门限值比较中断、周期数中断</p></li>
</ul>
</section>
<section id="ir-ir-remote">
<h3><span class="section-number">2.10.9. </span>IR(IR-remote)<a class="headerlink" href="#ir-ir-remote" title="永久链接至标题"></a></h3>
<p>芯片内置一个红外遥控，具有以下特性：</p>
<ul class="simple">
<li><p>既支持以固定协议 NEC、 RC-5 接收数据，也支持以脉冲宽度计数方式接收任意格式数据</p></li>
<li><p>时钟源为 XCLK，最高工作频率为 40MHz</p></li>
<li><p>接收最多支持 64-bit 数据位</p></li>
<li><p>接收 FIFO 深度为 128 字节</p></li>
<li><p>支持接收结束中断</p></li>
</ul>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="overview.html" class="btn btn-neutral float-left" title="1. 概述" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> 上一页</a>
        <a href="Pindefinition.html" class="btn btn-neutral float-right" title="3. 管脚定义" accesskey="n" rel="next">下一页 <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; 版权所有 2022.</p>
  </div>

  利用 <a href="https://www.sphinx-doc.org/">Sphinx</a> 构建，使用了 
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">主题</a>
    由 <a href="https://readthedocs.org">Read the Docs</a>开发.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>