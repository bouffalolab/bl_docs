<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>11. I2C &mdash; BL702/704/706 Reference Manual  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="12. PWM" href="PWM.html" />
    <link rel="prev" title="10. UART" href="UART.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL702/704/706 Reference Manual
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">4. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">5. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">6. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="L1C.html">7. L1C</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">8. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">9. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">10. UART</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">11. I2C</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#i2c-introduction">11.1. I2C introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-main-features">11.2. I2C main features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-function-description">11.3. I2C function description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#start-and-stop-conditions">11.3.1. Start and stop conditions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-transmission-format">11.3.2. Data transmission format</a></li>
<li class="toctree-l3"><a class="reference internal" href="#arbitration">11.3.3. Arbitration</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-clock-setting">11.4. I2C clock setting</a></li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-configuration-process">11.5. I2C configuration process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#configuration-item">11.5.1. Configuration item</a></li>
<li class="toctree-l3"><a class="reference internal" href="#read-and-write-flags">11.5.2. Read and write flags</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-address">11.5.3. Slave address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-register-address">11.5.4. Slave register address</a></li>
<li class="toctree-l3"><a class="reference internal" href="#slave-device-address-length">11.5.5. Slave device address length</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data">11.5.6. Data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#data-length">11.5.7. Data length</a></li>
<li class="toctree-l3"><a class="reference internal" href="#enable-signal">11.5.8. Enable signal</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#fifo-management">11.6. FIFO management</a></li>
<li class="toctree-l2"><a class="reference internal" href="#using-dma">11.7. Using DMA</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#dma-transmission-process">11.7.1. DMA transmission process</a></li>
<li class="toctree-l3"><a class="reference internal" href="#dma-receiving-process">11.7.2. DMA receiving process</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#i2c-interrupt">11.8. I2C interrupt</a></li>
<li class="toctree-l2"><a class="reference internal" href="#register-description">11.9. Register description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#i2c-config">11.9.1. i2c_config</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-int-sts">11.9.2. i2c_int_sts</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-sub-addr">11.9.3. i2c_sub_addr</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-bus-busy">11.9.4. i2c_bus_busy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-start">11.9.5. i2c_prd_start</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-stop">11.9.6. i2c_prd_stop</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-prd-data">11.9.7. i2c_prd_data</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-config-0">11.9.8. i2c_fifo_config_0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-config-1">11.9.9. i2c_fifo_config_1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-wdata">11.9.10. i2c_fifo_wdata</a></li>
<li class="toctree-l3"><a class="reference internal" href="#i2c-fifo-rdata">11.9.11. i2c_fifo_rdata</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">12. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">13. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="QDEC.html">14. QDEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="KeyScan.html">15. KeyScan</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2S.html">16. I2S</a></li>
<li class="toctree-l1"><a class="reference internal" href="EMAC.html">17. Emac</a></li>
<li class="toctree-l1"><a class="reference internal" href="USB.html">18. USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">19. Revision history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL702/704/706 Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">11. </span>I2C</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="i2c">
<h1><span class="section-number">11. </span>I2C<a class="headerlink" href="#i2c" title="Permalink to this headline"></a></h1>
<section id="i2c-introduction">
<h2><span class="section-number">11.1. </span>I2C introduction<a class="headerlink" href="#i2c-introduction" title="Permalink to this headline"></a></h2>
<p>I2C (Inter-Intergrated Circuit) is a serial communication bus that uses a multi-master-slave architecture to connect low-speed peripheral devices.</p>
<p>Each device has a unique address identification and can be used as a transmitter or receiver. Each device connected to the bus can set the address by software with a unique address and the always-receiving master-slave relationship. The host can be used as a host transmitter or a host receiver.</p>
<p>If two or more hosts are initialized at the same time, data transmission can prevent data from being destroyed through collision detection and arbitration.</p>
<p>BL702 includes an I2C controller host, which can be flexibly configured with slaveAddr, subAddr, and data transmission to facilitate communication with slave devices. It provides 2 word depth fifo and provides interrupt functions. It can be used with DMA to improve efficiency and flexibly adjust clock frequency.</p>
</section>
<section id="i2c-main-features">
<h2><span class="section-number">11.2. </span>I2C main features<a class="headerlink" href="#i2c-main-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Support host mode</p></li>
<li><p>Support multi-master mode and arbitration function</p></li>
<li><p>Flexible clock frequency adjustment</p></li>
</ul>
</section>
<section id="i2c-function-description">
<h2><span class="section-number">11.3. </span>I2C function description<a class="headerlink" href="#i2c-function-description" title="Permalink to this headline"></a></h2>
<table class="colwidths-given docutils align-center" id="id1" style="width: 80%">
<caption><span class="caption-number">Table 11.1 </span><span class="caption-text">Pin lists</span><a class="headerlink" href="#id1" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 30%" />
<col style="width: 30%" />
<col style="width: 40%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>I2Cx_SCL</p></td>
<td><p>input/output</p></td>
<td><p>I2C serial clock signal</p></td>
</tr>
<tr class="row-odd"><td><p>I2Cx_SDA</p></td>
<td><p>input/output</p></td>
<td><p>I2C serial data signal</p></td>
</tr>
</tbody>
</table>
<section id="start-and-stop-conditions">
<h3><span class="section-number">11.3.1. </span>Start and stop conditions<a class="headerlink" href="#start-and-stop-conditions" title="Permalink to this headline"></a></h3>
<p>All transfers begin with a START condition and end with a STOP condition.</p>
<p>The start and stop conditions are generally generated by the master. The bus is considered to be in a busy state after the start condition, and is considered to be in an idle state for a period of time after the stop condition.</p>
<p>Start condition: SDA generates a high-to-low level transition when SCL is high;</p>
<p>Stop condition: SDA generates a low-to-high level transition when SCL is high.</p>
<p>The waveform diagram is as follows:</p>
<figure class="align-center" id="id2">
<img alt="../_images/I2CStopStart.svg" src="../_images/I2CStopStart.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.1 </span><span class="caption-text">I2C stop/start condition</span><a class="headerlink" href="#id2" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="data-transmission-format">
<h3><span class="section-number">11.3.2. </span>Data transmission format<a class="headerlink" href="#data-transmission-format" title="Permalink to this headline"></a></h3>
<p>The first 8 bits transmitted are the address byte, including the 7-bit slave address and the 1-bit direction bit. Data sent or received by the host is controlled by the eighth bit of the first byte sent by the host.</p>
<p>If it is 0, it means that the data is sent by the master; if it is 1, it means that the data is received by the master, and then the slave sends an acknowledge bit (ACK). After the data transmission is completed, the master sends a stop signal. The waveform is as follows:</p>
<figure class="align-center" id="id3">
<img alt="../_images/I2CMasterTxRx.svg" src="../_images/I2CMasterTxRx.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.2 </span><span class="caption-text">I2C data transmission format</span><a class="headerlink" href="#id3" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Timing of master transmission and slave reception</strong></p>
<figure class="align-center" id="id4">
<img alt="../_images/I2CMasterTxSlaveRx.svg" src="../_images/I2CMasterTxSlaveRx.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.3 </span><span class="caption-text">Master tx and slave rx</span><a class="headerlink" href="#id4" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p><strong>Timing of master receive and slave send</strong></p>
<figure class="align-center" id="id5">
<img alt="../_images/I2CMasterRxSlaveTx.svg" src="../_images/I2CMasterRxSlaveTx.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.4 </span><span class="caption-text">Master rx and slave tx</span><a class="headerlink" href="#id5" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
<section id="arbitration">
<h3><span class="section-number">11.3.3. </span>Arbitration<a class="headerlink" href="#arbitration" title="Permalink to this headline"></a></h3>
<p>When there are multiple masters on the I2C bus, multiple masters may start transmitting at the same time. At this time, it is necessary to rely on the arbitration mechanism to determine which master has the right to complete the next data transfer. The remaining masters must give up control of the bus. The transmission cannot be started again until the bus is free.</p>
<p>During the transmission process, all hosts need to check whether SDA is consistent with the data they want to send when SCL is high. When the SDA level is different from expected, it means that other hosts are also transmitting at the same time. Hosts with different SDA levels will lose the arbitration and other hosts will complete the data transmission.</p>
<p>The waveform diagram of two hosts transmitting data and starting the arbitration mechanism at the same time is as follows:</p>
<figure class="align-center" id="id6">
<img alt="../_images/I2CTxRxTogether.svg" src="../_images/I2CTxRxTogether.svg" /><figcaption>
<p><span class="caption-number">Fig. 11.5 </span><span class="caption-text">Tx and Rx together</span><a class="headerlink" href="#id6" title="Permalink to this image"></a></p>
</figcaption>
</figure>
</section>
</section>
<section id="i2c-clock-setting">
<h2><span class="section-number">11.4. </span>I2C clock setting<a class="headerlink" href="#i2c-clock-setting" title="Permalink to this headline"></a></h2>
<p>The I2C clock is derived from bclk (bus clock), which can be divided based on the bclk clock.</p>
<p>Register i2c_prd_data can divide the clock of the data segment. The i2c module divides the data transmission into 4 phases. Each phase is controlled by a single byte in the register. The number of samples in each phase can be set. The 4 samples together determine the frequency division coefficient of the i2c clock.</p>
<p>For example, bclk is 32M and the value of register i2c_prd_data is 0x0f0f0f0f by default without configuration. Then the clock frequency of I2C is 32M / ((15 + 1) * 4) = 500K.</p>
<p>Similarly, the registers i2c_prd_start and i2c_prd_stop also divide the clock of the start bit and stop bit respectively.</p>
</section>
<section id="i2c-configuration-process">
<h2><span class="section-number">11.5. </span>I2C configuration process<a class="headerlink" href="#i2c-configuration-process" title="Permalink to this headline"></a></h2>
<section id="configuration-item">
<h3><span class="section-number">11.5.1. </span>Configuration item<a class="headerlink" href="#configuration-item" title="Permalink to this headline"></a></h3>
<blockquote>
<div><ul class="simple">
<li><p>Read and write flags</p></li>
<li><p>Slave address</p></li>
<li><p>Slave device address</p></li>
<li><p>Slave device address length</p></li>
<li><p>Data (when sending, configure the data to be sent; when receiving, store the received data)</p></li>
<li><p>Data length</p></li>
<li><p>Enable signal</p></li>
</ul>
</div></blockquote>
</section>
<section id="read-and-write-flags">
<h3><span class="section-number">11.5.2. </span>Read and write flags<a class="headerlink" href="#read-and-write-flags" title="Permalink to this headline"></a></h3>
<p>I2C supports two working states: sending and receiving. Register cr_i2c_pkt_dir indicates the sending or receiving status. When it is set to 0, it indicates the sending state, and when it is set to 1, it indicates the receiving state.</p>
</section>
<section id="slave-address">
<h3><span class="section-number">11.5.3. </span>Slave address<a class="headerlink" href="#slave-address" title="Permalink to this headline"></a></h3>
<p>Each slave device connected to I2C will have a unique address. Usually the address length is 7 bits. The slave device address will be written into the register cr_i2c_slv_addr. I2C will automatically shift left by 1 bit before sending it from the device address. Transmit/receive direction bit on the low-order complement.</p>
</section>
<section id="slave-register-address">
<h3><span class="section-number">11.5.4. </span>Slave register address<a class="headerlink" href="#slave-register-address" title="Permalink to this headline"></a></h3>
<p>Slave device register address indicates the register address that I2C needs to read and write to a certain register of the slave device. The slave device address will be written to the register i2c_sub_addr, and the register cr_i2c_sub_addr_en needs to be set.</p>
<p>If the register cr_i2c_sub_addr_en is set to 0, the I2C master will skip the slave register address segment when transmitting.</p>
</section>
<section id="slave-device-address-length">
<h3><span class="section-number">11.5.5. </span>Slave device address length<a class="headerlink" href="#slave-device-address-length" title="Permalink to this headline"></a></h3>
<p>The slave device address length is decremented by one and written to the register cr_i2c_sub_addr_bc.</p>
</section>
<section id="data">
<h3><span class="section-number">11.5.6. </span>Data<a class="headerlink" href="#data" title="Permalink to this headline"></a></h3>
<p>The data part represents the data that needs to be sent to the slave device, or the data that needs to be received from the slave device.</p>
<p>When I2C sends data, the data needs to be written into the I2C FIFO in word units in turn, and the data is written to the register address i2c_fifo_wdata of the FIFO.</p>
<p>When the I2C receives data, it needs to read the data from the I2C FIFO in units of words in order, and the received data reads the register address i2c_fifo_rdata of the FIFO.</p>
</section>
<section id="data-length">
<h3><span class="section-number">11.5.7. </span>Data length<a class="headerlink" href="#data-length" title="Permalink to this headline"></a></h3>
<p>Decrement the data length by one and write to the register cr_i2c_pkt_len.</p>
</section>
<section id="enable-signal">
<h3><span class="section-number">11.5.8. </span>Enable signal<a class="headerlink" href="#enable-signal" title="Permalink to this headline"></a></h3>
<p>After the above configurations are completed, write the enable signal register cr_i2c_m_en to 1 to automatically start the I2C transmission process.</p>
<p>When the read-write flag is set to 0, I2C sends data, and the host sends the process:</p>
<ol class="arabic simple">
<li><p>Start bit</p></li>
<li><p>(1 bit left from device address + 0) + ACK</p></li>
<li><p>Slave device address + ACK</p></li>
<li><p>1 byte data + ACK</p></li>
<li><p>1 byte data + ACK</p></li>
<li><p>Stop bit</p></li>
</ol>
<p>When the read / write flag is set to 1, I2C receives data and the host sends the process:</p>
<ol class="arabic simple">
<li><p>Start bit</p></li>
<li><p>(1 bit left from device address + 0) + ACK</p></li>
<li><p>Slave device address + ACK</p></li>
<li><p>Start bit</p></li>
<li><p>(1 bit left from device address + 1) + ACK</p></li>
<li><p>1 byte data + ACK</p></li>
<li><p>1 byte data + ACK</p></li>
<li><p>Stop bit</p></li>
</ol>
</section>
</section>
<section id="fifo-management">
<h2><span class="section-number">11.6. </span>FIFO management<a class="headerlink" href="#fifo-management" title="Permalink to this headline"></a></h2>
<p>I2C FIFO has a 2-word depth, and I2C includes RX FIFO and TX FIFO.
The rx_fifo_cnt in the register i2c_fifo_config_1 represents how much data (in word) in RX FIFO needs to be read.
The tx_fifo_cnt in the register i2c_fifo_config_1 represents how much free space (in word) in TX FIFO for writing.</p>
<p>I2C FIFO status:</p>
<ul class="simple">
<li><p>RX FIFO underflow: When the data in RX FIFO is completely read out or empty, if I2C continues to read data from RX FIFO, the rx_fifo_underflow in the register i2c_fifo_config_0 will be set to 1;</p></li>
<li><p>RX FIFO overflow: When I2C receives data until the two words of RX FIFO are filled, without reading RX FIFO, if I2C receives data again, the rx_fifo_overflow in the register i2c_fifo_config_0 will be set to 1;</p></li>
<li><p>TX FIFO underflow: When the data size filled into TX FIFO does not meet the configured I2C data length: cr_i2c_pkt_len in i2c_config, and no new data is filled into TX FIFO, the tx_fifo_underflow in the register i2c_fifo_config_0 will be set to 1;</p></li>
<li><p>TX FIFO overflow: After the two words of TX FIFO are filled, before the data in TX FIFO is sent out, if data is filled into TX FIFO again, the tx_fifo_overflow in the register i2c_fifo_config_0 will be set to 1.</p></li>
</ul>
</section>
<section id="using-dma">
<h2><span class="section-number">11.7. </span>Using DMA<a class="headerlink" href="#using-dma" title="Permalink to this headline"></a></h2>
<p>I2C can send and receive data through DMA. Setting i2c_dma_tx_en in the register i2c_fifo_config_0 to 1 will enable the DMA TX mode. After the channel for I2C is allocated, DMA will transfer data from memory to the i2c_fifo_wdata register.
Setting i2c_dma_rx_en in the register i2c_fifo_config_0 to 1 will enable the DMA RX mode. After the channel for I2C is allocated, DMA will transfer the data in the register i2c_fifo_rdata to memory.
When I2C is used with DMA, DMA will automatically transfer data, so it is unnecessary for CPU to write data into I2C TX FIFO or read data from I2C RX FIFO.</p>
<section id="dma-transmission-process">
<h3><span class="section-number">11.7.1. </span>DMA transmission process<a class="headerlink" href="#dma-transmission-process" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>Configure the read and write flag i2c_config[cr_i2c_pkt_dir] to 0</p></li>
<li><p>Configure the slave device address i2c_config[cr_i2c_slv_addr]</p></li>
<li><p>Configure the slave device register address i2c_sub_addr, the slave device register address length i2c_config[cr_i2c_sub_addr_bc], and configure the slave device register address enable bit i2c_config[cr_i2c_sub_addr_en] to 1</p></li>
<li><p>Set the length of the sent data i2c_config[cr_i2c_pkt_len]</p></li>
<li><p>Enable DMA mode transmission, set i2c_fifo_config_0[i2c_dma_tx_en] to 1</p></li>
<li><p>Configure the data length of DMA transmission DMA_CxControl[TransferSize] (x=0~7)</p></li>
<li><p>Configure DMA source address DMA_CxSrcAddr, data width DMA_CxControl[SWidth], burst size DMA_CxControl[SBSize], set DMA_CxControl[SI] to 1 to enable automatic address accumulation mode</p></li>
<li><p>Configure the DMA destination address DMA_CxDstAddr to i2c_fifo_wdata, data width DMA_CxControl[DWidth] to 32 and burst size DMA_CxControl[DBSize], clear DMA_CxControl[DI] to disable the address automatic accumulation mode</p></li>
<li><p>Enable DMA</p></li>
<li><p>Configure i2c_config[cr_i2c_m_en] to 1 to enable I2C</p></li>
</ol>
</section>
<section id="dma-receiving-process">
<h3><span class="section-number">11.7.2. </span>DMA receiving process<a class="headerlink" href="#dma-receiving-process" title="Permalink to this headline"></a></h3>
<ol class="arabic simple">
<li><p>Configure the read-write flag i2c_config[cr_i2c_pkt_dir] to 1</p></li>
<li><p>Configure the slave device address i2c_config[cr_i2c_slv_addr]</p></li>
<li><p>Configure slave device register address i2c_sub_addr, slave device register address length i2c_config[cr_i2c_sub_addr_bc], configure slave device register address enable bit i2c_config[cr_i2c_sub_addr_en] to 1</p></li>
<li><p>Set the length of the received data i2c_config[cr_i2c_pkt_len]</p></li>
<li><p>Enable DMA mode reception, set i2c_fifo_config_0[i2c_dma_rx_en] to 1</p></li>
</ol>
<ol class="arabic simple" start="7">
<li><p>Configure the data length of DMA transmission DMA_CxControl[TS] (x=0~7)</p></li>
<li><p>Configure DMA source address DMA_CxSrcAddr to i2c_fifo_rdata, data width DMA_CxControl[SWidth] to 32 and burst size DMA_CxControl[SBSize], clear DMA_CxControl[SI] to disable address automatic accumulation mode</p></li>
</ol>
<ol class="arabic simple" start="7">
<li><p>Configure DMA destination address DMA_CxDstAddr, data width DMA_CxControl[DWidth], burst size DMA_CxControl[DBSize], set DMA_CxControl[DI] to 1 to enable automatic address accumulation mode</p></li>
</ol>
<ol class="arabic simple" start="9">
<li><p>Enable DMA</p></li>
<li><p>Configure i2c_config[cr_i2c_m_en] to 1 to enable I2C</p></li>
</ol>
</section>
</section>
<section id="i2c-interrupt">
<h2><span class="section-number">11.8. </span>I2C interrupt<a class="headerlink" href="#i2c-interrupt" title="Permalink to this headline"></a></h2>
<p>I2C includes the following interrupts:</p>
<blockquote>
<div><ul class="simple">
<li><p>I2C_TRANS_END_INT: I2C transfer end interrupt</p></li>
<li><p>I2C_TX_FIFO_READY_INT: Interrupt is triggered when I2C TX FIFO has free space available for filling</p></li>
<li><p>I2C_RX_FIFO_READY_INT: When I2C RX FIFO receives data, trigger interrupt</p></li>
<li><p>I2C_NACK_RECV_INT: When the I2C module detects a NACK state, an interrupt is triggered</p></li>
<li><p>I2C_ARB_LOST_INT: I2C arbitration lost interrupt</p></li>
<li><p>I2C_FIFO_ERR_INT: I2C FIFO ERROR interrupt</p></li>
</ul>
</div></blockquote>
</section>
<section id="register-description">
<h2><span class="section-number">11.9. </span>Register description<a class="headerlink" href="#register-description" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 39%" />
<col style="width: 61%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-config">i2c_config</a></p></td>
<td><p>I2C configuration register</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2c-int-sts">i2c_int_sts</a></p></td>
<td><p>I2C interrupt status</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-sub-addr">i2c_sub_addr</a></p></td>
<td><p>I2C sub-address configuration</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2c-bus-busy">i2c_bus_busy</a></p></td>
<td><p>I2C bus busy control register</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-prd-start">i2c_prd_start</a></p></td>
<td><p>I2C length of start phase</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2c-prd-stop">i2c_prd_stop</a></p></td>
<td><p>I2C length of stop phase</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-prd-data">i2c_prd_data</a></p></td>
<td><p>I2C length of data phase</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2c-fifo-config-0">i2c_fifo_config_0</a></p></td>
<td><p>I2C FIFO configuration register0</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-fifo-config-1">i2c_fifo_config_1</a></p></td>
<td><p>I2C FIFO configuration register1</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#i2c-fifo-wdata">i2c_fifo_wdata</a></p></td>
<td><p>I2C FIFO write data</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#i2c-fifo-rdata">i2c_fifo_rdata</a></p></td>
<td><p>I2C FIFO read data</p></td>
</tr>
</tbody>
</table>
<section id="i2c-config">
<h3><span class="section-number">11.9.1. </span>i2c_config<a class="headerlink" href="#i2c-config" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a300</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_config.svg" src="../_images/i2c_i2c_config.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:28</p></td>
<td><p>cr_i2c_deg_cnt</p></td>
<td><p>r/w</p></td>
<td><p>4’d0</p></td>
<td><p>De-glitch function cycle count</p></td>
</tr>
<tr class="row-odd"><td><p>27:24</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>23:16</p></td>
<td><p>cr_i2c_pkt_len</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Packet length (unit: byte)</p></td>
</tr>
<tr class="row-odd"><td><p>15</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>14:8</p></td>
<td><p>cr_i2c_slv_addr</p></td>
<td><p>r/w</p></td>
<td><p>7’d0</p></td>
<td><p>Slave address for I2C transaction (target address)</p></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>6:5</p></td>
<td rowspan="2"><p>cr_i2c_sub_addr_bc</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>2’d0</p></td>
<td rowspan="2"><p>Sub-address field byte count</p>
<p>2’d0: 1-byte, 2’d1: 2-byte, 2’d2: 3-byte, 2’d3: 4-byte</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>cr_i2c_sub_addr_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of I2C sub-address field</p></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>3</p></td>
<td rowspan="2"><p>cr_i2c_scl_sync_en</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b1</p></td>
<td rowspan="2"><p>Enable signal of I2C SCL synchronization, should be enabled to support Multi-Master and Clock-Stretching</p>
<p>(Normally should not be turned-off)</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>cr_i2c_deg_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of I2C input de-glitch function (for all input pins)</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>1</p></td>
<td rowspan="2"><p>cr_i2c_pkt_dir</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b1</p></td>
<td rowspan="2"><p>Transfer direction of the packet</p>
<p>1’b0: Write; 1’b1: Read</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>0</p></td>
<td rowspan="2"><p>cr_i2c_m_en</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>Enable signal of I2C Master function</p>
<p>Asserting this bit will trigger the transaction, and should be de-asserted after finish</p>
</td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="i2c-int-sts">
<h3><span class="section-number">11.9.2. </span>i2c_int_sts<a class="headerlink" href="#i2c-int-sts" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a304</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_int_sts.svg" src="../_images/i2c_i2c_int_sts.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:30</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>29</p></td>
<td><p>cr_i2c_fer_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_fer_int</p></td>
</tr>
<tr class="row-even"><td><p>28</p></td>
<td><p>cr_i2c_arb_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_arb_int</p></td>
</tr>
<tr class="row-odd"><td><p>27</p></td>
<td><p>cr_i2c_nak_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_nak_int</p></td>
</tr>
<tr class="row-even"><td><p>26</p></td>
<td><p>cr_i2c_rxf_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_rxf_int</p></td>
</tr>
<tr class="row-odd"><td><p>25</p></td>
<td><p>cr_i2c_txf_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_txf_int</p></td>
</tr>
<tr class="row-even"><td><p>24</p></td>
<td><p>cr_i2c_end_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt enable of i2c_end_int</p></td>
</tr>
<tr class="row-odd"><td><p>23:22</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>21</p></td>
<td><p>rsvd</p></td>
<td><p>rsvd</p></td>
<td><p>1’b0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>20</p></td>
<td><p>cr_i2c_arb_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Interrupt clear of i2c_arb_int</p></td>
</tr>
<tr class="row-even"><td><p>19</p></td>
<td><p>cr_i2c_nak_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Interrupt clear of i2c_nak_int</p></td>
</tr>
<tr class="row-odd"><td><p>18</p></td>
<td><p>rsvd</p></td>
<td><p>rsvd</p></td>
<td><p>1’b0</p></td>
<td></td>
</tr>
<tr class="row-even"><td><p>17</p></td>
<td><p>rsvd</p></td>
<td><p>rsvd</p></td>
<td><p>1’b0</p></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>cr_i2c_end_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Interrupt clear of i2c_end_int</p></td>
</tr>
<tr class="row-even"><td><p>15:14</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>13</p></td>
<td><p>cr_i2c_fer_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_fer_int</p></td>
</tr>
<tr class="row-even"><td><p>12</p></td>
<td><p>cr_i2c_arb_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_arb_int</p></td>
</tr>
<tr class="row-odd"><td><p>11</p></td>
<td><p>cr_i2c_nak_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_nak_int</p></td>
</tr>
<tr class="row-even"><td><p>10</p></td>
<td><p>cr_i2c_rxf_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_rxf_int</p></td>
</tr>
<tr class="row-odd"><td><p>9</p></td>
<td><p>cr_i2c_txf_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_txf_int</p></td>
</tr>
<tr class="row-even"><td><p>8</p></td>
<td><p>cr_i2c_end_mask</p></td>
<td><p>r/w</p></td>
<td><p>1’b1</p></td>
<td><p>Interrupt mask of i2c_end_int</p></td>
</tr>
<tr class="row-odd"><td><p>7:6</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td><p>5</p></td>
<td><p>i2c_fer_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C TX/RX FIFO error interrupt, auto-cleared when FIFO overflow/underflow error flag is cleared</p></td>
</tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>i2c_arb_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C arbitration lost interrupt</p></td>
</tr>
<tr class="row-even"><td><p>3</p></td>
<td><p>i2c_nak_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C NACK-received interrupt</p></td>
</tr>
<tr class="row-odd"><td><p>2</p></td>
<td><p>i2c_rxf_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C RX FIFO ready (rx_fifo_cnt &gt; rx_fifo_th) interrupt, auto-cleared when data is popped</p></td>
</tr>
<tr class="row-even"><td><p>1</p></td>
<td><p>i2c_txf_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C TX FIFO ready (tx_fifo_cnt &gt; tx_fifo_th) interrupt, auto-cleared when data is pushed</p></td>
</tr>
<tr class="row-odd"><td><p>0</p></td>
<td><p>i2c_end_int</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>I2C transfer end interrupt</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-sub-addr">
<h3><span class="section-number">11.9.3. </span>i2c_sub_addr<a class="headerlink" href="#i2c-sub-addr" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a308</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_sub_addr.svg" src="../_images/i2c_i2c_sub_addr.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>cr_i2c_sub_addr_b3</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>I2C sub-address field - byte[3]</p></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>cr_i2c_sub_addr_b2</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>I2C sub-address field - byte[2]</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>cr_i2c_sub_addr_b1</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>I2C sub-address field - byte[1]</p></td>
</tr>
<tr class="row-odd"><td><p>7:0</p></td>
<td><p>cr_i2c_sub_addr_b0</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>I2C sub-address field - byte[0] (sub-address starts from this byte)</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-bus-busy">
<h3><span class="section-number">11.9.4. </span>i2c_bus_busy<a class="headerlink" href="#i2c-bus-busy" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a30c</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_bus_busy.svg" src="../_images/i2c_i2c_bus_busy.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:2</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>cr_i2c_bus_busy_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Clear signal of bus_busy status, not for normal usage (in case I2C bus hangs)</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>sts_i2c_bus_busy</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Indicator of I2C bus busy</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-prd-start">
<h3><span class="section-number">11.9.5. </span>i2c_prd_start<a class="headerlink" href="#i2c-prd-start" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a310</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_prd_start.svg" src="../_images/i2c_i2c_prd_start.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>cr_i2c_prd_s_ph_3</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of START condition phase 3</p></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>cr_i2c_prd_s_ph_2</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of START condition phase 2</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>cr_i2c_prd_s_ph_1</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of START condition phase 1</p></td>
</tr>
<tr class="row-odd"><td><p>7:0</p></td>
<td><p>cr_i2c_prd_s_ph_0</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of START condition phase 0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-prd-stop">
<h3><span class="section-number">11.9.6. </span>i2c_prd_stop<a class="headerlink" href="#i2c-prd-stop" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a314</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_prd_stop.svg" src="../_images/i2c_i2c_prd_stop.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>cr_i2c_prd_p_ph_3</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of STOP condition phase 3</p></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>cr_i2c_prd_p_ph_2</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of STOP condition phase 2</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>cr_i2c_prd_p_ph_1</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of STOP condition phase 1</p></td>
</tr>
<tr class="row-odd"><td><p>7:0</p></td>
<td><p>cr_i2c_prd_p_ph_0</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of STOP condition phase 0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-prd-data">
<h3><span class="section-number">11.9.7. </span>i2c_prd_data<a class="headerlink" href="#i2c-prd-data" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a318</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_prd_data.svg" src="../_images/i2c_i2c_prd_data.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>cr_i2c_prd_d_ph_3</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of DATA phase 3</p></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>cr_i2c_prd_d_ph_2</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of DATA phase 2</p></td>
</tr>
<tr class="row-even"><td rowspan="2"><p>15:8</p></td>
<td rowspan="2"><p>cr_i2c_prd_d_ph_1</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>8’d15</p></td>
<td rowspan="2"><p>Length of DATA phase 1</p>
<p>Note: This value should not be set to 8’d0, adjust source clock rate instead if higher I2C clock rate is required</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>7:0</p></td>
<td><p>cr_i2c_prd_d_ph_0</p></td>
<td><p>r/w</p></td>
<td><p>8’d15</p></td>
<td><p>Length of DATA phase 0</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-fifo-config-0">
<h3><span class="section-number">11.9.8. </span>i2c_fifo_config_0<a class="headerlink" href="#i2c-fifo-config-0" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a380</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_fifo_config_0.svg" src="../_images/i2c_i2c_fifo_config_0.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>7</p></td>
<td><p>rx_fifo_underflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Underflow flag of RX FIFO, can be cleared by rx_fifo_clr</p></td>
</tr>
<tr class="row-even"><td><p>6</p></td>
<td><p>rx_fifo_overflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Overflow flag of RX FIFO, can be cleared by rx_fifo_clr</p></td>
</tr>
<tr class="row-odd"><td><p>5</p></td>
<td><p>tx_fifo_underflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Underflow flag of TX FIFO, can be cleared by tx_fifo_clr</p></td>
</tr>
<tr class="row-even"><td><p>4</p></td>
<td><p>tx_fifo_overflow</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>Overflow flag of TX FIFO, can be cleared by tx_fifo_clr</p></td>
</tr>
<tr class="row-odd"><td><p>3</p></td>
<td><p>rx_fifo_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Clear signal of RX FIFO</p></td>
</tr>
<tr class="row-even"><td><p>2</p></td>
<td><p>tx_fifo_clr</p></td>
<td><p>w1c</p></td>
<td><p>1’b0</p></td>
<td><p>Clear signal of TX FIFO</p></td>
</tr>
<tr class="row-odd"><td><p>1</p></td>
<td><p>i2c_dma_rx_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of dma_rx_req/ack interface</p></td>
</tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>i2c_dma_tx_en</p></td>
<td><p>r/w</p></td>
<td><p>1’b0</p></td>
<td><p>Enable signal of dma_tx_req/ack interface</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-fifo-config-1">
<h3><span class="section-number">11.9.9. </span>i2c_fifo_config_1<a class="headerlink" href="#i2c-fifo-config-1" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a384</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_fifo_config_1.svg" src="../_images/i2c_i2c_fifo_config_1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:25</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>24</p></td>
<td><p>rx_fifo_th</p></td>
<td><p>r/w</p></td>
<td><p>1’d0</p></td>
<td><p>RX FIFO threshold, dma_rx_req will not be asserted if tx_fifo_cnt is less than this value</p></td>
</tr>
<tr class="row-even"><td><p>23:17</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>16</p></td>
<td><p>tx_fifo_th</p></td>
<td><p>r/w</p></td>
<td><p>1’d0</p></td>
<td><p>TX FIFO threshold, dma_tx_req will not be asserted if tx_fifo_cnt is less than this value</p></td>
</tr>
<tr class="row-even"><td><p>15:10</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>9:8</p></td>
<td><p>rx_fifo_cnt</p></td>
<td><p>r</p></td>
<td><p>2’d0</p></td>
<td><p>RX FIFO available count</p></td>
</tr>
<tr class="row-even"><td><p>7:2</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>1:0</p></td>
<td><p>tx_fifo_cnt</p></td>
<td><p>r</p></td>
<td><p>2’d2</p></td>
<td><p>TX FIFO available count</p></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-fifo-wdata">
<h3><span class="section-number">11.9.10. </span>i2c_fifo_wdata<a class="headerlink" href="#i2c-fifo-wdata" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a388</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_fifo_wdata.svg" src="../_images/i2c_i2c_fifo_wdata.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>i2c_fifo_wdata</p></td>
<td><p>w</p></td>
<td><p>x</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="i2c-fifo-rdata">
<h3><span class="section-number">11.9.11. </span>i2c_fifo_rdata<a class="headerlink" href="#i2c-fifo-rdata" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000a38c</p>
<figure class="align-center">
<img alt="../_images/i2c_i2c_fifo_rdata.svg" src="../_images/i2c_i2c_fifo_rdata.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>i2c_fifo_rdata</p></td>
<td><p>r</p></td>
<td><p>32’h0</p></td>
<td></td>
</tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="UART.html" class="btn btn-neutral float-left" title="10. UART" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="PWM.html" class="btn btn-neutral float-right" title="12. PWM" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>