<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>17. Emac &mdash; BL702/704/706 Reference Manual  documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../_static/style.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/doctools.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="18. USB" href="USB.html" />
    <link rel="prev" title="16. I2S" href="I2S.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> BL702/704/706 Reference Manual
            <img src="../_static/logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="SystemAndMemoryOverview.html">1. System and memory overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="ResetAndClock.html">2. Reset and clock</a></li>
<li class="toctree-l1"><a class="reference internal" href="GLB.html">3. GLB</a></li>
<li class="toctree-l1"><a class="reference internal" href="ADC.html">4. ADC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DAC.html">5. DAC</a></li>
<li class="toctree-l1"><a class="reference internal" href="DMA.html">6. DMA</a></li>
<li class="toctree-l1"><a class="reference internal" href="L1C.html">7. L1C</a></li>
<li class="toctree-l1"><a class="reference internal" href="IR.html">8. IR</a></li>
<li class="toctree-l1"><a class="reference internal" href="SPI.html">9. SPI</a></li>
<li class="toctree-l1"><a class="reference internal" href="UART.html">10. UART</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2C.html">11. I2C</a></li>
<li class="toctree-l1"><a class="reference internal" href="PWM.html">12. PWM</a></li>
<li class="toctree-l1"><a class="reference internal" href="TIMER.html">13. TIMER</a></li>
<li class="toctree-l1"><a class="reference internal" href="QDEC.html">14. QDEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="KeyScan.html">15. KeyScan</a></li>
<li class="toctree-l1"><a class="reference internal" href="I2S.html">16. I2S</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">17. Emac</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#emac-introduction">17.1. Emac introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emac-main-features">17.2. Emac main features</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emac-function-description">17.3. Emac function description</a></li>
<li class="toctree-l2"><a class="reference internal" href="#emac-clock">17.4. Emac clock</a></li>
<li class="toctree-l2"><a class="reference internal" href="#send-and-receive-buffer-descriptor-bd-buffer-descriptor">17.5. Send and receive buffer descriptor (BD, Buffer Descriptor)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#phy-interaction">17.6. PHY interaction</a></li>
<li class="toctree-l2"><a class="reference internal" href="#programming-process">17.7. Programming process</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#phy-initialization">17.7.1. PHY initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#send-data-frame">17.7.2. Send data frame</a></li>
<li class="toctree-l3"><a class="reference internal" href="#receive-data-frame">17.7.3. Receive data frame</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#register-description">17.8. Register description</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#mode">17.8.1. MODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#int-source">17.8.2. INT_SOURCE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#int-mask">17.8.3. INT_MASK</a></li>
<li class="toctree-l3"><a class="reference internal" href="#ipgt">17.8.4. IPGT</a></li>
<li class="toctree-l3"><a class="reference internal" href="#packetlen">17.8.5. PACKETLEN</a></li>
<li class="toctree-l3"><a class="reference internal" href="#collconfig">17.8.6. COLLCONFIG</a></li>
<li class="toctree-l3"><a class="reference internal" href="#tx-bd-num">17.8.7. TX_BD_NUM</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miimode">17.8.8. MIIMODE</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miicommand">17.8.9. MIICOMMAND</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miiaddress">17.8.10. MIIADDRESS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miitx-data">17.8.11. MIITX_DATA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miirx-data">17.8.12. MIIRX_DATA</a></li>
<li class="toctree-l3"><a class="reference internal" href="#miistatus">17.8.13. MIISTATUS</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mac-addr0">17.8.14. MAC_ADDR0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#mac-addr1">17.8.15. MAC_ADDR1</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hash0-addr">17.8.16. HASH0_ADDR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hash1-addr">17.8.17. HASH1_ADDR</a></li>
<li class="toctree-l3"><a class="reference internal" href="#txctrl">17.8.18. TXCTRL</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="USB.html">18. USB</a></li>
<li class="toctree-l1"><a class="reference internal" href="version.html">19. Revision history</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">BL702/704/706 Reference Manual</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li><span class="section-number">17. </span>Emac</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="emac">
<h1><span class="section-number">17. </span>Emac<a class="headerlink" href="#emac" title="Permalink to this headline"></a></h1>
<section id="emac-introduction">
<h2><span class="section-number">17.1. </span>Emac introduction<a class="headerlink" href="#emac-introduction" title="Permalink to this headline"></a></h2>
<p>The EMAC module is a 10/100Mbps Ethernet MAC (Ethernet Media Access Controller) compatible with IEEE 802.3.
It includes status and control register group, transceiver module, transceiver buffer descriptor group, host interface, MDIO, physical layer chip (PHY) interface.</p>
<p>The status and control register group contains the status bits and control bits of the EMAC, which is the interface with the user program, and is responsible for controlling data receiving and sending and reporting the status.</p>
<p>The transceiver module is responsible for obtaining the data frame from the designated memory location according to the control word in the transceiver descriptor, adding the preamble, CRC, and expanding the short frame before sending it out through the PHY;
Or receive data from the PHY, and put the data into the designated memory according to the transmit and receive buffer descriptor. Configure related event flags after sending and receiving. If the event interrupt is enabled, the interrupt request will be sent to the host for processing.</p>
<p>The MDIO and MII/RMII interfaces are responsible for communicating with the PHY, including reading and writing PHY registers and sending and receiving data packets.</p>
</section>
<section id="emac-main-features">
<h2><span class="section-number">17.2. </span>Emac main features<a class="headerlink" href="#emac-main-features" title="Permalink to this headline"></a></h2>
<ul class="simple">
<li><p>Compatible with the MAC layer functions defined by IEEE 802.3</p></li>
<li><p>Support MII and RMII interface PHY defined by IEEE 802.3</p></li>
<li><p>Interaction with PHY through MDIO</p></li>
<li><p>Support 10Mbps and 100Mbps Ethernet</p></li>
<li><p>Support half duplex and full duplex</p></li>
<li><p>In full duplex mode, support automatic flow control and control frame generation</p></li>
<li><p>Support collision detection and retransmission in half-duplex mode</p></li>
<li><p>Support CRC generation and verification</p></li>
<li><p>Data frame preamble generation and removal</p></li>
<li><p>When sending, automatically expand short data frames</p></li>
<li><p>Detect too long or too short data frame (length limit)</p></li>
<li><p>Can transmit long data frames (&gt; standard Ethernet frame length)</p></li>
<li><p>Automatically discard packets that exceed the number of retransmissions or the frame gap is too small</p></li>
<li><p>Broadcast packet filtering</p></li>
<li><p>Internal RAM for storing up to 128 BD (Buffer Descriptor)</p></li>
<li><p>Various event flags sent/received</p></li>
<li><p>Generate a corresponding interrupt when an event occurs</p></li>
</ul>
</section>
<section id="emac-function-description">
<h2><span class="section-number">17.3. </span>Emac function description<a class="headerlink" href="#emac-function-description" title="Permalink to this headline"></a></h2>
<p>The composition of the EMAC module is shown in the figure below.</p>
<figure class="align-center" id="id1">
<img alt="../_images/EMAC.svg" src="../_images/EMAC.svg" /><figcaption>
<p><span class="caption-number">Fig. 17.1 </span><span class="caption-text">EMAC architecture</span><a class="headerlink" href="#id1" title="Permalink to this image"></a></p>
</figcaption>
</figure>
<p>The module’s control register can read and write the PHY register through MDIO to realize configuration, select mode (half/full duplex), initiate negotiation and other operations.</p>
<p>The receiving module filters and checks the received data frame: whether there is a legal preamble, FCS, length, etc. And according to the descriptor, the data frame is stored in the designated buffer address.</p>
<p>The sending module obtains data from the memory according to the data buffer descriptor, adds preamble, FCS, pad, etc., and then sends the data according to the CSMA/CD protocol.</p>
<p>If CRS is detected, the retry will be delayed.</p>
<p>The send and receive buffer descriptor group is connected to the external RAM, which is used to store the Ethernet data frames sent and received. Each descriptor contains the corresponding control status word and the corresponding buffer memory address. There are 128 groups of descriptors, which can be flexibly allocated for sending or receiving.</p>
</section>
<section id="emac-clock">
<h2><span class="section-number">17.4. </span>Emac clock<a class="headerlink" href="#emac-clock" title="Permalink to this headline"></a></h2>
<p>The EMAC module needs a clock for synchronous transmission and reception (at 100Mbps, 25MHz (MII) or 50MHz (RMII); at 10Mbps, 2.5MHz).
This clock must be synchronized between EMAC and PHY.</p>
</section>
<section id="send-and-receive-buffer-descriptor-bd-buffer-descriptor">
<h2><span class="section-number">17.5. </span>Send and receive buffer descriptor (BD, Buffer Descriptor)<a class="headerlink" href="#send-and-receive-buffer-descriptor-bd-buffer-descriptor" title="Permalink to this headline"></a></h2>
<p>The transceiver buffer descriptor is used to provide the association between the EAMC and the data frame buffer address information, to control the transceiver data frame, and to provide the transceiver status prompt.</p>
<p>Each descriptor is composed of two consecutive words (32 bits). The low address word provides the length, control and status bits of the data frame contained in the buffer; the high address word is a memory pointer.</p>
<p>Specific BD description can refer to the register description chapter.</p>
<p>Note that: For BD, you need to write in word.</p>
<p>The EMAC module supports 128 BDs, which are shared by the sending/receiving logic and can be freely combined. But the sending BD always occupies the previous continuous area (the number is specified by the TXBDNUM field in the MAC_TX_BD_NUM register).</p>
<p>EMAC processes the sending/receiving BD in the order of BD, until it encounters the BD marked as WR, it wraps around to send/receive the respective first BD.</p>
</section>
<section id="phy-interaction">
<h2><span class="section-number">17.6. </span>PHY interaction<a class="headerlink" href="#phy-interaction" title="Permalink to this headline"></a></h2>
<p>The PHY interaction register group provides the commands and data communication methods needed for PHY interaction. EMAC controls the working mode of PHY through MDIO and ensures that the two match (rate, full/half duplex).</p>
<p>The data packet interacts between EMAC and PHY through the MII/RMII interface, and can be selected by RMII_EN in the EMAC mode register (EMAC_MODE). When this bit is 1, select RMII mode, otherwise it is MII mode.</p>
<p>Both MII and RMII modes support the 10Mbps and 100Mbps transmission rates specified in the IEEE 802.3u standard.</p>
<p>The transmission signal description of MII and RMII is shown in the table below.</p>
<table class="colwidths-given docutils align-center" id="id2" style="width: 100%">
<caption><span class="caption-number">Table 17.1 </span><span class="caption-text">Transmission signal</span><a class="headerlink" href="#id2" title="Permalink to this table"></a></caption>
<colgroup>
<col style="width: 24%" />
<col style="width: 38%" />
<col style="width: 38%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Name</p></th>
<th class="head"><p>MII</p></th>
<th class="head"><p>RMII</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>EXTCK_EREFCK</p></td>
<td><p>ETXCK: send clock signal</p></td>
<td><p>EREFCK: reference clock</p></td>
</tr>
<tr class="row-odd"><td><p>ECRS</p></td>
<td><p>ECRS: carrier detection</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>ECOL</p></td>
<td><p>ECOL: collision detection</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>ERXDV</p></td>
<td><p>ERXDV: data valid</p></td>
<td><p>ECRSDV: Carrier detect/data valid</p></td>
</tr>
<tr class="row-even"><td><p>ERX0-ERX3</p></td>
<td><p>ERX0-ERX3: 4-bit receive data</p></td>
<td><p>ERX0-ERX1: 2-bit receive data</p></td>
</tr>
<tr class="row-odd"><td><p>ERXER</p></td>
<td><p>ERXER: Receive error indication</p></td>
<td><p>ERXER: Receive error indication</p></td>
</tr>
<tr class="row-even"><td><p>ERXCK</p></td>
<td><p>ERXCK: Receive clock signal</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-odd"><td><p>ETXEN</p></td>
<td><p>ETXEN: transmit enable</p></td>
<td><p>ETXEN: transmit enable</p></td>
</tr>
<tr class="row-even"><td><p>ETX0-ETX3</p></td>
<td><p>ETX0-ETX3: 4-bit transmit data</p></td>
<td><p>ETX0-ETX1: 2-bit transmit data</p></td>
</tr>
<tr class="row-odd"><td><p>ETXER</p></td>
<td><p>ETXER: Send error indication</p></td>
<td><p>-</p></td>
</tr>
<tr class="row-even"><td><p>EMDC</p></td>
<td><p>MDIO Clock</p></td>
<td><p>MDIO Clock</p></td>
</tr>
<tr class="row-odd"><td><p>EMDIO</p></td>
<td><p>MDIO Data Input Output</p></td>
<td><p>MDIO Data Input Output</p></td>
</tr>
</tbody>
</table>
<p>The RMII interface has fewer pins, and a 2-bit data line is used for receiving and sending. At a rate of 100Mbps, a 50MHz reference clock is required.</p>
</section>
<section id="programming-process">
<h2><span class="section-number">17.7. </span>Programming process<a class="headerlink" href="#programming-process" title="Permalink to this headline"></a></h2>
<section id="phy-initialization">
<h3><span class="section-number">17.7.1. </span>PHY initialization<a class="headerlink" href="#phy-initialization" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>According to the PHY type, set the RMII_EN bit in the EMAC_MODE register to select the appropriate connection method</p></li>
<li><p>Set the MAC address of EMAC to EMAC_MAC_ADDR0 and EMAC_MAC_ADDR1</p></li>
<li><p>Set the appropriate clock for the MDIO part by programming the field CLKDIV in the EMAC_MIIMODE register</p></li>
<li><p>Set the corresponding PHY address to the FIAD field of the register EMAC_MIIADDRESS</p></li>
<li><p>According to the PHY manual, send commands through the EMAC_MIICOMMAND and EMAC_MIITX_DATA registers</p></li>
<li><p>The data read from the PHY will be stored in the EMAC_MIIRX_DATA register</p></li>
<li><p>The status of interaction with PHY commands can be queried through the EMAC_MIISTATUS register</p></li>
</ul>
<p>After the basic interaction is completed, the PHY should enter the auto-negotiation state. After the negotiation is completed, program the mode to the FULLD bit in the EMAC_MODE register according to the negotiation result.</p>
</section>
<section id="send-data-frame">
<h3><span class="section-number">17.7.2. </span>Send data frame<a class="headerlink" href="#send-data-frame" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Configure bit fields such as data frame format and interval in the EMAC_MODE register</p></li>
<li><p>By configuring the TXBDNUM field in the EMAC_TX_BD_NUM register to specify the number of BDs used for transmission, the remaining BDs are RX BDs</p></li>
<li><p>Prepare the data frame to be sent in the memory</p></li>
<li><p>Fill in the address of the data frame into the data pointer field (word 1) corresponding to the sent BD</p></li>
<li><p>Clear the status flag in the control and status field (wrod 0) corresponding to the sent BD, and set the control field (CRC enable, PAD enable, interrupt enable, etc.)</p></li>
<li><p>Write the length of the data frame and set the RD field to inform EMAC that this BD data needs to be sent; if necessary, set the IRQ bit to enable interrupts</p></li>
<li><p>In particular, if it is the last BD sent, the WR bit needs to be set, and EMAC will “wrap around” to the first sent BD for processing after processing this BD</p></li>
<li><p>If there are multiple BDs to be sent, repeat the steps of setting BD to fill all sending BDs</p></li>
<li><p>If you need to enable the transmit interrupt, you also need to configure the TX related bits in the EMAC_INT_MASK register</p></li>
<li><p>Configure the TXEN bit in the EMAC_MODE register to enable transmission</p></li>
<li><p>If the interrupt is enabled, in the interrupt sent, the current BD can be obtained through the TXBDNUM field in the EMAC_TX_BD_NUM register</p></li>
<li><p>Perform corresponding processing according to the current BD status word</p></li>
<li><p>For the BD whose data has been sent, the RD bit in the control field will be cleared by hardware and will not be sent again; after filling in new data, set RD, and this BD can be used for sending again</p></li>
</ul>
</section>
<section id="receive-data-frame">
<h3><span class="section-number">17.7.3. </span>Receive data frame<a class="headerlink" href="#receive-data-frame" title="Permalink to this headline"></a></h3>
<ul class="simple">
<li><p>Configure bit fields such as data frame format and interval in the EMAC_MODE register</p></li>
<li><p>By configuring the TXBDNUM field in the EMAC_TX_BD_NUM register to specify the number of BDs used for transmission, the remaining BDs are RX BDs</p></li>
<li><p>The area in the memory that is ready to receive data</p></li>
<li><p>Fill in the address of the data frame into the data pointer field (word 1) corresponding to the received BD</p></li>
<li><p>Clear the status flag in the control and status field (wrod 0) corresponding to the sending BD, and set the control field (interrupt enable, etc.)</p></li>
<li><p>Write the receivable data frame length and set the E bit field to inform EMAC that the BD is idle and can be used for data reception; if necessary, set the IRQ bit to enable interrupts</p></li>
<li><p>In particular, if it is the last valid receiving BD, the WR bit needs to be set, and EMAC will “wrap around” to the first receiving BD for processing after processing this BD</p></li>
<li><p>If there are multiple BDs available to receive data, repeat the steps of setting BD to fill all BDs</p></li>
<li><p>If you need to enable the receive interrupt, you also need to configure the RX related bits in the EMAC_INT_MASK register</p></li>
<li><p>Configure the RXEN bit in the EMAC_MODE register to enable reception</p></li>
<li><p>If the interrupt is enabled, in the received interrupt, the current BD can be obtained through the RXBDNUM field in the EMAC_TX_BD_NUM register</p></li>
<li><p>Perform corresponding processing according to the current BD status word</p></li>
<li><p>For the received BD, the E bit in the control field will be cleared by hardware and will not be used for receiving again; the data needs to be taken away, and E is set, this BD can be used for receiving again</p></li>
</ul>
</section>
</section>
<section id="register-description">
<h2><span class="section-number">17.8. </span>Register description<a class="headerlink" href="#register-description" title="Permalink to this headline"></a></h2>
<table class="docutils align-default">
<colgroup>
<col style="width: 30%" />
<col style="width: 70%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p>Name</p></td>
<td><p>Description</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#mode">MODE</a></p></td>
<td><p>EMAC configuration</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#int-source">INT_SOURCE</a></p></td>
<td><p>EMAC transmit control</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#int-mask">INT_MASK</a></p></td>
<td><p>EMAC interrupt mask</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#ipgt">IPGT</a></p></td>
<td><p>Inter packet gap</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#packetlen">PACKETLEN</a></p></td>
<td><p>Frame length</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#collconfig">COLLCONFIG</a></p></td>
<td><p>Collision configuration</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#tx-bd-num">TX_BD_NUM</a></p></td>
<td><p>TX buffer descriptors number</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#miimode">MIIMODE</a></p></td>
<td><p>Management Data configuration</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#miicommand">MIICOMMAND</a></p></td>
<td><p>Trigger command</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#miiaddress">MIIADDRESS</a></p></td>
<td><p>Register address</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#miitx-data">MIITX_DATA</a></p></td>
<td><p>Control data to be written to PHY</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#miirx-data">MIIRX_DATA</a></p></td>
<td><p>Received data from PHY</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#miistatus">MIISTATUS</a></p></td>
<td><p>MIIM I/F status</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#mac-addr0">MAC_ADDR0</a></p></td>
<td><p>Ethernet MAC address0</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#mac-addr1">MAC_ADDR1</a></p></td>
<td><p>Ethernet MAC address1</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#hash0-addr">HASH0_ADDR</a></p></td>
<td><p>Lower 32-bit of HASH register</p></td>
</tr>
<tr class="row-even"><td><p><a class="reference internal" href="#hash1-addr">HASH1_ADDR</a></p></td>
<td><p>Upper 32-bit of HASH register</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference internal" href="#txctrl">TXCTRL</a></p></td>
<td><p>TX control</p></td>
</tr>
</tbody>
</table>
<section id="mode">
<h3><span class="section-number">17.8.1. </span>MODE<a class="headerlink" href="#mode" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d000</p>
<figure class="align-center">
<img alt="../_images/emac_MODE.svg" src="../_images/emac_MODE.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:18</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>17</p></td>
<td rowspan="3"><p>RMII_EN</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>RMII mode enable</p>
<p>0: MII PHY I/F is used</p>
<p>1: RMII PHY I/F is used</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>16</p></td>
<td rowspan="3"><p>RECSMALL</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Receive small frame enable</p>
<p>0: Frames smaller than MINFL are ignored.</p>
<p>1: Frames smaller than MINFL are accepted.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>15</p></td>
<td rowspan="3"><p>PAD</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Padding enable</p>
<p>0: Do not add pads to frames shorter than MINFL.</p>
<p>1: Add pads to short frames, until the length equals MINFL.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>14</p></td>
<td rowspan="3"><p>HUGEN</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Huge frames enable</p>
<p>0: The maximum frame length is MAXFL. All additional bytes are dropped.</p>
<p>1: Frame size is not limited by MAXFL and can be up to 64K bytes.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>13</p></td>
<td rowspan="3"><p>CRCEN</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>CRC Enable</p>
<p>0: TX MAC does not append CRC field.</p>
<p>1: TX MAC will append CRC field to every frame.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>12:11</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>10</p></td>
<td rowspan="3"><p>FULLD</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Full duplex</p>
<p>0: Half duplex mode.</p>
<p>1: Full duplex mode.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>9:7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>6</p></td>
<td rowspan="3"><p>IFG</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Inter frame gap check</p>
<p>0: IFG is verified before each frame be received.</p>
<p>1: All frames are received regardless to IFG requirement.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>5</p></td>
<td rowspan="3"><p>PRO</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Promiscuous mode enable</p>
<p>0: The destination address is checked before receiving.</p>
<p>1: All frames received regardless of the address.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>4</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>3</p></td>
<td rowspan="3"><p>BRO</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Broadcast address enable</p>
<p>0: Reject all frames containing the broadcast address unless the PRO bit is asserted.</p>
<p>1: Receive all frames containing broadcast address.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>2</p></td>
<td rowspan="3"><p>NOPRE</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>No preamble mode</p>
<p>0: 7-byte preamble will be sent.</p>
<p>1: No preamble will be sent.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>1</p></td>
<td rowspan="4"><p>TXEN</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>Transmit enable</p>
<p>0: Transmitter is disabled.</p>
<p>1: Transmitter is enabled.</p>
<p>If TX_BD_NUM equals 0x0 (zero buffer descriptors are used), then the transmitter is disabled regardless of TXEN.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>0</p></td>
<td rowspan="4"><p>RXEN</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>Receiver enable</p>
<p>0: Receiver is disabled.</p>
<p>1: Receiver is enabled.</p>
<p>If TX_BD_NUM equals 0x80 (all buffer descriptors are used for TX), then the receiver is disabled regardless of RXEN.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="int-source">
<h3><span class="section-number">17.8.2. </span>INT_SOURCE<a class="headerlink" href="#int-source" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d004</p>
<figure class="align-center">
<img alt="../_images/emac_INT_SOURCE.svg" src="../_images/emac_INT_SOURCE.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>6</p></td>
<td rowspan="3"><p>RXC</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Receive control frame</p>
<p>This bit indicates that the control frame was received. It is cleared by writing 1 to it.</p>
<p>Bit RXFLOW in the CTRLMODE register must be set to 1 in order to get the RXC bit set.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>5</p></td>
<td rowspan="3"><p>TXC</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Transmit control frame</p>
<p>This bit indicates that a control frame was transmitted. It is cleared by writing 1 to it.</p>
<p>Bit TXFLOW in the CTRLMODE register must be set to 1 in order to get the TXC bit set.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>4</p></td>
<td rowspan="3"><p>BUSY</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Busy</p>
<p>This bit indicates that RX packet is being received and there is no empty buffer descriptor to use. It iscleared by writing 1 to it.</p>
<p>This bit appears regardless to the IRQ bits in the Receive Buffer Descriptor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>3</p></td>
<td rowspan="4"><p>RXE</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>Receive error</p>
<p>This bit indicates that an error occurred while receiving data (overrun, receiver error, dribble</p>
<p>nibble, too long, &gt;64K, CRC error, bus error or late collision. It is cleared by writing 1 to it.</p>
<p>This bit appears only when IRQ bit is set in the Receive Buffer Descriptor.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>2</p></td>
<td rowspan="3"><p>RXB</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Receive frame</p>
<p>This bit indicates that a frame was received. It is cleared by writing 1 to it.</p>
<p>This bit appears only when IRQ bit is set in the Receive Buffer Descriptor.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="4"><p>1</p></td>
<td rowspan="4"><p>TXE</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>1’b0</p></td>
<td rowspan="4"><p>Transmit error</p>
<p>This bit indicates that a buffer was not transmitted due to a transmit error (underrun,</p>
<p>retransmission limit, late collision, bus error or defer timeout). It is cleared by writing 1 to it.</p>
<p>This bit appears only when IRQ bit is set in the Transmit Buffer Descriptor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>0</p></td>
<td rowspan="3"><p>TXB</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>Transmit buffer</p>
<p>This bit indicates that a buffer has been transmitted. It is cleared by writing 1 to it.</p>
<p>This bit appears only when IRQ bit is set in the Transmit Buffer Descriptor.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="int-mask">
<h3><span class="section-number">17.8.3. </span>INT_MASK<a class="headerlink" href="#int-mask" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d008</p>
<figure class="align-center">
<img alt="../_images/emac_INT_MASK.svg" src="../_images/emac_INT_MASK.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>6</p></td>
<td rowspan="3"><p>RXC_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Receive control frame mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>5</p></td>
<td rowspan="3"><p>TXC_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Transmit control frame mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>4</p></td>
<td rowspan="3"><p>BUSY_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Busy mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>3</p></td>
<td rowspan="3"><p>RXE_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Receive error mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>2</p></td>
<td rowspan="3"><p>RXB_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Receive frame mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="3"><p>1</p></td>
<td rowspan="3"><p>TXE_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Transmit error mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="3"><p>0</p></td>
<td rowspan="3"><p>TXB_M</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b1</p></td>
<td rowspan="3"><p>Transmit buffer mask ENABLE</p>
<p>0: Interrupt is un-masked</p>
<p>1: Interrupt is masked</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="ipgt">
<h3><span class="section-number">17.8.4. </span>IPGT<a class="headerlink" href="#ipgt" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d00c</p>
<figure class="align-center">
<img alt="../_images/emac_IPGT.svg" src="../_images/emac_IPGT.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:7</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>6:0</p></td>
<td rowspan="3"><p>IPGT</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>7’h18</p></td>
<td rowspan="3"><p>Inter packet gap</p>
<p>The recommended value is 0x18 (24 clock cycles),</p>
<p>which equals 9.6 us for 10 Mbps and 0.96 us for 100 Mbps mode</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="packetlen">
<h3><span class="section-number">17.8.5. </span>PACKETLEN<a class="headerlink" href="#packetlen" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d018</p>
<figure class="align-center">
<img alt="../_images/emac_PACKETLEN.svg" src="../_images/emac_PACKETLEN.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td rowspan="4"><p>31:16</p></td>
<td rowspan="4"><p>MINFL</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>16’h40</p></td>
<td rowspan="4"><p>Minimum frame length</p>
<p>The minimum Ethernet packet is 64 bytes long (0x40).</p>
<p>To receive small packets, assert the RECSMALL bit or change the MINFL value.</p>
<p>To transmit small packets, assert the PAD bit or change the MINFL value.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="4"><p>15:0</p></td>
<td rowspan="4"><p>MAXFL</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>16’h600</p></td>
<td rowspan="4"><p>Maximum frame length</p>
<p>The maximum Ethernet packet is 1518 bytes long. To support this and to have some additional</p>
<p>space for tags, a default maximum packet length equals to 1536 bytes (0x600).</p>
<p>For bigger packets, you can assert the HUGEN bit or increase the value of MAXFL field.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="collconfig">
<h3><span class="section-number">17.8.6. </span>COLLCONFIG<a class="headerlink" href="#collconfig" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d01c</p>
<figure class="align-center">
<img alt="../_images/emac_COLLCONFIG.svg" src="../_images/emac_COLLCONFIG.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:20</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="4"><p>19:16</p></td>
<td rowspan="4"><p>MAXRET</p></td>
<td rowspan="4"><p>r/w</p></td>
<td rowspan="4"><p>4’hF</p></td>
<td rowspan="4"><p>Maximum retry</p>
<p>This field specifies the maximum number of consequential retransmission attempts after the collision is detected.</p>
<p>When the maximum number has been reached, the TX MAC reports an error and stops transmitting the current packet.</p>
<p>According to the Ethernet standard, the MAXRET default value is set to 0xf (15).</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td><p>15:6</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-even"><td rowspan="3"><p>5:0</p></td>
<td rowspan="3"><p>COLLVALID</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>6’h3F</p></td>
<td rowspan="3"><p>Collision valid</p>
<p>This field specifies a collision time window. A collision that occurs later than the time window</p>
<p>is reported as a “Late Collisions” and transmission of the current packet is aborted.</p>
</td>
</tr>
<tr class="row-odd"></tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="tx-bd-num">
<h3><span class="section-number">17.8.7. </span>TX_BD_NUM<a class="headerlink" href="#tx-bd-num" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d020</p>
<figure class="align-center">
<img alt="../_images/emac_TX_BD_NUM.svg" src="../_images/emac_TX_BD_NUM.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>30:24</p></td>
<td><p>RXBDPTR</p></td>
<td><p>r</p></td>
<td><p>7’h0</p></td>
<td><p>RX buffer descriptors (BD) pointer, pointing at the RXBD currently being used</p></td>
</tr>
<tr class="row-even"><td><p>23</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>22:16</p></td>
<td><p>TXBDPTR</p></td>
<td><p>r</p></td>
<td><p>7’h0</p></td>
<td><p>TX buffer descriptors (BD) pointer, pointing at the TXBD currently being used</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>7:0</p></td>
<td rowspan="3"><p>TXBDNUM</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>8’h40</p></td>
<td rowspan="3"><p>TX buffer descriptors (BD) number</p>
<p>Number of TX BD. TX and RX share 128 (0x80) descriptors, so the number of RX BD equals 0x80 - TXBDNUM.</p>
<p>The maximum number of TXBDNUM is 0x80. Values greater then 0x80 cannot be written into this register.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="miimode">
<h3><span class="section-number">17.8.8. </span>MIIMODE<a class="headerlink" href="#miimode" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d028</p>
<figure class="align-center">
<img alt="../_images/emac_MIIMODE.svg" src="../_images/emac_MIIMODE.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:9</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>8</p></td>
<td rowspan="3"><p>MIINOPRE</p></td>
<td rowspan="3"><p>r/w</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>No preamble for Management Data (MD)</p>
<p>0: 32-bit preamble will be sent.</p>
<p>1: No preamble will be sent.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td rowspan="2"><p>7:0</p></td>
<td rowspan="2"><p>CLKDIV</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>8’h64</p></td>
<td rowspan="2"><p>Clock divider for Management Data Clock (MDC)</p>
<p>The source clock is bus clock and can be divided by any even number.</p>
</td>
</tr>
<tr class="row-odd"></tr>
</tbody>
</table>
</section>
<section id="miicommand">
<h3><span class="section-number">17.8.9. </span>MIICOMMAND<a class="headerlink" href="#miicommand" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d02c</p>
<figure class="align-center">
<img alt="../_images/emac_MIICOMMAND.svg" src="../_images/emac_MIICOMMAND.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:3</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>2</p></td>
<td rowspan="2"><p>WCTRLDATA</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>Write control data, setting this bit to 1 will trigger the command (auto cleared)</p>
<p>Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>1</p></td>
<td rowspan="2"><p>RSTAT</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>Read status, setting this bit to 1 will trigger the command (auto cleared)</p>
<p>Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>0</p></td>
<td rowspan="2"><p>SCANSTAT</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>Scan status, setting this bit to 1 will trigger the command (auto cleared)</p>
<p>Note: [2]/[1]/[0] cannot be asserted at the same time, execute one command at a time</p>
</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
<section id="miiaddress">
<h3><span class="section-number">17.8.10. </span>MIIADDRESS<a class="headerlink" href="#miiaddress" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d030</p>
<figure class="align-center">
<img alt="../_images/emac_MIIADDRESS.svg" src="../_images/emac_MIIADDRESS.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:13</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>12:8</p></td>
<td><p>RGAD</p></td>
<td><p>r/w</p></td>
<td><p>5’h0</p></td>
<td><p>Register Address</p></td>
</tr>
<tr class="row-even"><td><p>7:5</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>4:0</p></td>
<td><p>FIAD</p></td>
<td><p>r/w</p></td>
<td><p>5’h0</p></td>
<td><p>PHY Address</p></td>
</tr>
</tbody>
</table>
</section>
<section id="miitx-data">
<h3><span class="section-number">17.8.11. </span>MIITX_DATA<a class="headerlink" href="#miitx-data" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d034</p>
<figure class="align-center">
<img alt="../_images/emac_MIITX_DATA.svg" src="../_images/emac_MIITX_DATA.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15:0</p></td>
<td><p>CTRLDATA</p></td>
<td><p>r/w</p></td>
<td><p>16’h0</p></td>
<td><p>Control Data to be written to PHY</p></td>
</tr>
</tbody>
</table>
</section>
<section id="miirx-data">
<h3><span class="section-number">17.8.12. </span>MIIRX_DATA<a class="headerlink" href="#miirx-data" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d038</p>
<figure class="align-center">
<img alt="../_images/emac_MIIRX_DATA.svg" src="../_images/emac_MIIRX_DATA.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15:0</p></td>
<td><p>PRSD</p></td>
<td><p>r</p></td>
<td><p>16’h0</p></td>
<td><p>Received Data from PHY</p></td>
</tr>
</tbody>
</table>
</section>
<section id="miistatus">
<h3><span class="section-number">17.8.13. </span>MIISTATUS<a class="headerlink" href="#miistatus" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d03c</p>
<figure class="align-center">
<img alt="../_images/emac_MIISTATUS.svg" src="../_images/emac_MIISTATUS.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:2</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="3"><p>1</p></td>
<td rowspan="3"><p>MIIM_BUSY</p></td>
<td rowspan="3"><p>r</p></td>
<td rowspan="3"><p>1’b0</p></td>
<td rowspan="3"><p>MIIM I/F busy signal</p>
<p>0: The MIIM I/F is ready.</p>
<p>1: The MIIM I/F is busy.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"></tr>
<tr class="row-even"><td><p>0</p></td>
<td><p>MIIM_LINKFAIL</p></td>
<td><p>r</p></td>
<td><p>1’b0</p></td>
<td><p>MIIM I/F link fail signal</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mac-addr0">
<h3><span class="section-number">17.8.14. </span>MAC_ADDR0<a class="headerlink" href="#mac-addr0" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d040</p>
<figure class="align-center">
<img alt="../_images/emac_MAC_ADDR0.svg" src="../_images/emac_MAC_ADDR0.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:24</p></td>
<td><p>MAC_B2</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 2</p></td>
</tr>
<tr class="row-odd"><td><p>23:16</p></td>
<td><p>MAC_B3</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 3</p></td>
</tr>
<tr class="row-even"><td><p>15:8</p></td>
<td><p>MAC_B4</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 4</p></td>
</tr>
<tr class="row-odd"><td><p>7:0</p></td>
<td><p>MAC_B5</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 5</p></td>
</tr>
</tbody>
</table>
</section>
<section id="mac-addr1">
<h3><span class="section-number">17.8.15. </span>MAC_ADDR1<a class="headerlink" href="#mac-addr1" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d044</p>
<figure class="align-center">
<img alt="../_images/emac_MAC_ADDR1.svg" src="../_images/emac_MAC_ADDR1.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:16</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td><p>15:8</p></td>
<td><p>MAC_B0</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 0</p></td>
</tr>
<tr class="row-even"><td><p>7:0</p></td>
<td><p>MAC_B1</p></td>
<td><p>r/w</p></td>
<td><p>8’d0</p></td>
<td><p>Ethernet MAC address byte 1</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hash0-addr">
<h3><span class="section-number">17.8.16. </span>HASH0_ADDR<a class="headerlink" href="#hash0-addr" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d048</p>
<figure class="align-center">
<img alt="../_images/emac_HASH0_ADDR.svg" src="../_images/emac_HASH0_ADDR.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>HASH0</p></td>
<td><p>r/w</p></td>
<td><p>32’h0</p></td>
<td><p>Lower 32-bit of HASH register</p></td>
</tr>
</tbody>
</table>
</section>
<section id="hash1-addr">
<h3><span class="section-number">17.8.17. </span>HASH1_ADDR<a class="headerlink" href="#hash1-addr" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d04c</p>
<figure class="align-center">
<img alt="../_images/emac_HASH1_ADDR.svg" src="../_images/emac_HASH1_ADDR.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:0</p></td>
<td><p>HASH1</p></td>
<td><p>r/w</p></td>
<td><p>32’h0</p></td>
<td><p>Upper 32-bit of HASH register</p></td>
</tr>
</tbody>
</table>
</section>
<section id="txctrl">
<h3><span class="section-number">17.8.18. </span>TXCTRL<a class="headerlink" href="#txctrl" title="Permalink to this headline"></a></h3>
<p><strong>Address：</strong>  0x4000d050</p>
<figure class="align-center">
<img alt="../_images/emac_TXCTRL.svg" src="../_images/emac_TXCTRL.svg" /></figure>
<table class="colwidths-given docutils align-center" style="width: 100%">
<colgroup>
<col style="width: 10%" />
<col style="width: 15%" />
<col style="width: 10%" />
<col style="width: 10%" />
<col style="width: 55%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Bit</p></th>
<th class="head"><p>Name</p></th>
<th class="head"><p>Type</p></th>
<th class="head"><p>Reset</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>31:17</p></td>
<td><p>RSVD</p></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr class="row-odd"><td rowspan="2"><p>16</p></td>
<td rowspan="2"><p>TXPAUSERQ</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>1’b0</p></td>
<td rowspan="2"><p>TX Pause Request</p>
<p>Writing 1 to this bit starts sending control frame and is automatically cleared to zero.</p>
</td>
</tr>
<tr class="row-even"></tr>
<tr class="row-odd"><td rowspan="2"><p>15:0</p></td>
<td rowspan="2"><p>TXPAUSETV</p></td>
<td rowspan="2"><p>r/w</p></td>
<td rowspan="2"><p>16’h0</p></td>
<td rowspan="2"><p>TX Pause Timer Value</p>
<p>The value that is sent in the pause control frame.</p>
</td>
</tr>
<tr class="row-even"></tr>
</tbody>
</table>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="I2S.html" class="btn btn-neutral float-left" title="16. I2S" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="USB.html" class="btn btn-neutral float-right" title="18. USB" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>